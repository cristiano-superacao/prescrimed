@echo off
chcp 65001 >nul
cls

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                                                                   โ
echo โ          ๐ PRESCRIMED - CONFIGURAรรO DE BANCO / START ๐         โ
echo โ                                                                   โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo   OPรรO 1: SQLITE LOCAL (RECOMENDADO PARA TESTES) ๐พ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   โ Sem instalaรงรฃo
echo   โ Persistรชncia local (arquivo database.sqlite)
echo   โ Ideal para desenvolvimento
echo.

set /p "opcao1=Deseja iniciar o sistema usando SQLite agora? (S/N): "
if /i "%opcao1%"=="S" goto INICIAR_SISTEMA

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo   OPรรO 2: POSTGRESQL LOCAL (AVANรADO) ๐
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   โ Para usar PostgreSQL local, instale e configure variรกveis PG*
echo   โ Exemplo: PGHOST=localhost, PGUSER=postgres, PGPASSWORD=postgres, PGDATABASE=prescrimed
echo   โ๏ธ Se nรฃo configurar, o sistema usa SQLite automaticamente
echo.

set /p "opcao2=Deseja iniciar o sistema agora (com PostgreSQL se PG* estiver configurado)? (S/N): "
if /i "%opcao2%"=="S" goto INICIAR_SISTEMA

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

:INICIAR_SISTEMA
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo   ๐ INICIANDO SISTEMA PRESCRIMED
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

set /p "iniciar=Deseja iniciar o sistema agora? (S/N): "
if /i "%iniciar%"=="S" (
    echo.
    echo โณ Iniciando Backend (porta 8000)...
    start "PrescrIMed Backend" cmd /k "npm run dev"
    
    timeout /t 3 >nul
    
    echo โณ Iniciando Frontend (porta 5173)...
    start "PrescrIMed Frontend" cmd /k "cd client && npm run dev"
    
    timeout /t 5 >nul
    
    echo.
    echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    echo โ                    โ SISTEMA INICIADO COM SUCESSO! โ            โ
    echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    echo.
    echo   ๐ Backend:  http://localhost:8000
    echo   ๐ Frontend: http://localhost:5173
    echo.
    echo   ๐ Documentaรงรฃo completa: README.md
    echo   ๐ง Produรงรฃo/Deploy: configure DATABASE_URL no provedor
    echo.
    
    set /p "abrir=Deseja abrir o sistema no navegador? (S/N): "
    if /i "!abrir!"=="S" (
        echo โณ Abrindo navegador...
        start http://localhost:5173
        echo โ Navegador aberto!
    )
)

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo   ๐ PRรXIMOS PASSOS
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   1. Se for produรงรฃo: configure DATABASE_URL (PostgreSQL)
echo   2. Acesse: http://localhost:5173
echo   3. Clique em "Registrar"
echo   4. Preencha os dados da primeira empresa
echo   5. Comece a usar! ๐
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

pause
