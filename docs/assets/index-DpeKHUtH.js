import{r as e,a as t,g as s,R as a,u as r,L as i,N as n,O as l,b as o,H as c,c as d,d as m}from"./vendor-CdzXp7aM.js";import{B as x,M as u,L as p,A as h,z as f,U as b,S as g,a as j,H as v,b as y,P as N,c as w,F as C,d as k,T as S,R as E,D as A,C as P,e as R,f as z,g as D,h as T,i as O,j as q,k as L,X as F,l as I,m as _,n as U,o as B,p as M,q as $,r as V,s as G,t as H,I as J,u as W,v as Q,w as K,x as Y,y as X,E as Z,G as ee,J as te,K as se,N as ae,O as re,Q as ie,V as ne,W as le,Y as oe,Z as ce,_ as de,$ as me,a0 as xe,a1 as ue,a2 as pe,a3 as he,a4 as fe,a5 as be,a6 as ge,a7 as je,a8 as ve,a9 as ye,aa as Ne,ab as we,ac as Ce,ad as ke,ae as Se,af as Ee,ag as Ae,ah as Pe}from"./ui-DeflXkti.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Re={exports:{}},ze={},De=e,Te=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),qe=Object.prototype.hasOwnProperty,Le=De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function Ie(e,t,s){var a,r={},i=null,n=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(n=t.ref),t)qe.call(t,a)&&!Fe.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:Te,type:e,key:i,ref:n,props:r,_owner:Le.current}}ze.Fragment=Oe,ze.jsx=Ie,ze.jsxs=Ie,Re.exports=ze;var _e=Re.exports,Ue={},Be=t;Ue.createRoot=Be.createRoot,Ue.hydrateRoot=Be.hydrateRoot;const Me=e=>{let t;const s=new Set,a=(e,a)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,i={setState:a,getState:r,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{s.clear()}},n=t=e(a,r,i);return i};var $e={exports:{}},Ve={},Ge={exports:{}},He={},Je=e;var We="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Qe=Je.useState,Ke=Je.useEffect,Ye=Je.useLayoutEffect,Xe=Je.useDebugValue;function Ze(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!We(e,s)}catch(a){return!0}}var et="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=Qe({inst:{value:s,getSnapshot:t}}),r=a[0].inst,i=a[1];return Ye(function(){r.value=s,r.getSnapshot=t,Ze(r)&&i({inst:r})},[e,s,t]),Ke(function(){return Ze(r)&&i({inst:r}),e(function(){Ze(r)&&i({inst:r})})},[e]),Xe(s),s};He.useSyncExternalStore=void 0!==Je.useSyncExternalStore?Je.useSyncExternalStore:et,Ge.exports=He;var tt=Ge.exports,st=e,at=tt;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},it=at.useSyncExternalStore,nt=st.useRef,lt=st.useEffect,ot=st.useMemo,ct=st.useDebugValue;Ve.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var i=nt(null);if(null===i.current){var n={hasValue:!1,value:null};i.current=n}else n=i.current;i=ot(function(){function e(e){if(!o){if(o=!0,i=e,e=a(e),void 0!==r&&n.hasValue){var t=n.value;if(r(t,e))return l=t}return l=e}if(t=l,rt(i,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(i=e,t):(i=e,l=s)}var i,l,o=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,a,r]);var l=it(e,i[0],i[1]);return lt(function(){n.hasValue=!0,n.value=l},[l]),ct(l),l},$e.exports=Ve;const dt=s($e.exports),mt={},{useDebugValue:xt}=a,{useSyncExternalStoreWithSelector:ut}=dt;let pt=!1;const ht=e=>e;const ft=e=>{const t="function"==typeof e?(e=>e?Me(e):Me)(e):e,s=(e,s)=>function(e,t=ht,s){"production"!==(mt?"github":void 0)&&s&&!pt&&(pt=!0);const a=ut(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return xt(a),a}(t,e,s);return Object.assign(s,t),s};function bt(e,t){return function(){return e.apply(t,arguments)}}const{toString:gt}=Object.prototype,{getPrototypeOf:jt}=Object,{iterator:vt,toStringTag:yt}=Symbol,Nt=(e=>t=>{const s=gt.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),wt=e=>(e=e.toLowerCase(),t=>Nt(t)===e),Ct=e=>t=>typeof t===e,{isArray:kt}=Array,St=Ct("undefined");function Et(e){return null!==e&&!St(e)&&null!==e.constructor&&!St(e.constructor)&&Rt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const At=wt("ArrayBuffer");const Pt=Ct("string"),Rt=Ct("function"),zt=Ct("number"),Dt=e=>null!==e&&"object"==typeof e,Tt=e=>{if("object"!==Nt(e))return!1;const t=jt(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||yt in e||vt in e)},Ot=wt("Date"),qt=wt("File"),Lt=wt("Blob"),Ft=wt("FileList"),It=wt("URLSearchParams"),[_t,Ut,Bt,Mt]=["ReadableStream","Request","Response","Headers"].map(wt);function $t(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let a,r;if("object"!=typeof e&&(e=[e]),kt(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(Et(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let n;for(a=0;a<i;a++)n=r[a],t.call(null,e[n],n,e)}}function Vt(e,t){if(Et(e))return null;t=t.toLowerCase();const s=Object.keys(e);let a,r=s.length;for(;r-- >0;)if(a=s[r],t===a.toLowerCase())return a;return null}const Gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ht=e=>!St(e)&&e!==Gt;const Jt=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&jt(Uint8Array)),Wt=wt("HTMLFormElement"),Qt=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Kt=wt("RegExp"),Yt=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),a={};$t(s,(s,r)=>{let i;!1!==(i=t(s,r,e))&&(a[r]=i||s)}),Object.defineProperties(e,a)};const Xt=wt("AsyncFunction"),Zt=(es="function"==typeof setImmediate,ts=Rt(Gt.postMessage),es?setImmediate:ts?(ss=`axios@${Math.random()}`,as=[],Gt.addEventListener("message",({source:e,data:t})=>{e===Gt&&t===ss&&as.length&&as.shift()()},!1),e=>{as.push(e),Gt.postMessage(ss,"*")}):e=>setTimeout(e));var es,ts,ss,as;const rs="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Gt):"undefined"!=typeof process&&process.nextTick||Zt,is={isArray:kt,isArrayBuffer:At,isBuffer:Et,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Rt(e.append)&&("formdata"===(t=Nt(e))||"object"===t&&Rt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&At(e.buffer),t},isString:Pt,isNumber:zt,isBoolean:e=>!0===e||!1===e,isObject:Dt,isPlainObject:Tt,isEmptyObject:e=>{if(!Dt(e)||Et(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:_t,isRequest:Ut,isResponse:Bt,isHeaders:Mt,isUndefined:St,isDate:Ot,isFile:qt,isBlob:Lt,isRegExp:Kt,isFunction:Rt,isStream:e=>Dt(e)&&Rt(e.pipe),isURLSearchParams:It,isTypedArray:Jt,isFileList:Ft,forEach:$t,merge:function e(){const{caseless:t,skipUndefined:s}=Ht(this)&&this||{},a={},r=(r,i)=>{const n=t&&Vt(a,i)||i;Tt(a[n])&&Tt(r)?a[n]=e(a[n],r):Tt(r)?a[n]=e({},r):kt(r)?a[n]=r.slice():s&&St(r)||(a[n]=r)};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&$t(arguments[i],r);return a},extend:(e,t,s,{allOwnKeys:a}={})=>($t(t,(t,a)=>{s&&Rt(t)?e[a]=bt(t,s):e[a]=t},{allOwnKeys:a}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,a)=>{let r,i,n;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)n=r[i],a&&!a(n,e,t)||l[n]||(t[n]=e[n],l[n]=!0);e=!1!==s&&jt(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:Nt,kindOfTest:wt,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const a=e.indexOf(t,s);return-1!==a&&a===s},toArray:e=>{if(!e)return null;if(kt(e))return e;let t=e.length;if(!zt(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[vt]).call(e);let a;for(;(a=s.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const a=[];for(;null!==(s=e.exec(t));)a.push(s);return a},isHTMLForm:Wt,hasOwnProperty:Qt,hasOwnProp:Qt,reduceDescriptors:Yt,freezeMethods:e=>{Yt(e,(t,s)=>{if(Rt(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const a=e[s];Rt(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},a=e=>{e.forEach(e=>{s[e]=!0})};return kt(e)?a(e):a(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Vt,global:Gt,isContextDefined:Ht,isSpecCompliantForm:function(e){return!!(e&&Rt(e.append)&&"FormData"===e[yt]&&e[vt])},toJSONObject:e=>{const t=new Array(10),s=(e,a)=>{if(Dt(e)){if(t.indexOf(e)>=0)return;if(Et(e))return e;if(!("toJSON"in e)){t[a]=e;const r=kt(e)?[]:{};return $t(e,(e,t)=>{const i=s(e,a+1);!St(i)&&(r[t]=i)}),t[a]=void 0,r}}return e};return s(e,0)},isAsyncFn:Xt,isThenable:e=>e&&(Dt(e)||Rt(e))&&Rt(e.then)&&Rt(e.catch),setImmediate:Zt,asap:rs,isIterable:e=>null!=e&&Rt(e[vt])};function ns(e,t,s,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}is.inherits(ns,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:is.toJSONObject(this.config),code:this.code,status:this.status}}});const ls=ns.prototype,os={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{os[e]={value:e}}),Object.defineProperties(ns,os),Object.defineProperty(ls,"isAxiosError",{value:!0}),ns.from=(e,t,s,a,r,i)=>{const n=Object.create(ls);is.toFlatObject(e,n,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return ns.call(n,l,o,s,a,r),e&&null==n.cause&&Object.defineProperty(n,"cause",{value:e,configurable:!0}),n.name=e&&e.name||"Error",i&&Object.assign(n,i),n};function cs(e){return is.isPlainObject(e)||is.isArray(e)}function ds(e){return is.endsWith(e,"[]")?e.slice(0,-2):e}function ms(e,t,s){return e?e.concat(t).map(function(e,t){return e=ds(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const xs=is.toFlatObject(is,{},null,function(e){return/^is[A-Z]/.test(e)});function us(e,t,s){if(!is.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(s=is.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!is.isUndefined(t[e])})).metaTokens,r=s.visitor||c,i=s.dots,n=s.indexes,l=(s.Blob||"undefined"!=typeof Blob&&Blob)&&is.isSpecCompliantForm(t);if(!is.isFunction(r))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(is.isDate(e))return e.toISOString();if(is.isBoolean(e))return e.toString();if(!l&&is.isBlob(e))throw new ns("Blob is not supported. Use a Buffer instead.");return is.isArrayBuffer(e)||is.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,r){let l=e;if(e&&!r&&"object"==typeof e)if(is.endsWith(s,"{}"))s=a?s:s.slice(0,-2),e=JSON.stringify(e);else if(is.isArray(e)&&function(e){return is.isArray(e)&&!e.some(cs)}(e)||(is.isFileList(e)||is.endsWith(s,"[]"))&&(l=is.toArray(e)))return s=ds(s),l.forEach(function(e,a){!is.isUndefined(e)&&null!==e&&t.append(!0===n?ms([s],a,i):null===n?s:s+"[]",o(e))}),!1;return!!cs(e)||(t.append(ms(r,s,i),o(e)),!1)}const d=[],m=Object.assign(xs,{defaultVisitor:c,convertValue:o,isVisitable:cs});if(!is.isObject(e))throw new TypeError("data must be an object");return function e(s,a){if(!is.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+a.join("."));d.push(s),is.forEach(s,function(s,i){!0===(!(is.isUndefined(s)||null===s)&&r.call(t,s,is.isString(i)?i.trim():i,a,m))&&e(s,a?a.concat(i):[i])}),d.pop()}}(e),t}function ps(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function hs(e,t){this._pairs=[],e&&us(e,this,t)}const fs=hs.prototype;function bs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gs(e,t,s){if(!t)return e;const a=s&&s.encode||bs;is.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(i=r?r(t,s):is.isURLSearchParams(t)?t.toString():new hs(t,s).toString(a),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}fs.append=function(e,t){this._pairs.push([e,t])},fs.toString=function(e){const t=e?function(t){return e.call(this,t,ps)}:ps;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class js{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){is.forEach(this.handlers,function(t){null!==t&&e(t)})}}const vs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ys={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:hs,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ns="undefined"!=typeof window&&"undefined"!=typeof document,ws="object"==typeof navigator&&navigator||void 0,Cs=Ns&&(!ws||["ReactNative","NativeScript","NS"].indexOf(ws.product)<0),ks="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ss=Ns&&window.location.href||"http://localhost",Es={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ns,hasStandardBrowserEnv:Cs,hasStandardBrowserWebWorkerEnv:ks,navigator:ws,origin:Ss},Symbol.toStringTag,{value:"Module"})),...ys};function As(e){function t(e,s,a,r){let i=e[r++];if("__proto__"===i)return!0;const n=Number.isFinite(+i),l=r>=e.length;if(i=!i&&is.isArray(a)?a.length:i,l)return is.hasOwnProp(a,i)?a[i]=[a[i],s]:a[i]=s,!n;a[i]&&is.isObject(a[i])||(a[i]=[]);return t(e,s,a[i],r)&&is.isArray(a[i])&&(a[i]=function(e){const t={},s=Object.keys(e);let a;const r=s.length;let i;for(a=0;a<r;a++)i=s[a],t[i]=e[i];return t}(a[i])),!n}if(is.isFormData(e)&&is.isFunction(e.entries)){const s={};return is.forEachEntry(e,(e,a)=>{t(function(e){return is.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,s,0)}),s}return null}const Ps={transitional:vs,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",a=s.indexOf("application/json")>-1,r=is.isObject(e);r&&is.isHTMLForm(e)&&(e=new FormData(e));if(is.isFormData(e))return a?JSON.stringify(As(e)):e;if(is.isArrayBuffer(e)||is.isBuffer(e)||is.isStream(e)||is.isFile(e)||is.isBlob(e)||is.isReadableStream(e))return e;if(is.isArrayBufferView(e))return e.buffer;if(is.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return us(e,new Es.classes.URLSearchParams,{visitor:function(e,t,s,a){return Es.isNode&&is.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=is.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return us(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),function(e,t,s){if(is.isString(e))try{return(t||JSON.parse)(e),is.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ps.transitional,s=t&&t.forcedJSONParsing,a="json"===this.responseType;if(is.isResponse(e)||is.isReadableStream(e))return e;if(e&&is.isString(e)&&(s&&!this.responseType||a)){const s=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(r){if(s){if("SyntaxError"===r.name)throw ns.from(r,ns.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Es.classes.FormData,Blob:Es.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};is.forEach(["delete","get","head","post","put","patch"],e=>{Ps.headers[e]={}});const Rs=is.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zs=Symbol("internals");function Ds(e){return e&&String(e).trim().toLowerCase()}function Ts(e){return!1===e||null==e?e:is.isArray(e)?e.map(Ts):String(e)}function Os(e,t,s,a,r){return is.isFunction(a)?a.call(this,t,s):(r&&(t=s),is.isString(t)?is.isString(a)?-1!==t.indexOf(a):is.isRegExp(a)?a.test(t):void 0:void 0)}let qs=class{constructor(e){e&&this.set(e)}set(e,t,s){const a=this;function r(e,t,s){const r=Ds(t);if(!r)throw new Error("header name must be a non-empty string");const i=is.findKey(a,r);(!i||void 0===a[i]||!0===s||void 0===s&&!1!==a[i])&&(a[i||t]=Ts(e))}const i=(e,t)=>is.forEach(e,(e,s)=>r(e,s,t));if(is.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(is.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let s,a,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),s=e.substring(0,r).trim().toLowerCase(),a=e.substring(r+1).trim(),!s||t[s]&&Rs[s]||("set-cookie"===s?t[s]?t[s].push(a):t[s]=[a]:t[s]=t[s]?t[s]+", "+a:a)}),t})(e),t);else if(is.isObject(e)&&is.isIterable(e)){let s,a,r={};for(const t of e){if(!is.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(s=r[a])?is.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}i(r,t)}else null!=e&&r(t,e,s);return this}get(e,t){if(e=Ds(e)){const s=is.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(e);)t[a[1]]=a[2];return t}(e);if(is.isFunction(t))return t.call(this,e,s);if(is.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ds(e)){const s=is.findKey(this,e);return!(!s||void 0===this[s]||t&&!Os(0,this[s],s,t))}return!1}delete(e,t){const s=this;let a=!1;function r(e){if(e=Ds(e)){const r=is.findKey(s,e);!r||t&&!Os(0,s[r],r,t)||(delete s[r],a=!0)}}return is.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let s=t.length,a=!1;for(;s--;){const r=t[s];e&&!Os(0,this[r],r,e,!0)||(delete this[r],a=!0)}return a}normalize(e){const t=this,s={};return is.forEach(this,(a,r)=>{const i=is.findKey(s,r);if(i)return t[i]=Ts(a),void delete t[r];const n=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(r):String(r).trim();n!==r&&delete t[r],t[n]=Ts(a),s[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return is.forEach(this,(s,a)=>{null!=s&&!1!==s&&(t[a]=e&&is.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(e=>s.set(e)),s}static accessor(e){const t=(this[zs]=this[zs]={accessors:{}}).accessors,s=this.prototype;function a(e){const a=Ds(e);t[a]||(!function(e,t){const s=is.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+s,{value:function(e,s,r){return this[a].call(this,t,e,s,r)},configurable:!0})})}(s,e),t[a]=!0)}return is.isArray(e)?e.forEach(a):a(e),this}};function Ls(e,t){const s=this||Ps,a=t||s,r=qs.from(a.headers);let i=a.data;return is.forEach(e,function(e){i=e.call(s,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Fs(e){return!(!e||!e.__CANCEL__)}function Is(e,t,s){ns.call(this,null==e?"canceled":e,ns.ERR_CANCELED,t,s),this.name="CanceledError"}function _s(e,t,s){const a=s.config.validateStatus;s.status&&a&&!a(s.status)?t(new ns("Request failed with status code "+s.status,[ns.ERR_BAD_REQUEST,ns.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}qs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),is.reduceDescriptors(qs.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}}),is.freezeMethods(qs),is.inherits(Is,ns,{__CANCEL__:!0});const Us=(e,t,s=3)=>{let a=0;const r=function(e,t){e=e||10;const s=new Array(e),a=new Array(e);let r,i=0,n=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=a[n];r||(r=o),s[i]=l,a[i]=o;let d=n,m=0;for(;d!==i;)m+=s[d++],d%=e;if(i=(i+1)%e,i===n&&(n=(n+1)%e),o-r<t)return;const x=c&&o-c;return x?Math.round(1e3*m/x):void 0}}(50,250);return function(e,t){let s,a,r=0,i=1e3/t;const n=(t,i=Date.now())=>{r=i,s=null,a&&(clearTimeout(a),a=null),e(...t)};return[(...e)=>{const t=Date.now(),l=t-r;l>=i?n(e,t):(s=e,a||(a=setTimeout(()=>{a=null,n(s)},i-l)))},()=>s&&n(s)]}(s=>{const i=s.loaded,n=s.lengthComputable?s.total:void 0,l=i-a,o=r(l);a=i;e({loaded:i,total:n,progress:n?i/n:void 0,bytes:l,rate:o||void 0,estimated:o&&n&&i<=n?(n-i)/o:void 0,event:s,lengthComputable:null!=n,[t?"download":"upload"]:!0})},s)},Bs=(e,t)=>{const s=null!=e;return[a=>t[0]({lengthComputable:s,total:e,loaded:a}),t[1]]},Ms=e=>(...t)=>is.asap(()=>e(...t)),$s=Es.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Es.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Es.origin),Es.navigator&&/(msie|trident)/i.test(Es.navigator.userAgent)):()=>!0,Vs=Es.hasStandardBrowserEnv?{write(e,t,s,a,r,i,n){if("undefined"==typeof document)return;const l=[`${e}=${encodeURIComponent(t)}`];is.isNumber(s)&&l.push(`expires=${new Date(s).toUTCString()}`),is.isString(a)&&l.push(`path=${a}`),is.isString(r)&&l.push(`domain=${r}`),!0===i&&l.push("secure"),is.isString(n)&&l.push(`SameSite=${n}`),document.cookie=l.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Gs(e,t,s){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Hs=e=>e instanceof qs?{...e}:e;function Js(e,t){t=t||{};const s={};function a(e,t,s,a){return is.isPlainObject(e)&&is.isPlainObject(t)?is.merge.call({caseless:a},e,t):is.isPlainObject(t)?is.merge({},t):is.isArray(t)?t.slice():t}function r(e,t,s,r){return is.isUndefined(t)?is.isUndefined(e)?void 0:a(void 0,e,0,r):a(e,t,0,r)}function i(e,t){if(!is.isUndefined(t))return a(void 0,t)}function n(e,t){return is.isUndefined(t)?is.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function l(s,r,i){return i in t?a(s,r):i in e?a(void 0,s):void 0}const o={url:i,method:i,data:i,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:l,headers:(e,t,s)=>r(Hs(e),Hs(t),0,!0)};return is.forEach(Object.keys({...e,...t}),function(a){const i=o[a]||r,n=i(e[a],t[a],a);is.isUndefined(n)&&i!==l||(s[a]=n)}),s}const Ws=e=>{const t=Js({},e);let{data:s,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:i,headers:n,auth:l}=t;if(t.headers=n=qs.from(n),t.url=gs(Gs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&n.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),is.isFormData(s))if(Es.hasStandardBrowserEnv||Es.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if(is.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,s])=>{t.includes(e.toLowerCase())&&n.set(e,s)})}if(Es.hasStandardBrowserEnv&&(a&&is.isFunction(a)&&(a=a(t)),a||!1!==a&&$s(t.url))){const e=r&&i&&Vs.read(i);e&&n.set(r,e)}return t},Qs="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const a=Ws(e);let r=a.data;const i=qs.from(a.headers).normalize();let n,l,o,c,d,{responseType:m,onUploadProgress:x,onDownloadProgress:u}=a;function p(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(n),a.signal&&a.signal.removeEventListener("abort",n)}let h=new XMLHttpRequest;function f(){if(!h)return;const a=qs.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders());_s(function(e){t(e),p()},function(e){s(e),p()},{data:m&&"text"!==m&&"json"!==m?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:a,config:e,request:h}),h=null}h.open(a.method.toUpperCase(),a.url,!0),h.timeout=a.timeout,"onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(f)},h.onabort=function(){h&&(s(new ns("Request aborted",ns.ECONNABORTED,e,h)),h=null)},h.onerror=function(t){const a=new ns(t&&t.message?t.message:"Network Error",ns.ERR_NETWORK,e,h);a.event=t||null,s(a),h=null},h.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const r=a.transitional||vs;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),s(new ns(t,r.clarifyTimeoutError?ns.ETIMEDOUT:ns.ECONNABORTED,e,h)),h=null},void 0===r&&i.setContentType(null),"setRequestHeader"in h&&is.forEach(i.toJSON(),function(e,t){h.setRequestHeader(t,e)}),is.isUndefined(a.withCredentials)||(h.withCredentials=!!a.withCredentials),m&&"json"!==m&&(h.responseType=a.responseType),u&&([o,d]=Us(u,!0),h.addEventListener("progress",o)),x&&h.upload&&([l,c]=Us(x),h.upload.addEventListener("progress",l),h.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(n=t=>{h&&(s(!t||t.type?new Is(null,e,h):t),h.abort(),h=null)},a.cancelToken&&a.cancelToken.subscribe(n),a.signal&&(a.signal.aborted?n():a.signal.addEventListener("abort",n)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);b&&-1===Es.protocols.indexOf(b)?s(new ns("Unsupported protocol "+b+":",ns.ERR_BAD_REQUEST,e)):h.send(r||null)})},Ks=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,a=new AbortController;const r=function(e){if(!s){s=!0,n();const t=e instanceof Error?e:this.reason;a.abort(t instanceof ns?t:new Is(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,r(new ns(`timeout ${t} of ms exceeded`,ns.ETIMEDOUT))},t);const n=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:l}=a;return l.unsubscribe=()=>is.asap(n),l}},Ys=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let a,r=0;for(;r<s;)a=r+t,yield e.slice(r,a),r=a},Xs=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},Zs=(e,t,s,a)=>{const r=async function*(e,t){for await(const s of Xs(e))yield*Ys(s,t)}(e,t);let i,n=0,l=e=>{i||(i=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await r.next();if(t)return l(),void e.close();let i=a.byteLength;if(s){let e=n+=i;s(e)}e.enqueue(new Uint8Array(a))}catch(t){throw l(t),t}},cancel:e=>(l(e),r.return())},{highWaterMark:2})},{isFunction:ea}=is,ta=(({Request:e,Response:t})=>({Request:e,Response:t}))(is.global),{ReadableStream:sa,TextEncoder:aa}=is.global,ra=(e,...t)=>{try{return!!e(...t)}catch(s){return!1}},ia=e=>{e=is.merge.call({skipUndefined:!0},ta,e);const{fetch:t,Request:s,Response:a}=e,r=t?ea(t):"function"==typeof fetch,i=ea(s),n=ea(a);if(!r)return!1;const l=r&&ea(sa),o=r&&("function"==typeof aa?(e=>t=>e.encode(t))(new aa):async e=>new Uint8Array(await new s(e).arrayBuffer())),c=i&&l&&ra(()=>{let e=!1;const t=new s(Es.origin,{body:new sa,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=n&&l&&ra(()=>is.isReadableStream(new a("").body)),m={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,s)=>{let a=t&&t[e];if(a)return a.call(t);throw new ns(`Response type '${e}' is not supported`,ns.ERR_NOT_SUPPORT,s)})});const x=async(e,t)=>{const a=is.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(is.isBlob(e))return e.size;if(is.isSpecCompliantForm(e)){const t=new s(Es.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return is.isArrayBufferView(e)||is.isArrayBuffer(e)?e.byteLength:(is.isURLSearchParams(e)&&(e+=""),is.isString(e)?(await o(e)).byteLength:void 0)})(t):a};return async e=>{let{url:r,method:n,data:l,signal:o,cancelToken:u,timeout:p,onDownloadProgress:h,onUploadProgress:f,responseType:b,headers:g,withCredentials:j="same-origin",fetchOptions:v}=Ws(e),y=t||fetch;b=b?(b+"").toLowerCase():"text";let N=Ks([o,u&&u.toAbortSignal()],p),w=null;const C=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let k;try{if(f&&c&&"get"!==n&&"head"!==n&&0!==(k=await x(g,l))){let e,t=new s(r,{method:"POST",body:l,duplex:"half"});if(is.isFormData(l)&&(e=t.headers.get("content-type"))&&g.setContentType(e),t.body){const[e,s]=Bs(k,Us(Ms(f)));l=Zs(t.body,65536,e,s)}}is.isString(j)||(j=j?"include":"omit");const t=i&&"credentials"in s.prototype,o={...v,signal:N,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:l,duplex:"half",credentials:t?j:void 0};w=i&&new s(r,o);let u=await(i?y(w,v):y(r,o));const p=d&&("stream"===b||"response"===b);if(d&&(h||p&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=u[t]});const t=is.toFiniteNumber(u.headers.get("content-length")),[s,r]=h&&Bs(t,Us(Ms(h),!0))||[];u=new a(Zs(u.body,65536,s,()=>{r&&r(),C&&C()}),e)}b=b||"text";let S=await m[is.findKey(m,b)||"text"](u,e);return!p&&C&&C(),await new Promise((t,s)=>{_s(t,s,{data:S,headers:qs.from(u.headers),status:u.status,statusText:u.statusText,config:e,request:w})})}catch(S){if(C&&C(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new ns("Network Error",ns.ERR_NETWORK,e,w),{cause:S.cause||S});throw ns.from(S,S&&S.code,e,w)}}},na=new Map,la=e=>{let t=e&&e.env||{};const{fetch:s,Request:a,Response:r}=t,i=[a,r,s];let n,l,o=i.length,c=na;for(;o--;)n=i[o],l=c.get(n),void 0===l&&c.set(n,l=o?new Map:ia(t)),c=l;return l};la();const oa={http:null,xhr:Qs,fetch:{get:la}};is.forEach(oa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(s){}Object.defineProperty(e,"adapterName",{value:t})}});const ca=e=>`- ${e}`,da=e=>is.isFunction(e)||null===e||!1===e;const ma={getAdapter:function(e,t){e=is.isArray(e)?e:[e];const{length:s}=e;let a,r;const i={};for(let n=0;n<s;n++){let s;if(a=e[n],r=a,!da(a)&&(r=oa[(s=String(a)).toLowerCase()],void 0===r))throw new ns(`Unknown adapter '${s}'`);if(r&&(is.isFunction(r)||(r=r.get(t))))break;i[s||"#"+n]=r}if(!r){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new ns("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(ca).join("\n"):" "+ca(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:oa};function xa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Is(null,e)}function ua(e){xa(e),e.headers=qs.from(e.headers),e.data=Ls.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ma.getAdapter(e.adapter||Ps.adapter,e)(e).then(function(t){return xa(e),t.data=Ls.call(e,e.transformResponse,t),t.headers=qs.from(t.headers),t},function(t){return Fs(t)||(xa(e),t&&t.response&&(t.response.data=Ls.call(e,e.transformResponse,t.response),t.response.headers=qs.from(t.response.headers))),Promise.reject(t)})}const pa="1.13.2",ha={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ha[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const fa={};ha.transitional=function(e,t,s){return(a,r,i)=>{if(!1===e)throw new ns(function(e,t){return"[Axios v"+pa+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}(r," has been removed"+(t?" in "+t:"")),ns.ERR_DEPRECATED);return t&&!fa[r]&&(fa[r]=!0),!e||e(a,r,i)}},ha.spelling=function(e){return(e,t)=>!0};const ba={assertOptions:function(e,t,s){if("object"!=typeof e)throw new ns("options must be an object",ns.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const i=a[r],n=t[i];if(n){const t=e[i],s=void 0===t||n(t,i,e);if(!0!==s)throw new ns("option "+i+" must be "+s,ns.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new ns("Unknown option "+i,ns.ERR_BAD_OPTION)}},validators:ha},ga=ba.validators;let ja=class{constructor(e){this.defaults=e||{},this.interceptors={request:new js,response:new js}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(a){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Js(this.defaults,t);const{transitional:s,paramsSerializer:a,headers:r}=t;void 0!==s&&ba.assertOptions(s,{silentJSONParsing:ga.transitional(ga.boolean),forcedJSONParsing:ga.transitional(ga.boolean),clarifyTimeoutError:ga.transitional(ga.boolean)},!1),null!=a&&(is.isFunction(a)?t.paramsSerializer={serialize:a}:ba.assertOptions(a,{encode:ga.function,serialize:ga.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ba.assertOptions(t,{baseUrl:ga.spelling("baseURL"),withXsrfToken:ga.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&is.merge(r.common,r[t.method]);r&&is.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=qs.concat(i,r);const n=[];let l=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,n.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,m=0;if(!l){const e=[ua.bind(this),void 0];for(e.unshift(...n),e.push(...o),d=e.length,c=Promise.resolve(t);m<d;)c=c.then(e[m++],e[m++]);return c}d=n.length;let x=t;for(;m<d;){const e=n[m++],t=n[m++];try{x=e(x)}catch(u){t.call(this,u);break}}try{c=ua.call(this,x)}catch(u){return Promise.reject(u)}for(m=0,d=o.length;m<d;)c=c.then(o[m++],o[m++]);return c}getUri(e){return gs(Gs((e=Js(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};is.forEach(["delete","get","head","options"],function(e){ja.prototype[e]=function(t,s){return this.request(Js(s||{},{method:e,url:t,data:(s||{}).data}))}}),is.forEach(["post","put","patch"],function(e){function t(t){return function(s,a,r){return this.request(Js(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ja.prototype[e]=t(),ja.prototype[e+"Form"]=t(!0)});const va={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(va).forEach(([e,t])=>{va[t]=e});const ya=function e(t){const s=new ja(t),a=bt(ja.prototype.request,s);return is.extend(a,ja.prototype,s,{allOwnKeys:!0}),is.extend(a,s,null,{allOwnKeys:!0}),a.create=function(s){return e(Js(t,s))},a}(Ps);ya.Axios=ja,ya.CanceledError=Is,ya.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{s.subscribe(e),t=e}).then(e);return a.cancel=function(){s.unsubscribe(t)},a},e(function(e,a,r){s.reason||(s.reason=new Is(e,a,r),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},ya.isCancel=Fs,ya.VERSION=pa,ya.toFormData=us,ya.AxiosError=ns,ya.Cancel=ya.CanceledError,ya.all=function(e){return Promise.all(e)},ya.spread=function(e){return function(t){return e.apply(null,t)}},ya.isAxiosError=function(e){return is.isObject(e)&&!0===e.isAxiosError},ya.mergeConfig=Js,ya.AxiosHeaders=qs,ya.formToJSON=e=>As(is.isHTMLForm(e)?new FormData(e):e),ya.getAdapter=ma.getAdapter,ya.HttpStatusCode=va,ya.default=ya;const{Axios:Na,AxiosError:wa,CanceledError:Ca,isCancel:ka,CancelToken:Sa,VERSION:Ea,all:Aa,Cancel:Pa,isAxiosError:Ra,spread:za,toFormData:Da,AxiosHeaders:Ta,HttpStatusCode:Oa,formToJSON:qa,getAdapter:La,mergeConfig:Fa}=ya,Ia="https://prescrimed.up.railway.app",_a=()=>{if(window.location.hostname.includes("railway.app"))return"";return window.location.hostname.includes("github.io")?Ia:"http://localhost:8000"},Ua=(()=>{if(window.location.hostname.includes("railway.app"))return"/api";return window.location.hostname.includes("github.io")?`${Ia}/api`:"http://localhost:8000/api"})(),Ba=ya.create({baseURL:Ua,headers:{"Content-Type":"application/json"}});Ba.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),Ba.interceptors.response.use(e=>e,async e=>{var t,s,a,r,i,n,l,o;const c=e.config;if(!e.response){const t=_a(),s=`Não foi possível conectar ao servidor. Verifique se o backend está acessível em ${t?`${t}`:"seu backend/configurações de ambiente"} e se as variáveis de ambiente do frontend estão configuradas.`;return window.showToast&&window.showToast(s,"error"),Promise.reject({message:s,originalError:e,isNetworkError:!0})}if(401===(null==(t=e.response)?void 0:t.status)&&!c._retry){if((null==(s=c.url)?void 0:s.includes("/auth/refresh"))||(null==(a=c.url)?void 0:a.includes("/auth/login")))return localStorage.clear(),window&&window.location&&!window.location.hash.includes("#/login")&&(window.location.hash="#/login"),Promise.reject({message:"Sessão expirada. Faça login novamente."});c._retry=!0;try{const e=localStorage.getItem("token"),t=localStorage.getItem("refreshToken");if(!e&&!t)return localStorage.clear(),window&&window.location&&!window.location.hash.includes("#/login")&&(window.location.hash="#/login"),Promise.reject({message:"Sessão expirada. Faça login novamente."});const s=await Ba.post("/auth/refresh",{refreshToken:t||e}),{token:a}=s.data;return localStorage.setItem("token",a),s.data.user&&localStorage.setItem("user",JSON.stringify(s.data.user)),c.headers.Authorization=`Bearer ${a}`,Ba(c)}catch(d){return localStorage.clear(),window&&window.location&&!window.location.hash.includes("#/login")&&(window.location.hash="#/login"),Promise.reject({message:"Sessão expirada. Faça login novamente.",originalError:d})}}if(404===(null==(r=e.response)?void 0:r.status)||null==(i=e.response)||i.status,(null==(n=e.response)?void 0:n.status)>=500){const t=e.response.status,s=null==(o=null==(l=e.response)?void 0:l.data)?void 0:o.error,a=503===t?s||"Serviço temporariamente indisponível. Tente novamente em instantes.":s||"Erro interno no servidor. Tente novamente em instantes.";window.showToast&&window.showToast(a,"error")}return Promise.reject(e)});const Ma=async(e,t,s,a={})=>(await Ba.request({method:e,url:t,data:s,...a})).data,$a=(e={})=>{const t=new URLSearchParams;Object.entries(e).forEach(([e,s])=>{null!=s&&""!==s&&(Array.isArray(s)?s.forEach(s=>t.append(e,s)):t.append(e,s))});const s=t.toString();return s?`?${s}`:""},Va=(e,t)=>Ma("get",e,void 0,t),Ga=(e,t,s)=>Ma("post",e,t,s),Ha=(e,t,s)=>Ma("put",e,t,s),Ja=(e,t)=>Ma("delete",e,void 0,t),Wa=async e=>Ga("/auth/register",e),Qa=async(e,t)=>{const s=await Ga("/auth/login",{email:e,senha:t});return s.token&&(localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user))),s},Ka=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},Ya=()=>{try{const e=localStorage.getItem("user");return e&&"undefined"!==e?JSON.parse(e):null}catch(e){return localStorage.removeItem("user"),null}},Xa=()=>{const e=Ya(),t=localStorage.getItem("token");return e&&t?e:(localStorage.removeItem("user"),localStorage.removeItem("token"),null)},Za=(er=e=>({user:Xa(),token:localStorage.getItem("token"),isAuthenticated:!!Xa(),login:async(t,s)=>{const a=await Qa(t,s);e({user:a.user,token:a.token,isAuthenticated:!0})},logout:()=>{Ka(),e({user:null,token:null,isAuthenticated:!1})},hasPermission:e=>{var t;const s=Za.getState();return!!s.user&&("admin"===s.user.role||"superadmin"===s.user.role||(null==(t=s.user.permissoes)?void 0:t.includes(e))||!1)}}))?ft(er):ft;var er;function tr(){return _e.jsxs(_e.Fragment,{children:[_e.jsx("div",{className:"absolute inset-0 bg-[url('/pattern.svg')] opacity-20 bg-cover bg-center mix-blend-overlay","aria-hidden":"true"}),_e.jsx("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center mix-blend-overlay",style:{backgroundImage:"url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')"},"aria-hidden":"true"}),_e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary-900/50 to-transparent","aria-hidden":"true"})]})}const sr={create:{m:"criado",f:"criada"},update:{m:"atualizado",f:"atualizada"},delete:{m:"excluído",f:"excluída"}},ar={create:"criar",update:"atualizar",delete:"excluir",load:"carregar",save:"salvar",cancel:"cancelar",login:"fazer login",register:"realizar cadastro"},rr={accessDenied:"Acesso negado",passwordMismatch:"As senhas não coincidem",minPassword:"Senha deve ter no mínimo 6 caracteres",cannotDeleteSelf:"Você não pode excluir seu próprio usuário"},ir=(e,t,{gender:s="m",suffix:a=""}={})=>{var r,i;return`${t} ${(null==(r=sr[e])?void 0:r[s])||(null==(i=sr[e])?void 0:i.m)||""} com sucesso${a}`},nr=(e,t)=>`Erro ao ${ar[e]||e} ${t}`,lr=e=>rr[e]||e,or=(e,t)=>{var s,a,r,i;return(null==(a=null==(s=null==e?void 0:e.response)?void 0:s.data)?void 0:a.message)||(null==(i=null==(r=null==e?void 0:e.response)?void 0:r.data)?void 0:i.error)||t};function cr(){const t=r(),s=Za(e=>e.login),[a,n]=e.useState({email:"",senha:""}),[l,o]=e.useState(!1),c=e=>{n({...a,[e.target.name]:e.target.value})};return _e.jsxs("div",{className:"min-h-screen flex bg-white",children:[_e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary-600 to-primary-800 relative overflow-hidden text-white p-12 flex-col justify-between items-center text-center",children:[_e.jsx(tr,{}),_e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[_e.jsxs("div",{className:"flex items-center gap-3 text-2xl font-bold mb-2",children:[_e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:_e.jsx(x,{size:24})}),"Prescrimed"]}),_e.jsx("p",{className:"text-primary-100",children:"Sistema de Gestão de Prescrições"})]}),_e.jsxs("div",{className:"relative z-10 max-w-md",children:[_e.jsx("h2",{className:"text-4xl font-bold mb-6 leading-tight",children:"Simplifique a gestão de prescrições da sua clínica."}),_e.jsx("p",{className:"text-primary-100 text-lg leading-relaxed mb-8",children:"Segurança, agilidade e conformidade em um único lugar. Desenvolvido especialmente para Instituições de Longa Permanência e Clínicas."}),_e.jsxs("div",{className:"flex gap-4 justify-center",children:[_e.jsx("div",{className:"flex -space-x-4",children:[1,2,3,4].map(e=>_e.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-primary-700 bg-primary-800 flex items-center justify-center text-xs font-bold",children:e},e))}),_e.jsxs("div",{className:"flex flex-col justify-center text-left",children:[_e.jsx("span",{className:"font-bold",children:"Mais de 500+"}),_e.jsx("span",{className:"text-xs text-primary-200",children:"Profissionais confiam"})]})]})]}),_e.jsx("div",{className:"relative z-10 text-sm text-primary-200",children:"© 2025 Prescrimed System. Todos os direitos reservados."})]}),_e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12 bg-slate-50",children:_e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[_e.jsxs("div",{className:"text-center lg:text-left",children:[_e.jsx("div",{className:"lg:hidden flex justify-center mb-6",children:_e.jsx("div",{className:"w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center text-white",children:_e.jsx(x,{size:24})})}),_e.jsx("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Bem-vindo de volta"}),_e.jsx("p",{className:"text-slate-500 mt-2",children:"Acesse sua conta para gerenciar prescrições e pacientes."})]}),_e.jsxs("form",{onSubmit:async e=>{var r,i;e.preventDefault(),o(!0);try{await s(a.email,a.senha),f.success("Login realizado com sucesso!"),t("/dashboard")}catch(n){n.isNetworkError||!n.response?f.error("Não foi possível conectar ao servidor. Verifique sua conexão ou tente novamente mais tarde."):401===(null==(r=n.response)?void 0:r.status)?f.error("Email ou senha incorretos. Verifique suas credenciais e tente novamente."):403===(null==(i=n.response)?void 0:i.status)?f.error("Usuário inativo. Entre em contato com o administrador."):f.error(or(n,"Erro ao fazer login. Tente novamente."))}finally{o(!1)}},className:"space-y-6 bg-white p-8 rounded-2xl shadow-sm border border-slate-100",children:[_e.jsxs("div",{className:"space-y-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Email Profissional"}),_e.jsxs("div",{className:"relative",children:[_e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:_e.jsx(u,{size:20})}),_e.jsx("input",{type:"email",name:"email",value:a.email,onChange:c,className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"nome@clinica.com",required:!0})]})]}),_e.jsxs("div",{children:[_e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Senha"}),_e.jsx("a",{href:"#",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"Esqueceu a senha?"})]}),_e.jsxs("div",{className:"relative",children:[_e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:_e.jsx(p,{size:20})}),_e.jsx("input",{type:"password",name:"senha",value:a.senha,onChange:c,className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"••••••••",required:!0})]})]})]}),_e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg shadow-primary-600/20 hover:shadow-primary-600/30 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:l?_e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):_e.jsxs(_e.Fragment,{children:[_e.jsx("span",{children:"Entrar no Sistema"}),_e.jsx(h,{size:18})]})}),_e.jsxs("div",{className:"relative",children:[_e.jsx("div",{className:"absolute inset-0 flex items-center",children:_e.jsx("div",{className:"w-full border-t border-slate-200"})}),_e.jsx("div",{className:"relative flex justify-center text-sm",children:_e.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Não tem uma conta?"})})]}),_e.jsx(i,{to:"/register",className:"w-full bg-white border border-slate-200 text-slate-700 font-semibold py-3.5 rounded-xl hover:bg-slate-50 transition-all duration-200 flex items-center justify-center gap-2",children:"Criar conta da clínica"})]}),_e.jsx("p",{className:"text-center text-xs text-slate-400",children:"Protegido por reCAPTCHA e sujeito à Política de Privacidade e Termos de Serviço do Google."})]})})]})}function dr(){const t=r(),[s,a]=e.useState({tipoSistema:"casa-repouso",nomeEmpresa:"",cnpj:"",nomeUsuario:"",email:"",senha:"",confirmarSenha:"",cpf:"",contato:""}),[n,l]=e.useState(!1),o=[{title:"Cadastro guiado",description:"Organizamos os campos para você concluir o registro em poucos minutos.",icon:b},{title:"Informações seguras",description:"Seus dados ficam protegidos com padrões de segurança usados na saúde.",icon:g},{title:"Tudo em um só lugar",description:"Centralize empresas, usuários e prescrições em uma única plataforma.",icon:j}],c=e=>{a({...s,[e.target.name]:e.target.value})};return _e.jsxs("div",{className:"min-h-screen flex bg-white",children:[_e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary-600 to-primary-800 relative overflow-hidden text-white p-12 flex-col justify-between items-center text-center",children:[_e.jsx(tr,{}),_e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[_e.jsxs("div",{className:"flex items-center gap-3 text-2xl font-bold mb-2",children:[_e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:_e.jsx(x,{size:24})}),"Prescrimed"]}),_e.jsx("p",{className:"text-primary-100",children:"Onboarding & Setup"})]}),_e.jsxs("div",{className:"relative z-10 max-w-md",children:[_e.jsx("h2",{className:"text-4xl font-bold mb-6 leading-tight",children:"Comece a transformar sua gestão clínica hoje."}),_e.jsx("div",{className:"space-y-6 text-left",children:o.map(({title:e,description:t,icon:s})=>_e.jsxs("div",{className:"flex gap-4 items-start",children:[_e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 flex items-center justify-center shrink-0",children:_e.jsx(s,{size:22,className:"text-white"})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-semibold text-white text-lg",children:e}),_e.jsx("p",{className:"text-primary-100 leading-relaxed",children:t})]})]},e))})]}),_e.jsx("div",{className:"relative z-10 text-sm text-primary-200",children:"© 2025 Prescrimed System. Todos os direitos reservados."})]}),_e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 md:p-12 bg-slate-50 overflow-y-auto",children:_e.jsxs("div",{className:"w-full max-w-xl space-y-8",children:[_e.jsxs("div",{className:"text-center lg:text-left",children:[_e.jsx("div",{className:"lg:hidden flex justify-center mb-6",children:_e.jsx("div",{className:"w-12 h-12 bg-primary-600 rounded-xl flex items-center justify-center text-white",children:_e.jsx(x,{size:24})})}),_e.jsx("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Criar nova conta"}),_e.jsx("p",{className:"text-slate-500 mt-2",children:"Preencha os dados da sua empresa e do administrador."})]}),_e.jsxs("form",{onSubmit:async e=>{var a,r;if(e.preventDefault(),s.senha===s.confirmarSenha){l(!0);try{await Wa({tipoSistema:s.tipoSistema,nomeEmpresa:s.nomeEmpresa,cnpj:s.cnpj,nomeAdmin:s.nomeUsuario,email:s.email,senha:s.senha,cpf:s.cpf,contato:s.contato}),f.success("Cadastro realizado com sucesso! Faça login para continuar."),t("/login")}catch(i){const e=(null==(r=null==(a=null==i?void 0:i.response)?void 0:a.data)?void 0:r.error)||nr("register","conta");f.error(e)}finally{l(!1)}}else f.error(lr("passwordMismatch"))},className:"space-y-6",children:[_e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 space-y-4",children:[_e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4 mb-4",children:[_e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center",children:_e.jsx(j,{size:18})}),_e.jsxs("div",{children:[_e.jsx("h3",{className:"font-semibold text-slate-900",children:"Tipo de Sistema"}),_e.jsx("p",{className:"text-xs text-slate-500",children:"Selecione o tipo de estabelecimento"})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_e.jsx("button",{type:"button",onClick:()=>a({...s,tipoSistema:"casa-repouso"}),className:"p-5 rounded-xl border-2 transition-all duration-200 "+("casa-repouso"===s.tipoSistema?"border-primary-500 bg-primary-50 shadow-md":"border-slate-200 bg-white hover:border-slate-300"),children:_e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[_e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center "+("casa-repouso"===s.tipoSistema?"bg-primary-600 text-white":"bg-slate-100 text-slate-600"),children:_e.jsx(v,{size:28})}),_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-semibold "+("casa-repouso"===s.tipoSistema?"text-primary-700":"text-slate-900"),children:"Casa de Repouso"}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Gestão de residentes e cuidados"})]})]})}),_e.jsx("button",{type:"button",onClick:()=>a({...s,tipoSistema:"fisioterapia"}),className:"p-5 rounded-xl border-2 transition-all duration-200 "+("fisioterapia"===s.tipoSistema?"border-rose-500 bg-rose-50 shadow-md":"border-slate-200 bg-white hover:border-slate-300"),children:_e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[_e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center "+("fisioterapia"===s.tipoSistema?"bg-rose-600 text-white":"bg-slate-100 text-slate-600"),children:_e.jsx(y,{size:28})}),_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-semibold "+("fisioterapia"===s.tipoSistema?"text-rose-700":"text-slate-900"),children:"Clínica de Fisioterapia"}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Gestão de sessões e evoluções"})]})]})}),_e.jsx("button",{type:"button",onClick:()=>a({...s,tipoSistema:"petshop"}),className:"p-5 rounded-xl border-2 transition-all duration-200 "+("petshop"===s.tipoSistema?"border-emerald-500 bg-emerald-50 shadow-md":"border-slate-200 bg-white hover:border-slate-300"),children:_e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[_e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center "+("petshop"===s.tipoSistema?"bg-emerald-600 text-white":"bg-slate-100 text-slate-600"),children:_e.jsx(N,{size:28})}),_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-semibold "+("petshop"===s.tipoSistema?"text-emerald-700":"text-slate-900"),children:"Petshop / Veterinária"}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Gestão de pets e atendimentos"})]})]})})]})]}),_e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 space-y-4",children:[_e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4 mb-4",children:[_e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 text-primary-600 flex items-center justify-center",children:_e.jsx(x,{size:18})}),_e.jsxs("div",{children:[_e.jsx("h3",{className:"font-semibold text-slate-900",children:"Dados da Empresa"}),_e.jsx("p",{className:"text-xs text-slate-500",children:"casa-repouso"===s.tipoSistema?"Informações da casa de repouso":"petshop"===s.tipoSistema?"Informações do petshop/clínica veterinária":"Informações da clínica de fisioterapia"})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Nome da Empresa *"}),_e.jsx("input",{type:"text",name:"nomeEmpresa",value:s.nomeEmpresa,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"casa-repouso"===s.tipoSistema?"Ex.: Casa de Repouso Vida":"petshop"===s.tipoSistema?"Ex.: Petshop Amigo Fiel":"Ex.: Clínica Fisio Movimento",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"CNPJ *"}),_e.jsx("input",{type:"text",name:"cnpj",value:s.cnpj,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"00.000.000/0000-00",required:!0})]})]})]}),_e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 space-y-4",children:[_e.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-100 pb-4 mb-4",children:[_e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 text-emerald-600 flex items-center justify-center",children:_e.jsx(b,{size:18})}),_e.jsxs("div",{children:[_e.jsx("h3",{className:"font-semibold text-slate-900",children:"Administrador"}),_e.jsx("p",{className:"text-xs text-slate-500",children:"Dados do responsável"})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Nome Completo *"}),_e.jsx("input",{type:"text",name:"nomeUsuario",value:s.nomeUsuario,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Nome e sobrenome",required:!0})]}),_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"E-mail *"}),_e.jsx("input",{type:"email",name:"email",value:s.email,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"seu@email.com",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"CPF *"}),_e.jsx("input",{type:"text",name:"cpf",value:s.cpf,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"000.000.000-00",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Contato *"}),_e.jsx("input",{type:"text",name:"contato",value:s.contato,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"(00) 00000-0000",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Senha *"}),_e.jsx("input",{type:"password",name:"senha",value:s.senha,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Mínimo 6 caracteres",minLength:6,required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Confirmar Senha *"}),_e.jsx("input",{type:"password",name:"confirmarSenha",value:s.confirmarSenha,onChange:c,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Repita a senha",minLength:6,required:!0})]})]})]}),_e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 rounded-xl transition-all duration-200 shadow-lg shadow-primary-600/20 hover:shadow-primary-600/30 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:n?"Processando cadastro...":"Finalizar Cadastro"}),_e.jsxs("p",{className:"text-center text-sm text-slate-600",children:["Já possui uma conta?"," ",_e.jsx(i,{to:"/login",className:"text-primary-600 font-semibold hover:text-primary-700",children:"Fazer login"})]})]})]})})]})}const mr=async(e,t,s)=>{const a=$a({dataInicio:e,dataFim:t,empresaId:s});return Va(`/dashboard/stats${a}`)},xr=async e=>{const t=$a({empresaId:e});return Va(`/dashboard/prescricoes-recentes${t}`)},ur=async e=>{const t=$a({empresaId:e});return Va(`/dashboard/pacientes-recentes${t}`)},pr=async e=>{const t=$a({empresaId:e});return Va(`/dashboard/next-steps${t}`)},hr=async e=>{const t=$a({empresaId:e});return Va(`/dashboard/alerts${t}`)};function fr({data:e,color:t="#2563eb",height:s=200}){if(!e||0===e.length)return null;const a=Math.max(...e.map(e=>e.count)),r=a-0||1,i=e.map((t,s)=>`${s/(e.length-1)*100},${100-(t.count-0)/r*80}`).join(" "),n=`${i} 100,100 0,100`;return _e.jsx("div",{className:"w-full",style:{height:`${s}px`},children:_e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[_e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[_e.jsx("line",{x1:"0",y1:"20",x2:"100",y2:"20",stroke:"#e2e8f0",strokeWidth:"0.5",strokeDasharray:"2"}),_e.jsx("line",{x1:"0",y1:"60",x2:"100",y2:"60",stroke:"#e2e8f0",strokeWidth:"0.5",strokeDasharray:"2"}),_e.jsx("line",{x1:"0",y1:"100",x2:"100",y2:"100",stroke:"#e2e8f0",strokeWidth:"0.5"}),_e.jsx("path",{d:`M${n}Z`,fill:t,fillOpacity:"0.1",stroke:"none"}),_e.jsx("polyline",{fill:"none",stroke:t,strokeWidth:"2",points:i,vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"}),e.map((s,a)=>{const i=a/(e.length-1)*100,n=100-(s.count-0)/r*80;return _e.jsx("circle",{cx:i,cy:n,r:"1.5",fill:"white",stroke:t,strokeWidth:"1",vectorEffect:"non-scaling-stroke",className:"opacity-0 hover:opacity-100 transition-opacity cursor-pointer",children:_e.jsx("title",{children:`${new Date(s.date).toLocaleDateString("pt-BR")}: ${s.count} prescrições`})},a)})]}),_e.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-between text-[10px] text-slate-400 pointer-events-none translate-y-4",children:[_e.jsx("span",{children:new Date(e[0].date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),_e.jsx("span",{children:new Date(e[Math.floor(e.length/2)].date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),_e.jsx("span",{children:new Date(e[e.length-1].date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]})]})})}function br({title:e,subtitle:t,label:s,children:a}){return _e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[_e.jsxs("div",{className:"space-y-3",children:[s&&_e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:s}),_e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900",children:e}),t&&_e.jsx("p",{className:"text-slate-500 text-sm max-w-2xl",children:t})]}),_e.jsx("div",{className:"flex flex-col sm:flex-row w-full lg:w-auto gap-2 sm:gap-3",children:a})]})}function gr({icon:e,label:t,value:s,description:a,color:r="primary"}){const i={primary:{border:"border-primary-500",bg:"bg-primary-50",text:"text-primary-600"},emerald:{border:"border-emerald-500",bg:"bg-emerald-50",text:"text-emerald-600"},red:{border:"border-red-500",bg:"bg-red-50",text:"text-red-600"},purple:{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-600"},orange:{border:"border-orange-500",bg:"bg-orange-50",text:"text-orange-600"},blue:{border:"border-blue-500",bg:"bg-blue-50",text:"text-blue-600"}},n=i[r]||i.primary;return _e.jsxs("div",{className:`card p-6 border-l-4 ${n.border}`,children:[_e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_e.jsx("div",{className:`p-3 ${n.bg} rounded-xl`,children:_e.jsx(e,{className:n.text,size:24})}),_e.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:t})]}),_e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:s}),a&&_e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:a})]})}function jr(){var t,s,a,i,n,l,o,c,d,m,u,p,h,b,g,j,v,y,N;const[F,I]=e.useState(null),[_,U]=e.useState([]),[B,M]=e.useState([]),[$,V]=e.useState([]),[G,H]=e.useState([]),[J,W]=e.useState([]),[Q,K]=e.useState(!0),[Y,X]=e.useState(null),Z=r(),{user:ee}=Za();e.useEffect(()=>{te();const e=setInterval(()=>{te()},3e4);return()=>clearInterval(e)},[]);const te=async()=>{var e;Q||K(!0);try{const t=null==ee?void 0:ee.empresaId,[s,a,r,i,n]=await Promise.all([mr(void 0,void 0,t),xr(t),ur(t),pr(t),hr(t)]);if(I((null==s?void 0:s.stats)||s),U((null==a?void 0:a.prescricoes)||[]),M((null==r?void 0:r.pacientes)||[]),V((null==i?void 0:i.nextSteps)||[]),H((null==n?void 0:n.alerts)||[]),null==(e=null==s?void 0:s.stats)?void 0:e.graficoPrescricoes){const e=s.stats.graficoPrescricoes.map(e=>({date:new Date(e.data).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}),value:e.total}));W(e)}X(new Date)}catch(t){f.error(nr("load","dados do dashboard"))}finally{K(!1)}};if(Q)return _e.jsx("div",{className:"flex items-center justify-center h-full",children:_e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});null==F||F.totalPacientes,null==F||F.totalPrescricoes,null==F||F.totalUsuarios,null==F||F.prescricoesPeriodo;const se={critical:"bg-rose-50 text-rose-700 border-rose-200",warning:"bg-amber-50 text-amber-700 border-amber-200",info:"bg-primary-50 text-primary-700 border-primary-200"},ae=[{label:"Dashboard",path:"/dashboard",icon:S,accent:"from-primary-500 to-primary-600"},{label:"Agenda",path:"/agenda",icon:P,accent:"from-emerald-500 to-emerald-600"},{label:"Cronograma",path:"/cronograma",icon:R,accent:"from-orange-500 to-amber-500"},{label:"Prescrições",path:"/prescricoes",icon:C,accent:"from-purple-500 to-purple-600"},{label:"Censo M.P.",path:"/censo-mp",icon:z,accent:"from-sky-500 to-sky-600"},{label:"Pacientes",path:"/residentes",icon:w,accent:"from-amber-500 to-orange-500"},{label:"Estoque",path:"/estoque",icon:D,accent:"from-blue-500 to-indigo-500"},{label:"Evolução",path:"/evolucao",icon:T,accent:"from-teal-500 to-emerald-500"},{label:"Financeiro",path:"/financeiro",icon:O,accent:"from-lime-500 to-green-500"},{label:"Usuários",path:"/usuarios",icon:k,accent:"from-fuchsia-500 to-purple-600"},{label:"Empresas",path:"/empresas",icon:x,accent:"from-cyan-500 to-blue-500"},{label:"Configurações",path:"/configuracoes",icon:q,accent:"from-slate-500 to-slate-700"}];return _e.jsxs("div",{className:"space-y-8",children:[_e.jsxs(br,{label:"Visão Geral",title:"Dashboard",subtitle:"Acompanhe em tempo real pacientes, prescrições e equipes para manter a operação segura e eficiente."+(Y?" Atualizado "+Y.toLocaleTimeString("pt-BR"):""),children:[_e.jsxs("button",{onClick:async()=>{await te(),f.success("Dados atualizados com sucesso!")},className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar dados"]}),_e.jsxs("button",{onClick:()=>{f.promise(new Promise(e=>setTimeout(e,2e3)),{loading:"Gerando relatório...",success:"Relatório enviado para seu e-mail!",error:"Erro ao gerar relatório"})},className:"btn btn-primary flex items-center justify-center gap-2",children:[_e.jsx(A,{size:18})," Exportar relatório"]})]}),("superadmin"===(null==ee?void 0:ee.role)||ee&&"superadmin@prescrimed.com"===ee.email)&&_e.jsxs("div",{className:"card border border-slate-100 shadow-sm",children:[_e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Acesso rápido"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Módulos do sistema"}),_e.jsx("p",{className:"text-sm text-slate-500",children:"Clique para abrir qualquer módulo com acesso total."})]}),_e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-primary-50 text-primary-700 border border-primary-100",children:"SuperAdmin"})]}),_e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:ae.map(e=>{const t=e.icon;return _e.jsxs("button",{onClick:()=>Z(e.path),className:"group w-full text-left p-4 rounded-2xl border border-slate-100 bg-white hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",children:[_e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${e.accent} text-white flex items-center justify-center mb-3 shadow-sm`,children:_e.jsx(t,{size:20})}),_e.jsx("p",{className:"font-semibold text-slate-900 leading-snug",children:e.label}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1 group-hover:text-slate-700",children:"Acesso direto"})]},e.path)})})]}),_e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_e.jsx(z,{className:"text-primary-600",size:24}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Próximos passos"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Controle operacional"})]})]}),_e.jsx("div",{className:"space-y-4",children:$.length>0?$.map(e=>_e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100 bg-slate-50",children:[_e.jsx("h3",{className:"font-semibold text-slate-900",children:e.title}),_e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e.description}),_e.jsx("button",{onClick:()=>e.ctaRoute&&Z(e.ctaRoute),className:"text-primary-600 text-sm font-semibold mt-3 hover:underline",children:e.ctaLabel})]},e.id)):_e.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma pendência encontrada."})})]}),_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_e.jsx(L,{className:"text-amber-600",size:24}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Alertas críticos"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Atenção imediata"})]})]}),_e.jsx("div",{className:"space-y-4",children:G.length>0?G.map(e=>_e.jsxs("div",{className:`p-4 rounded-2xl border ${se[e.severity]||"bg-slate-50 text-slate-700 border-slate-200"}`,children:[_e.jsx("h3",{className:"font-semibold",children:e.title}),_e.jsx("p",{className:"text-sm opacity-80 mt-1",children:e.detail})]},e.id)):_e.jsx("p",{className:"text-sm text-slate-500",children:"Nenhum alerta crítico no momento."})})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:w,label:"Pacientes",value:(null==F?void 0:F.totalPacientes)||0,description:`${(null==(t=null==F?void 0:F.leitos)?void 0:t.ocupados)||0} leitos ocupados`,color:"primary"}),_e.jsx(gr,{icon:C,label:"Prescrições",value:(null==F?void 0:F.totalPrescricoes)||0,description:`${(null==F?void 0:F.prescrioesAtivas)||0} ativas`,color:"emerald"}),_e.jsx(gr,{icon:k,label:"Equipe",value:(null==F?void 0:F.totalUsuarios)||0,description:"Profissionais ativos",color:"purple"}),_e.jsx(gr,{icon:P,label:"Agendamentos",value:(null==F?void 0:F.agendamentosHoje)||0,description:"Para hoje",color:"amber"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_e.jsxs("div",{className:"card bg-gradient-to-br from-sky-50 to-blue-50 border-sky-200",children:[_e.jsx("div",{className:"flex items-center justify-between mb-4",children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-3 bg-sky-100 rounded-xl",children:_e.jsx(x,{className:"text-sky-700",size:24})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-wider text-sky-600 font-semibold",children:"Leitos"}),_e.jsx("h3",{className:"text-2xl font-bold text-sky-900",children:(null==(s=null==F?void 0:F.leitos)?void 0:s.total)||0})]})]})}),_e.jsxs("div",{className:"space-y-2",children:[_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-sky-700",children:"Ocupados"}),_e.jsx("span",{className:"font-semibold text-sky-900",children:(null==(a=null==F?void 0:F.leitos)?void 0:a.ocupados)||0})]}),_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-sky-700",children:"Disponíveis"}),_e.jsx("span",{className:"font-semibold text-emerald-700",children:(null==(i=null==F?void 0:F.leitos)?void 0:i.disponiveis)||0})]}),_e.jsx("div",{className:"mt-3 w-full bg-sky-200 rounded-full h-2 overflow-hidden",children:_e.jsx("div",{className:"bg-sky-600 h-full rounded-full transition-all",style:{width:((null==(n=null==F?void 0:F.leitos)?void 0:n.total)>0?(null==(l=null==F?void 0:F.leitos)?void 0:l.ocupados)/(null==(o=null==F?void 0:F.leitos)?void 0:o.total)*100:0)+"%"}})}),_e.jsxs("p",{className:"text-xs text-sky-600 text-center",children:[(null==(c=null==F?void 0:F.leitos)?void 0:c.total)>0?Math.round((null==(d=null==F?void 0:F.leitos)?void 0:d.ocupados)/(null==(m=null==F?void 0:F.leitos)?void 0:m.total)*100):0,"% de ocupação"]})]})]}),_e.jsxs("div",{className:"card bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",children:[_e.jsx("div",{className:"flex items-center justify-between mb-4",children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:_e.jsx(D,{className:"text-orange-700",size:24})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-wider text-orange-600 font-semibold",children:"Estoque"}),_e.jsx("h3",{className:"text-2xl font-bold text-orange-900",children:(null==(u=null==F?void 0:F.estoque)?void 0:u.total)||0})]})]})}),_e.jsxs("div",{className:"space-y-2",children:[_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-orange-700",children:"Itens cadastrados"}),_e.jsx("span",{className:"font-semibold text-orange-900",children:(null==(p=null==F?void 0:F.estoque)?void 0:p.total)||0})]}),_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-orange-700",children:"Abaixo do mínimo"}),_e.jsx("span",{className:"font-semibold text-red-700",children:(null==(h=null==F?void 0:F.estoque)?void 0:h.abaixoMinimo)||0})]}),(null==(b=null==F?void 0:F.estoque)?void 0:b.abaixoMinimo)>0&&_e.jsx("div",{className:"mt-3 p-2 bg-red-100 border border-red-200 rounded-lg",children:_e.jsxs("p",{className:"text-xs text-red-700 font-semibold flex items-center gap-1",children:[_e.jsx(L,{size:14}),"Atenção ao estoque!"]})})]})]}),_e.jsxs("div",{className:"card bg-gradient-to-br from-emerald-50 to-green-50 border-emerald-200",children:[_e.jsx("div",{className:"flex items-center justify-between mb-4",children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-3 bg-emerald-100 rounded-xl",children:_e.jsx(O,{className:"text-emerald-700",size:24})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-wider text-emerald-600 font-semibold",children:"Saldo"}),_e.jsxs("h3",{className:"text-2xl font-bold text-emerald-900",children:["R$ ",((null==(g=null==F?void 0:F.financeiro)?void 0:g.saldo)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),_e.jsxs("div",{className:"space-y-2",children:[_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-emerald-700",children:"Receitas"}),_e.jsxs("span",{className:"font-semibold text-emerald-900",children:["R$ ",((null==(j=null==F?void 0:F.financeiro)?void 0:j.receitasPagas)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),_e.jsxs("div",{className:"flex justify-between items-center",children:[_e.jsx("span",{className:"text-sm text-emerald-700",children:"Despesas"}),_e.jsxs("span",{className:"font-semibold text-red-700",children:["R$ ",((null==(v=null==F?void 0:F.financeiro)?void 0:v.despesasPagas)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),_e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-emerald-200",children:[_e.jsx("span",{className:"text-sm text-emerald-700 font-semibold",children:"Pendentes"}),_e.jsxs("span",{className:"text-xs text-amber-700",children:["R$ ",(((null==(y=null==F?void 0:F.financeiro)?void 0:y.receitasPendentes)||0)+((null==(N=null==F?void 0:F.financeiro)?void 0:N.despesasPendentes)||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),_e.jsxs("div",{className:"card p-6",children:[_e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx(T,{className:"text-primary-600",size:24}),_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Análise"}),_e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Evolução de Prescrições"})]})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx(P,{className:"text-slate-400",size:16}),_e.jsx("span",{className:"text-sm text-slate-600",children:"Últimos 30 dias"})]})]}),_e.jsx("div",{className:"h-64 w-full",children:J.length>0?_e.jsx(fr,{data:J,color:"#2d5016",height:250}):_e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[_e.jsx(S,{size:48,className:"mb-2 opacity-20"}),_e.jsx("p",{children:"Dados insuficientes para o gráfico"}),_e.jsx("p",{className:"text-xs mt-1",children:"Cadastre prescrições para visualizar a evolução"})]})})]}),_e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Atividade"}),_e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Prescrições Recentes"})]}),_e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-primary-50 text-primary-700",children:[_.length," registros"]})]}),_e.jsx("div",{className:"space-y-4",children:_.length>0?_.map(e=>{var t;return _e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100 bg-slate-50",children:[_e.jsxs("div",{className:"flex justify-between gap-3 mb-2",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"font-semibold text-slate-900",children:e.pacienteNome}),_e.jsx("p",{className:"text-xs text-slate-500",children:new Date(e.createdAt).toLocaleString("pt-BR")})]}),_e.jsxs("div",{className:"flex gap-2",children:[_e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("controlado"===e.tipo?"bg-orange-100 text-orange-700":"bg-primary-100 text-primary-700"),children:"controlado"===e.tipo?"Controlado":"Comum"}),_e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("ativa"===e.status?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"),children:e.status})]})]}),(null==(t=e.medicamentos)?void 0:t.length)>0&&_e.jsxs("p",{className:"text-sm text-slate-600",children:[e.medicamentos[0].nome,e.medicamentos.length>1&&` + ${e.medicamentos.length-1} medicamentos`]})]},e.id||e._id)}):_e.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhuma prescrição recente"})})]}),_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Cadastros"}),_e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Pacientes Recentes"})]}),_e.jsx("span",{className:"text-xs text-slate-400",children:"Atualizado hoje"})]}),_e.jsx("div",{className:"space-y-3",children:B.length>0?B.map(e=>_e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100",children:[_e.jsx("p",{className:"font-semibold text-slate-900",children:e.nome}),_e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-slate-500 mt-1",children:[_e.jsxs("span",{children:["CPF: ",e.cpf]}),_e.jsxs("span",{children:["Entrada: ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]})]},e.id||e._id)):_e.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhum paciente recente"})})]})]})]})}const vr=async(e="")=>Va(e?`/pacientes?${e}`:"/pacientes"),yr=async e=>Va(`/pacientes/${e}/prescricoes`),Nr=async e=>Ga("/pacientes",e),wr=async(e,t)=>Ha(`/pacientes/${e}`,t),Cr=async e=>Ja(`/pacientes/${e}`);function kr({paciente:t,onClose:s}){const[a,r]=e.useState({nome:"",cpf:"",dataNascimento:"",sexo:"",telefone:"",email:"",cep:"",rua:"",numero:"",bairro:"",cidade:"",estado:"",contatoNome:"",contatoTelefone:"",contatoRelacao:""}),[i,n]=e.useState(!1),[l,o]=e.useState({});e.useEffect(()=>{if(t){let s={},a={};try{"string"==typeof t.endereco?s=JSON.parse(t.endereco||"{}"):t.endereco&&(s=t.endereco)}catch(e){}try{"string"==typeof t.contatoEmergencia?a=JSON.parse(t.contatoEmergencia||"{}"):t.contatoEmergencia&&(a=t.contatoEmergencia)}catch(e){}r({nome:t.nome||"",cpf:t.cpf||"",dataNascimento:t.dataNascimento?t.dataNascimento.split("T")[0]:"",sexo:t.sexo||"",telefone:t.telefone||"",email:t.email||"",cep:s.cep||"",rua:s.rua||"",numero:s.numero||"",bairro:s.bairro||"",cidade:s.cidade||"",estado:s.estado||"",contatoNome:a.nome||"",contatoTelefone:a.telefone||"",contatoRelacao:a.relacao||""})}},[t]);const c=async e=>{if(e.preventDefault(),(()=>{const e={};a.nome.trim()||(e.nome="Nome é obrigatório"),a.cpf.trim()||(e.cpf="CPF é obrigatório"),a.dataNascimento||(e.dataNascimento="Data de nascimento é obrigatória"),a.sexo||(e.sexo="Sexo é obrigatório"),a.telefone.trim()||(e.telefone="Telefone é obrigatório"),a.cpf&&11!==a.cpf.replace(/\D/g,"").length&&(e.cpf="CPF deve ter 11 dígitos");return a.email&&a.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&(e.email="E-mail inválido"),o(e),0===Object.keys(e).length})()){n(!0);try{const e=JSON.stringify({cep:a.cep||"",rua:a.rua||"",numero:a.numero||"",bairro:a.bairro||"",cidade:a.cidade||"",estado:a.estado||""}),r=JSON.stringify({nome:a.contatoNome||"",telefone:a.contatoTelefone||"",relacao:a.contatoRelacao||""}),i={nome:a.nome.trim(),cpf:a.cpf.replace(/\D/g,""),dataNascimento:a.dataNascimento,sexo:a.sexo,telefone:a.telefone.replace(/\D/g,""),email:a.email.trim()||null,endereco:e,contatoEmergencia:r};t?(await wr(t.id||t._id,i),f.success(ir("update","Residente"))):(await Nr(i),f.success(ir("create","Residente"))),s()}catch(r){f.error(or(r,nr("save","residente")))}finally{n(!1)}}else f.error("Por favor, corrija os erros no formulário")},d=e=>{const{name:t,value:s}=e.target;l[t]&&o({...l,[t]:null}),r({...a,[t]:s})};return _e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl my-8 animate-in fade-in zoom-in duration-200",children:[_e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-gray-700 flex justify-between items-center bg-gradient-to-r from-primary-50 to-primary-100/50 dark:from-gray-800 dark:to-gray-700 sticky top-0 z-10 rounded-t-2xl",children:[_e.jsxs("div",{children:[_e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-gray-100",children:t?"Editar Paciente":"Novo Paciente"}),_e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-400 mt-1",children:"Preencha os dados do residente para cadastro"})]}),_e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700 rounded-lg transition",children:_e.jsx(F,{size:24,className:"text-slate-600 dark:text-gray-300"})})]}),_e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6 max-h-[calc(90vh-120px)] overflow-y-auto custom-scrollbar",children:[_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-200 dark:border-gray-700 p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:_e.jsx(I,{size:20,className:"text-primary-600 dark:text-primary-400"})}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-gray-100",children:"Dados Pessoais"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Nome Completo *"}),_e.jsx("input",{type:"text",name:"nome",value:a.nome,onChange:d,className:"input w-full "+(l.nome?"border-red-500 focus:ring-red-500":""),placeholder:"Nome completo do residente",required:!0}),l.nome&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.nome]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"CPF *"}),_e.jsx("input",{type:"text",name:"cpf",value:a.cpf,onChange:d,className:"input w-full "+(l.cpf?"border-red-500 focus:ring-red-500":""),placeholder:"000.000.000-00",maxLength:14,required:!0}),l.cpf&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.cpf]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Data de Nascimento *"}),_e.jsx("input",{type:"date",name:"dataNascimento",value:a.dataNascimento,onChange:d,className:"input w-full "+(l.dataNascimento?"border-red-500 focus:ring-red-500":""),required:!0}),l.dataNascimento&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.dataNascimento]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Sexo *"}),_e.jsxs("select",{name:"sexo",value:a.sexo,onChange:d,className:"input w-full "+(l.sexo?"border-red-500 focus:ring-red-500":""),required:!0,children:[_e.jsx("option",{value:"",children:"Selecione"}),_e.jsx("option",{value:"M",children:"Masculino"}),_e.jsx("option",{value:"F",children:"Feminino"}),_e.jsx("option",{value:"Outro",children:"Outro"})]}),l.sexo&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.sexo]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Telefone *"}),_e.jsx("input",{type:"tel",name:"telefone",value:a.telefone,onChange:d,className:"input w-full "+(l.telefone?"border-red-500 focus:ring-red-500":""),placeholder:"(00) 00000-0000",maxLength:15,required:!0}),l.telefone&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.telefone]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"E-mail"}),_e.jsx("input",{type:"email",name:"email",value:a.email,onChange:d,className:"input w-full "+(l.email?"border-red-500 focus:ring-red-500":""),placeholder:"email@exemplo.com"}),l.email&&_e.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",l.email]})]})]})]}),_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-200 dark:border-gray-700 p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:_e.jsx(U,{size:20,className:"text-blue-600 dark:text-blue-400"})}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-gray-100",children:"Endereço"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"CEP"}),_e.jsx("input",{type:"text",name:"cep",value:a.cep,onChange:d,className:"input w-full",placeholder:"00000-000",maxLength:9})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Rua"}),_e.jsx("input",{type:"text",name:"rua",value:a.rua,onChange:d,className:"input w-full",placeholder:"Nome da rua"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Número"}),_e.jsx("input",{type:"text",name:"numero",value:a.numero,onChange:d,className:"input w-full",placeholder:"Nº"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Bairro"}),_e.jsx("input",{type:"text",name:"bairro",value:a.bairro,onChange:d,className:"input w-full",placeholder:"Bairro"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Cidade"}),_e.jsx("input",{type:"text",name:"cidade",value:a.cidade,onChange:d,className:"input w-full",placeholder:"Cidade"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Estado"}),_e.jsxs("select",{name:"estado",value:a.estado,onChange:d,className:"input w-full",children:[_e.jsx("option",{value:"",children:"Selecione"}),_e.jsx("option",{value:"AC",children:"Acre"}),_e.jsx("option",{value:"AL",children:"Alagoas"}),_e.jsx("option",{value:"AP",children:"Amapá"}),_e.jsx("option",{value:"AM",children:"Amazonas"}),_e.jsx("option",{value:"BA",children:"Bahia"}),_e.jsx("option",{value:"CE",children:"Ceará"}),_e.jsx("option",{value:"DF",children:"Distrito Federal"}),_e.jsx("option",{value:"ES",children:"Espírito Santo"}),_e.jsx("option",{value:"GO",children:"Goiás"}),_e.jsx("option",{value:"MA",children:"Maranhão"}),_e.jsx("option",{value:"MT",children:"Mato Grosso"}),_e.jsx("option",{value:"MS",children:"Mato Grosso do Sul"}),_e.jsx("option",{value:"MG",children:"Minas Gerais"}),_e.jsx("option",{value:"PA",children:"Pará"}),_e.jsx("option",{value:"PB",children:"Paraíba"}),_e.jsx("option",{value:"PR",children:"Paraná"}),_e.jsx("option",{value:"PE",children:"Pernambuco"}),_e.jsx("option",{value:"PI",children:"Piauí"}),_e.jsx("option",{value:"RJ",children:"Rio de Janeiro"}),_e.jsx("option",{value:"RN",children:"Rio Grande do Norte"}),_e.jsx("option",{value:"RS",children:"Rio Grande do Sul"}),_e.jsx("option",{value:"RO",children:"Rondônia"}),_e.jsx("option",{value:"RR",children:"Roraima"}),_e.jsx("option",{value:"SC",children:"Santa Catarina"}),_e.jsx("option",{value:"SP",children:"São Paulo"}),_e.jsx("option",{value:"SE",children:"Sergipe"}),_e.jsx("option",{value:"TO",children:"Tocantins"})]})]})]})]}),_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-200 dark:border-gray-700 p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:_e.jsx(B,{size:20,className:"text-orange-600 dark:text-orange-400"})}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-gray-100",children:"Contato de Emergência"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Nome"}),_e.jsx("input",{type:"text",name:"contatoNome",value:a.contatoNome,onChange:d,className:"input w-full",placeholder:"Nome do contato"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Telefone"}),_e.jsx("input",{type:"tel",name:"contatoTelefone",value:a.contatoTelefone,onChange:d,className:"input w-full",placeholder:"(00) 00000-0000",maxLength:15})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Relação"}),_e.jsx("input",{type:"text",name:"contatoRelacao",value:a.contatoRelacao,onChange:d,className:"input w-full",placeholder:"Ex: Filho(a), Cônjuge"})]})]})]})]}),_e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-gray-700 bg-slate-50 dark:bg-gray-900 flex justify-end gap-3 sticky bottom-0 rounded-b-2xl",children:[_e.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary px-6 py-2.5",disabled:i,children:"Cancelar"}),_e.jsx("button",{type:"submit",onClick:c,disabled:i,className:"btn btn-primary px-6 py-2.5 shadow-lg shadow-primary-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:i?_e.jsxs("span",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):"Salvar"})]})]})})}function Sr({searchTerm:e,onSearchChange:t,placeholder:s,children:a}){return _e.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 items-center justify-between",children:[_e.jsxs("div",{className:"relative w-full md:w-96",children:[_e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),_e.jsx("input",{type:"text",placeholder:s||"Buscar...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition"})]}),_e.jsx("div",{className:"flex flex-wrap gap-3 w-full md:w-auto justify-end",children:a})]})}function Er({icon:e,title:t,description:s,actionLabel:a,onAction:r}){return _e.jsxs("div",{className:"text-center py-16",children:[_e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:_e.jsx(e,{size:32,className:"text-slate-300"})}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:t}),_e.jsx("p",{className:"text-slate-500 mt-1",children:s}),a&&r&&_e.jsx("button",{onClick:r,className:"btn btn-primary mt-4",children:a})]})}const Ar={primary:"from-primary-500 to-primary-600",danger:"from-red-500 to-red-600",emerald:"from-emerald-500 to-emerald-600"};function Pr({onClick:e,disabled:t=!1,loading:s=!1,variant:a="primary",icon:r,iconSize:i=18,tooltip:n,title:l,ariaLabel:o,className:c="",tooltipClassName:d=""}){const m=Ar[a]||Ar.primary;return _e.jsxs("button",{onClick:e,disabled:t,className:`group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br ${m} rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed ${c}`,title:l||n,"aria-label":o||n,type:"button",children:[s?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):r?_e.jsx(r,{size:i}):null,n?_e.jsx("span",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10 ${d}`,children:n}):null]})}function Rr({title:e,actions:t,emptyMessage:s,children:a}){return _e.jsxs("div",{className:"bg-white dark:bg-gray-900 shadow rounded-lg",children:[(e||t)&&_e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-800",children:[e&&_e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:e}),t&&_e.jsx("div",{className:"flex items-center gap-2",children:t})]}),_e.jsx("div",{className:"px-2 md:px-0",children:a}),s&&_e.jsx("div",{className:"px-4 py-6 text-center text-gray-500 dark:text-gray-400",children:s})]})}function zr({children:e}){return _e.jsx("div",{className:"md:hidden space-y-3 p-2",children:e})}function Dr({children:e}){return _e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-3",children:e})}function Tr({children:e}){return _e.jsx("div",{className:"hidden md:block overflow-x-auto",children:_e.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:e})})}function Or({columns:e}){return _e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:_e.jsx("tr",{children:e.map((e,t)=>_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e},t))})})}function qr({children:e}){return _e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:e})}function Lr({children:e}){return _e.jsx("tr",{children:e})}function Fr({children:e,className:t=""}){return _e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm text-gray-700 dark:text-gray-200 ${t}`,children:e})}function Ir(){const[t,s]=e.useState([]),[a,r]=e.useState(!0),[i,n]=e.useState(""),[l,o]=e.useState(""),[c,d]=e.useState(!1),[m,x]=e.useState(null),[p,h]=e.useState(null),[b,g]=e.useState([]),[j,v]=e.useState(null);e.useEffect(()=>{y()},[]);const y=async(e="")=>{try{r(!0);const t=new URLSearchParams;e&&t.append("search",e),l&&t.append("status",l);const a=await vr(t.toString()),i=Array.isArray(a)?a:a.pacientes||[];s(i)}catch(t){f.error(nr("load","pacientes"))}finally{r(!1)}},N=async e=>{try{h(e);const t=await yr(e.id||e._id);g(t.prescricoes||[])}catch(t){f.error(nr("load","histórico"))}},k=e=>{x(e),d(!0)},S=async(e,t)=>{const s=`Tem certeza que deseja excluir o paciente "${t}"?\n\nEsta ação não pode ser desfeita.`;if(window.confirm(s))try{v(e),await Cr(e),f.success(ir("delete","Paciente")),y(i)}catch(a){f.error(nr("delete","paciente"))}finally{v(null)}},R=t.filter(e=>{const t=e.nome.toLowerCase().includes(i.toLowerCase())||e.cpf&&e.cpf.includes(i),s=!l||e.status===l;return t&&s}),z=t.filter(e=>{if(!e.createdAt)return!1;const t=new Date(e.createdAt),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length,D=t.filter(e=>e.dataNascimento),T=D.length>0?Math.round(D.reduce((e,t)=>e+((new Date).getFullYear()-new Date(t.dataNascimento).getFullYear()),0)/D.length):0,O={total:t.length,novosMes:z,idadeMedia:T};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Cadastros",title:"Residentes",subtitle:"Gerencie os residentes da instituição, histórico clínico e dados pessoais.",children:_e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20",children:[_e.jsx($,{size:20})," Novo Residente"]})}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_e.jsx(gr,{icon:w,label:"Total",value:O.total,description:"Residentes cadastrados",color:"primary"}),_e.jsx(gr,{icon:V,label:"Novos",value:`+${O.novosMes}`,description:"Cadastrados este mês",color:"emerald"}),_e.jsx(gr,{icon:A,label:"Média",value:`${O.idadeMedia} anos`,description:"Idade média dos residentes",color:"purple"})]}),_e.jsxs(Sr,{searchTerm:i,onSearchChange:n,placeholder:"Buscar por nome ou CPF...",children:[_e.jsxs("select",{value:l,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",children:[_e.jsx("option",{value:"",children:"Todos os status"}),_e.jsx("option",{value:"ativo",children:"Ativos"}),_e.jsx("option",{value:"inativo",children:"Inativos"})]}),_e.jsxs("button",{type:"button",onClick:()=>y(i),className:"btn btn-secondary flex items-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar"]})]}),_e.jsx(Rr,{title:"Residentes",children:a?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):R.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:R.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-sm",children:e.nome.charAt(0)}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome}),_e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CPF: ",e.cpf||"-"]}),_e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-gray-400 mt-1",children:[_e.jsx(P,{size:12}),e.dataNascimento?new Date(e.dataNascimento).toLocaleDateString("pt-BR"):"-"]})]})]}),_e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:"inativo"===e.status?"Inativo":"Ativo"})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs text-slate-600 dark:text-gray-300",children:[_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx(B,{size:12}),_e.jsx("span",{children:e.telefone||"-"})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx(u,{size:12}),_e.jsx("span",{children:e.email||"-"})]}),e.endereco&&_e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[_e.jsx(U,{size:12}),_e.jsx("span",{className:"line-clamp-1",children:e.endereco})]})]}),_e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3",children:[_e.jsx("button",{onClick:()=>N(e),className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Ver Histórico","aria-label":"Ver histórico do paciente",children:_e.jsx(C,{size:18})}),_e.jsx("button",{onClick:()=>k(e),className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Editar paciente","aria-label":"Editar paciente",children:_e.jsx(G,{size:18})}),_e.jsx("button",{onClick:()=>S(e.id||e._id,e.nome),disabled:j===(e.id||e._id),className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-red-500 to-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Excluir paciente","aria-label":"Excluir paciente",children:j===(e.id||e._id)?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):_e.jsx(H,{size:18})})]})]},e.id||e._id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Nome","CPF","Nascimento","Telefone","Ações"]}),_e.jsx(qr,{children:R.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-xs",children:e.nome.charAt(0)}),_e.jsx("span",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome})]})}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:e.cpf||"-"}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:e.dataNascimento?new Date(e.dataNascimento).toLocaleDateString("pt-BR"):"-"}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:e.telefone||"-"}),_e.jsx(Fr,{className:"text-right",children:_e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_e.jsx(Pr,{onClick:()=>N(e),icon:C,tooltip:"Histórico",ariaLabel:"Ver histórico do paciente",variant:"emerald"}),_e.jsx(Pr,{onClick:()=>k(e),icon:G,tooltip:"Editar",ariaLabel:"Editar paciente",variant:"primary"}),_e.jsx(Pr,{onClick:()=>S(e.id||e._id,e.nome),icon:H,tooltip:"Excluir",ariaLabel:"Excluir paciente",variant:"danger",disabled:j===(e.id||e._id),loading:j===(e.id||e._id)})]})})]},e.id||e._id))})]})]}):_e.jsx(Er,{icon:w,title:"Nenhum residente encontrado",description:"Cadastre o primeiro residente para começar.",actionLabel:"Cadastrar Residente",onAction:()=>d(!0)})}),c&&_e.jsx(kr,{paciente:m,onClose:()=>{d(!1),x(null),y(i)}}),p&&_e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:_e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[_e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[_e.jsx(C,{className:"text-primary-600"}),"Histórico de Prescrições"]}),_e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[p.nome," - ",p.cpf]})]}),_e.jsx("button",{onClick:()=>{h(null),g([])},className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:_e.jsx(F,{size:20,className:"text-slate-400"})})]}),_e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:b.length>0?_e.jsx("div",{className:"space-y-4",children:b.map(e=>{var t,s;return _e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100 bg-slate-50 hover:bg-slate-100 transition",children:[_e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-sm text-slate-500",children:new Date(e.createdAt).toLocaleString("pt-BR")}),_e.jsxs("p",{className:"text-sm font-medium text-slate-700 mt-1",children:["Dr(a). ",(null==(t=e.medicoId)?void 0:t.nome)||"Não informado",(null==(s=e.medicoId)?void 0:s.crm)&&` - CRM ${e.medicoId.crm}`]})]}),_e.jsxs("div",{className:"flex gap-2",children:[_e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("controlado"===e.tipo?"bg-orange-100 text-orange-700":"bg-primary-100 text-primary-700"),children:"controlado"===e.tipo?"Controlado":"Comum"}),_e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("ativa"===e.status?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"),children:e.status})]})]}),e.medicamentos&&e.medicamentos.length>0&&_e.jsxs("div",{className:"mt-3",children:[_e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Medicamentos"}),_e.jsx("ul",{className:"space-y-1",children:e.medicamentos.map((e,t)=>_e.jsxs("li",{className:"text-sm text-slate-700",children:["• ",e.nome,e.dosagem&&` - ${e.dosagem}`,e.via&&` (${e.via})`]},t))})]}),e.observacoes&&_e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg",children:[_e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Observações"}),_e.jsx("p",{className:"text-sm text-slate-600",children:e.observacoes})]})]},e._id)})}):_e.jsxs("div",{className:"text-center py-12",children:[_e.jsx(C,{size:48,className:"mx-auto text-slate-300 mb-3"}),_e.jsx("p",{className:"text-slate-500",children:"Nenhuma prescrição encontrada"}),_e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Este paciente ainda não possui prescrições registradas."})]})})]})})]})}const _r=async(e={})=>{const t=$a(e);return Va(`/prescricoes${t}`)},Ur=async e=>Ga("/prescricoes",e),Br=async e=>Ha(`/prescricoes/${e}/cancelar`);function Mr(){const[t,s]=e.useState([]),[a,r]=e.useState([]),[i,n]=e.useState(!0),[l,o]=e.useState(!1),[c,d]=e.useState(""),[m,x]=e.useState("comum"),[u,p]=e.useState([{nome:"",dosagem:"",frequencia:"",duracao:"",observacoes:""}]),[h,b]=e.useState("todas"),[g,j]=e.useState("todas"),[v,y]=e.useState(null),N=e=>{if(!e)return"Data não informada";try{const t=new Date(e);return isNaN(t.getTime())?"Data inválida":t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return"Data inválida"}},w=e=>{if(!e)return"--:--";try{const t=new Date(e);return isNaN(t.getTime())?"--:--":t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch(t){return"--:--"}};e.useEffect(()=>{k()},[]);const k=async()=>{try{n(!0);const[e,t]=await Promise.all([_r(),vr()]),a=Array.isArray(e)?e:e.prescricoes||[];s(a);const i=Array.isArray(t)?t:t.pacientes||[];r(i)}catch(e){f.error(nr("load","dados"))}finally{n(!1)}},S=(e,t,s)=>{const a=[...u];a[e][t]=s,p(a)},A=async e=>{if(window.confirm("Tem certeza que deseja cancelar esta prescrição?"))try{await Br(e),f.success("Prescrição cancelada"),y({type:"warning",message:"Prescrição foi cancelada."}),k()}catch(t){f.error(nr("cancel","prescrição"))}},P=t.filter(e=>("todas"===h||e.status===h)&&("todas"===g||e.tipo===g)),R={total:t.length,ativas:t.filter(e=>"ativa"===e.status).length,controladas:t.filter(e=>"controlado"===e.tipo).length,hoje:t.filter(e=>{const t=new Date(e.createdAt),s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsxs(br,{label:"Operação Clínica",title:"Prescrições",subtitle:"Controle total das prescrições emitidas, status em tempo real e histórico completo.",children:[_e.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20",children:[_e.jsx($,{size:18})," Nova Prescrição"]}),_e.jsxs("button",{type:"button",onClick:k,className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar"]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:C,label:"Total",value:R.total,description:"Prescrições emitidas",color:"primary"}),_e.jsx(gr,{icon:V,label:"Ativas",value:R.ativas,description:"Em vigência",color:"emerald"}),_e.jsx(gr,{icon:J,label:"Controladas",value:R.controladas,description:"Medicamentos controlados",color:"orange"}),_e.jsx(gr,{icon:$,label:"Hoje",value:`+${R.hoje}`,description:"Emitidas hoje",color:"purple"})]}),_e.jsx("div",{className:"card p-4",children:_e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[_e.jsx(W,{size:16}),_e.jsx("span",{className:"font-medium",children:"Filtros:"})]}),_e.jsxs("div",{className:"flex flex-wrap gap-3 w-full md:w-auto",children:[_e.jsxs("select",{value:h,onChange:e=>b(e.target.value),className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-600 focus:outline-none focus:border-primary-500",children:[_e.jsx("option",{value:"todas",children:"Todos os Status"}),_e.jsx("option",{value:"ativa",children:"Ativas"}),_e.jsx("option",{value:"cancelada",children:"Canceladas"})]}),_e.jsxs("select",{value:g,onChange:e=>j(e.target.value),className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-600 focus:outline-none focus:border-primary-500",children:[_e.jsx("option",{value:"todas",children:"Todos os Tipos"}),_e.jsx("option",{value:"comum",children:"Comum"}),_e.jsx("option",{value:"controlado",children:"Controlado"})]})]})]})}),v&&_e.jsxs("div",{className:"card flex items-center gap-3 border "+("success"===v.type?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:[_e.jsx(V,{className:"text-emerald-500",size:20}),_e.jsx("p",{className:"text-sm text-slate-700",children:v.message}),_e.jsx("button",{className:"ml-auto text-xs text-slate-500",onClick:()=>y(null),children:"Fechar"})]}),_e.jsx(Rr,{title:"Prescrições",children:i?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):P.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:P.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-xs",children:e.pacienteNome?e.pacienteNome.charAt(0).toUpperCase():"P"}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.pacienteNome||"Paciente não identificado"}),_e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-600 dark:text-gray-300",children:[_e.jsx("span",{children:N(e.createdAt)}),_e.jsx("span",{className:"text-slate-400",children:w(e.createdAt)})]})]})]}),_e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium "+("controlado"===e.tipo?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:"controlado"===e.tipo?"Controlado":"Comum"})]}),_e.jsx("div",{className:"mt-3 text-sm text-slate-700 dark:text-gray-200",children:e.medicamentos&&e.medicamentos.length>0?_e.jsxs("div",{children:[_e.jsx("span",{className:"font-medium",children:e.medicamentos[0].nome}),e.medicamentos.length>1&&_e.jsxs("span",{className:"text-slate-400 text-xs ml-1",children:["+",e.medicamentos.length-1," ",2===e.medicamentos.length?"outro":"outros"]})]}):_e.jsx("span",{className:"text-slate-400 italic",children:"Sem medicamentos"})}),_e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[_e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium "+("ativa"===e.status?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-red-50 text-red-700 border border-red-100"),children:"ativa"===e.status?_e.jsxs(_e.Fragment,{children:[_e.jsx(V,{size:12})," Ativa"]}):_e.jsxs(_e.Fragment,{children:[_e.jsx(F,{size:12})," Cancelada"]})}),"ativa"===e.status&&_e.jsx("button",{onClick:()=>A(e.id||e._id),className:"text-red-600 hover:text-red-800 text-xs font-semibold hover:underline",children:"Cancelar"})]})]},e.id||e._id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Paciente","Data Emissão","Tipo","Medicamentos","Status","Ações"]}),_e.jsx(qr,{children:P.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-xs",children:e.pacienteNome?e.pacienteNome.charAt(0).toUpperCase():"P"}),_e.jsx("span",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.pacienteNome||"Paciente não identificado"})]})}),_e.jsxs(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:[N(e.createdAt),_e.jsx("span",{className:"text-xs text-slate-400 block",children:w(e.createdAt)})]}),_e.jsx(Fr,{children:_e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium "+("controlado"===e.tipo?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:"controlado"===e.tipo?"Controlado":"Comum"})}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:e.medicamentos&&e.medicamentos.length>0?_e.jsxs("div",{children:[_e.jsx("span",{className:"font-medium",children:e.medicamentos[0].nome}),e.medicamentos.length>1&&_e.jsxs("span",{className:"text-slate-400 text-xs ml-1",children:["+",e.medicamentos.length-1," outros"]})]}):_e.jsx("span",{className:"text-slate-400",children:"-"})}),_e.jsx(Fr,{children:_e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium "+("ativa"===e.status?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-red-50 text-red-700 border border-red-100"),children:"ativa"===e.status?_e.jsxs(_e.Fragment,{children:[_e.jsx(V,{size:12})," Ativa"]}):_e.jsxs(_e.Fragment,{children:[_e.jsx(F,{size:12})," Cancelada"]})})}),_e.jsx(Fr,{className:"text-right",children:"ativa"===e.status&&_e.jsx("button",{onClick:()=>A(e.id||e._id),className:"text-red-600 hover:text-red-800 text-xs font-semibold hover:underline",children:"Cancelar"})})]},e.id||e._id))})]})]}):_e.jsx(Er,{icon:J,title:"Nenhuma prescrição encontrada",description:"Comece emitindo uma nova prescrição.",actionLabel:"Nova Prescrição",onAction:()=>o(!0)})}),l&&_e.jsx("div",{className:"fixed inset-0 bg-slate-900/70 flex items-center justify-center p-4 z-50",children:_e.jsxs("div",{className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[_e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Cadastro"}),_e.jsx("h2",{className:"text-2xl font-bold",children:"Nova Prescrição"})]}),_e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-slate-50 rounded-2xl",children:_e.jsx(F,{size:24})})]}),_e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=null==e?void 0:e.empresaId;await Ur({pacienteId:c,empresaId:t,tipo:m,medicamentos:u.filter(e=>""!==e.nome.trim())}),f.success(ir("create","Prescrição",{gender:"f"})),o(!1),d(""),x("comum"),p([{nome:"",dosagem:"",frequencia:"",duracao:"",observacoes:""}]),y({type:"success",message:"Prescrição cadastrada com sucesso."}),k()}catch(t){f.error(nr("create","prescrição"))}},className:"p-6 space-y-6",children:[_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Paciente *"}),_e.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"input",required:!0,children:[_e.jsx("option",{value:"",children:"Selecione um paciente"}),a.map(e=>_e.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo *"}),_e.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"input",required:!0,children:[_e.jsx("option",{value:"comum",children:"Comum"}),_e.jsx("option",{value:"controlado",children:"Controlado"})]})]})]}),_e.jsxs("div",{children:[_e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Sessão"}),_e.jsx("h3",{className:"text-lg font-semibold",children:"Medicamentos"})]}),_e.jsxs("button",{type:"button",onClick:()=>{p([...u,{nome:"",dosagem:"",frequencia:"",duracao:"",observacoes:""}])},className:"btn btn-secondary flex items-center gap-2",children:[_e.jsx($,{size:18}),"Adicionar"]})]}),_e.jsx("div",{className:"space-y-4",children:u.map((e,t)=>_e.jsxs("div",{className:"p-4 border border-slate-100 rounded-2xl",children:[_e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_e.jsxs("h4",{className:"font-medium",children:["Medicamento ",t+1]}),u.length>1&&_e.jsx("button",{type:"button",onClick:()=>(e=>{p(u.filter((t,s)=>s!==e))})(t),className:"text-red-600 hover:bg-red-50 p-1 rounded-xl",children:_e.jsx(F,{size:18})})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),_e.jsx("input",{type:"text",value:e.nome,onChange:e=>S(t,"nome",e.target.value),className:"input",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosagem *"}),_e.jsx("input",{type:"text",value:e.dosagem,onChange:e=>S(t,"dosagem",e.target.value),className:"input",placeholder:"Ex: 500mg",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frequência *"}),_e.jsx("input",{type:"text",value:e.frequencia,onChange:e=>S(t,"frequencia",e.target.value),className:"input",placeholder:"Ex: 8/8h",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duração *"}),_e.jsx("input",{type:"text",value:e.duracao,onChange:e=>S(t,"duracao",e.target.value),className:"input",placeholder:"Ex: 7 dias",required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observações"}),_e.jsx("input",{type:"text",value:e.observacoes,onChange:e=>S(t,"observacoes",e.target.value),className:"input"})]})]})]},t))})]}),_e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[_e.jsx("button",{type:"button",onClick:()=>o(!1),className:"btn btn-secondary",children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Criar Prescrição"})]})]})]})})]})}function $r(){const[t,s]=e.useState([]),[a,r]=e.useState(!0),[i,n]=e.useState(""),[l,o]=e.useState("todos");e.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const[e,t]=await Promise.all([vr(),_r()]),a=Array.isArray(e)?e:e.pacientes||[],i=Array.isArray(t)?t:t.prescricoes||[],n=a.map(e=>{const t=e.id||e._id,s=i.filter(e=>{var s;return(e.pacienteId===t||(null==(s=e.pacienteId)?void 0:s._id)===t)&&"ativa"===e.status});return{...e,id:t,hasPrescription:s.length>0,prescriptionCount:s.length,prescriptions:s}});s(n)}catch(e){f.error(nr("load","dados do censo"))}finally{r(!1)}},d=t.filter(e=>{const t=e.nome.toLowerCase().includes(i.toLowerCase())||e.cpf&&e.cpf.includes(i);return"todos"===l?t:"com_prescricao"===l?t&&e.hasPrescription:"sem_prescricao"===l?t&&!e.hasPrescription:t}),m={total:t.length,comPrescricao:t.filter(e=>e.hasPrescription).length,semPrescricao:t.filter(e=>!e.hasPrescription).length};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Controle",title:"Censo M.P.",subtitle:"Mapa de Prescrições: Acompanhe quais residentes possuem prescrições ativas.",children:_e.jsxs("button",{type:"button",onClick:c,className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar"]})}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_e.jsx(gr,{icon:w,label:"Total",value:m.total,description:"Residentes cadastrados",color:"primary"}),_e.jsx(gr,{icon:V,label:"Cobertos",value:m.comPrescricao,description:"Com prescrição ativa",color:"emerald"}),_e.jsx(gr,{icon:_,label:"Pendentes",value:m.semPrescricao,description:"Sem prescrição ativa",color:"red"})]}),_e.jsx(Sr,{searchTerm:i,onSearchChange:n,placeholder:"Buscar residente...",filters:[{label:"Todos",value:"todos"},{label:"Com Prescrição",value:"com_prescricao"},{label:"Sem Prescrição",value:"sem_prescricao"}],activeFilter:l,onFilterChange:o}),_e.jsx(Rr,{title:"Residentes",children:a?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):d.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:d.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-sm",children:e.nome.charAt(0)}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome}),_e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CPF: ",e.cpf||"N/A"]})]})]}),e.hasPrescription?_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-100",children:[_e.jsx(V,{size:12})," Coberto"]}):_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-100",children:[_e.jsx(_,{size:12})," Pendente"]})]}),_e.jsxs("div",{className:"mt-3",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_e.jsx(Q,{size:16,className:"text-slate-400"}),_e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-200",children:[e.prescriptionCount," prescrições"]})]}),e.hasPrescription?_e.jsx("div",{className:"flex flex-wrap gap-1",children:e.prescriptions.map(e=>{var t,s,a;return _e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-300 bg-slate-100 dark:bg-gray-800 px-2 py-1 rounded",children:[null==(s=null==(t=e.medicamentos)?void 0:t[0])?void 0:s.nome,(null==(a=e.medicamentos)?void 0:a.length)>1&&" +"+(e.medicamentos.length-1)]},e.id)})}):_e.jsx("span",{className:"text-xs text-slate-400 dark:text-gray-500 italic",children:"Nenhuma prescrição ativa"})]})]},e.id||e._id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Residente","Status","Prescrições Ativas","Detalhes"]}),_e.jsx(qr,{children:d.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-sm",children:e.nome.charAt(0)}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome}),_e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CPF: ",e.cpf||"N/A"]})]})]})}),_e.jsx(Fr,{children:e.hasPrescription?_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-100",children:[_e.jsx(V,{size:14})," Coberto"]}):_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-100",children:[_e.jsx(_,{size:14})," Pendente"]})}),_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx(Q,{size:16,className:"text-slate-400"}),_e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-200",children:[e.prescriptionCount," prescrições"]})]})}),_e.jsx(Fr,{children:e.hasPrescription?_e.jsx("div",{className:"flex flex-col gap-1",children:e.prescriptions.map(e=>{var t,s,a;return _e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-300 bg-slate-100 dark:bg-gray-800 px-2 py-1 rounded inline-block w-fit",children:[null==(s=null==(t=e.medicamentos)?void 0:t[0])?void 0:s.nome,(null==(a=e.medicamentos)?void 0:a.length)>1&&" +"+(e.medicamentos.length-1)]},e.id)})}):_e.jsx("span",{className:"text-xs text-slate-400 dark:text-gray-500 italic",children:"Nenhuma prescrição ativa"})})]},e.id||e._id))})]})]}):_e.jsx("div",{className:"p-8",children:_e.jsx(Er,{icon:w,title:"Nenhum residente encontrado",description:"Tente ajustar os filtros de busca."})})})]})}const Vr=async()=>Va("/usuarios"),Gr=async e=>Ga("/usuarios",e),Hr=async(e,t)=>Ha(`/usuarios/${e}`,t),Jr=async(e,t,s)=>Ha(`/usuarios/${e}/senha`,{senhaAtual:t,novaSenha:s}),Wr=async e=>Ja(`/usuarios/${e}`),Qr=async()=>Va("/usuarios/me/summary"),Kr=async e=>Ha("/usuarios/me",e);function Yr({usuario:t,onClose:s}){const[a,r]=e.useState({nome:"",email:"",senha:"",telefone:"",especialidade:"",crm:"",crmUf:"",role:"atendente",permissoes:[],ativo:!0}),[i,n]=e.useState(!1);e.useEffect(()=>{t&&r({nome:t.nome||"",email:t.email||"",senha:"",telefone:t.telefone||"",especialidade:t.especialidade||"",crm:t.crm||"",crmUf:t.crmUf||"",role:t.role||"atendente",permissoes:t.permissoes||[],ativo:void 0===t.ativo||t.ativo})},[t]);return _e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:_e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[_e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[_e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"Editar Usuário":"Novo Usuário"}),_e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-xl transition-colors",children:_e.jsx(F,{size:24})})]}),_e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{if(null==t?void 0:t.id){const e={...a};e.senha||delete e.senha,await Hr(t.id,e),f.success(ir("update","Usuário",{suffix:"!"}))}else{if(!a.senha||a.senha.length<6)return f.error(lr("minPassword")),void n(!1);await Gr(a),f.success(ir("create","Usuário",{suffix:"!"}))}s()}catch(r){f.error(or(r,nr("save","usuário")))}finally{n(!1)}},className:"p-6 space-y-4",children:[_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo *"}),_e.jsx("input",{type:"text",required:!0,className:"input",value:a.nome,onChange:e=>r({...a,nome:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-mail *"}),_e.jsx("input",{type:"email",required:!0,className:"input",value:a.email,onChange:e=>r({...a,email:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Senha ",!t&&"*"]}),_e.jsx("input",{type:"password",className:"input",placeholder:t?"Deixe em branco para manter":"Mínimo 6 caracteres",minLength:"6",value:a.senha,onChange:e=>r({...a,senha:e.target.value}),required:!t})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone"}),_e.jsx("input",{type:"tel",className:"input",value:a.telefone,onChange:e=>r({...a,telefone:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Especialidade"}),_e.jsxs("select",{className:"input",value:a.especialidade,onChange:e=>r({...a,especialidade:e.target.value}),children:[_e.jsx("option",{value:"",children:"Selecione uma especialidade"}),_e.jsx("option",{value:"Médico",children:"Médico"}),_e.jsx("option",{value:"Enfermeiro",children:"Enfermeiro"}),_e.jsx("option",{value:"Técnico de Enfermagem",children:"Técnico de Enfermagem"}),_e.jsx("option",{value:"Fisioterapeuta",children:"Fisioterapeuta"}),_e.jsx("option",{value:"Nutricionista",children:"Nutricionista"}),_e.jsx("option",{value:"Assistente Social",children:"Assistente Social"}),_e.jsx("option",{value:"Administrador",children:"Administrador"}),_e.jsx("option",{value:"Auxiliar Administrativo",children:"Auxiliar Administrativo"}),_e.jsx("option",{value:"Outro",children:"Outro"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CRM"}),_e.jsx("input",{type:"text",className:"input",value:a.crm,onChange:e=>r({...a,crm:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"UF do CRM"}),_e.jsx("input",{type:"text",className:"input",maxLength:"2",placeholder:"Ex: BA",value:a.crmUf,onChange:e=>r({...a,crmUf:e.target.value.toUpperCase()})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Função *"}),_e.jsxs("select",{required:!0,className:"input",value:a.role,onChange:e=>r({...a,role:e.target.value}),children:[_e.jsx("option",{value:"enfermeiro",children:"Enfermeiro"}),_e.jsx("option",{value:"tecnico_enfermagem",children:"Técnico de Enfermagem"}),_e.jsx("option",{value:"fisioterapeuta",children:"Fisioterapeuta"}),_e.jsx("option",{value:"nutricionista",children:"Nutricionista"}),_e.jsx("option",{value:"assistente_social",children:"Assistente Social"}),_e.jsx("option",{value:"auxiliar_administrativo",children:"Auxiliar Administrativo"}),_e.jsx("option",{value:"atendente",children:"Atendente"}),_e.jsx("option",{value:"admin",children:"Administrador"}),_e.jsx("option",{value:"superadmin",children:"Super Administrador"})]})]}),_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Permissões de Acesso"}),_e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[{id:"dashboard",label:"Dashboard"},{id:"agenda",label:"Agenda"},{id:"cronograma",label:"Cronograma"},{id:"prescricoes",label:"Prescrições"},{id:"pacientes",label:"Pacientes/Residentes"},{id:"estoque",label:"Estoque"},{id:"evolucao",label:"Evolução"},{id:"financeiro",label:"Financeiro"},{id:"usuarios",label:"Usuários"},{id:"empresas",label:"Empresas"},{id:"configuracoes",label:"Configurações"},{id:"relatorios",label:"Relatórios"}].map(e=>_e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-2 rounded-lg transition-colors",children:[_e.jsx("input",{type:"checkbox",className:"rounded text-primary-600 focus:ring-primary-500",checked:a.permissoes.includes(e.id),onChange:()=>{return t=e.id,void r(e=>{const s=e.permissoes.includes(t)?e.permissoes.filter(e=>e!==t):[...e.permissoes,t];return{...e,permissoes:s}});var t}}),_e.jsx("span",{className:"text-sm text-slate-700",children:e.label})]},e.id))}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Selecione os módulos que este usuário poderá acessar."})]}),_e.jsx("div",{className:"md:col-span-2",children:_e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_e.jsx("input",{type:"checkbox",className:"rounded text-primary-600",checked:a.ativo,onChange:e=>r({...a,ativo:e.target.checked})}),_e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Usuário ativo"})]})})]}),_e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[_e.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary flex-1",disabled:i,children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",disabled:i,children:i?"Salvando...":"Salvar"})]})]})]})})}function Xr({title:e="Acesso Negado",message:t="Você não tem permissão para acessar esta página.",messageClassName:s="text-slate-600"}){return _e.jsxs("div",{className:"card text-center py-12",children:[_e.jsx(K,{size:48,className:"mx-auto text-red-500 mb-4"}),_e.jsx("h2",{className:"text-2xl font-bold mb-2",children:e}),_e.jsx("p",{className:s,children:t})]})}function Zr(){const{user:t}=Za(),[s,a]=e.useState([]),[r,i]=e.useState(!0),[n,l]=e.useState(!1),[o,c]=e.useState(null),[d,m]=e.useState("comfortable"),[x,u]=e.useState(null),[p,h]=e.useState(""),[b,g]=e.useState(null),j="admin"===(null==t?void 0:t.role)||"superadmin"===(null==t?void 0:t.role);e.useEffect(()=>{j?v():f.error(lr("accessDenied"))},[j]);const v=async()=>{try{i(!0);const e=await Vr(),t=Array.isArray(e)?e:e.usuarios||[];a(t)}catch(e){f.error(nr("load","usuários"))}finally{i(!1)}},y=e=>{c(e),l(!0)},N=async(e,s)=>{if(e===t.id)return void f.error(lr("cannotDeleteSelf"));const a=`Tem certeza que deseja excluir o usuário "${s}"?\n\nEsta ação não pode ser desfeita.`;if(window.confirm(a))try{g(e),await Wr(e),f.success(ir("delete","Usuário")),u({type:"success",message:"Usuário excluído e lista atualizada."}),v()}catch(r){f.error(nr("delete","usuário"))}finally{g(null)}},C=s.filter(e=>e.nome.toLowerCase().includes(p.toLowerCase())||e.email.toLowerCase().includes(p.toLowerCase())||e.crm&&e.crm.includes(p)),k=e=>"superadmin"===e?"Super Admin":"admin"===e?"Administrador":"nutricionista"===e?"Nutricionista":"atendente"===e?"Atendente":"enfermeiro"===e?"Enfermeiro":"tecnico_enfermagem"===e?"Técnico de Enfermagem":"fisioterapeuta"===e?"Fisioterapeuta":"assistente_social"===e?"Assistente Social":"auxiliar_administrativo"===e?"Auxiliar Administrativo":"Usuário";return j?_e.jsxs("div",{className:"space-y-8",children:[_e.jsxs(br,{label:"Administração",title:"Usuários",subtitle:"Gerencie o acesso ao sistema, cadastre novos profissionais e mantenha a equipe atualizada.",children:[_e.jsxs("button",{type:"button",onClick:v,className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar"]}),_e.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-600/20",children:[_e.jsx($,{size:18})," Novo Usuário"]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_e.jsx(gr,{icon:w,label:"Total de Usuários",value:s.length,color:"primary"}),_e.jsx(gr,{icon:V,label:"Usuários Ativos",value:s.filter(e=>e.ativo).length,color:"emerald"}),_e.jsx("div",{className:"hidden md:block"})]}),_e.jsx(Sr,{searchTerm:p,onSearchChange:h,placeholder:"Buscar por nome, email ou CRM...",children:_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 ml-auto",children:[_e.jsx("span",{children:"Densidade:"}),_e.jsx("button",{type:"button",onClick:()=>m(e=>"comfortable"===e?"compact":"comfortable"),className:"px-3 py-1 rounded-full text-xs font-semibold transition-colors "+("comfortable"===d?"bg-white shadow-sm text-primary-700 ring-1 ring-slate-200":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:"comfortable"===d?"Confortável":"Compacta"})]})}),x&&_e.jsxs("div",{className:"card border flex items-center gap-3 "+("success"===x.type?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:[_e.jsx(V,{className:"text-emerald-500",size:20}),_e.jsx("p",{className:"text-sm text-slate-700",children:x.message}),_e.jsx("button",{className:"ml-auto text-xs text-slate-500 hover:text-slate-700",onClick:()=>u(null),children:"Fechar"})]}),_e.jsx(Rr,{title:"Usuários",children:r?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):C.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:C.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-sm",children:e.nome.charAt(0).toUpperCase()}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome}),_e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:e.email}),e.crm&&_e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CRM: ",e.crm]})]})]}),_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+(e.ativo?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-red-50 text-red-700 border-red-100"),children:e.ativo?"Ativo":"Inativo"})]}),_e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+("admin"===e.role||"superadmin"===e.role?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-100 text-slate-700 border-slate-200"),children:k(e.role)}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("button",{onClick:()=>y(e),className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"Editar usuário","aria-label":"Editar usuário",children:_e.jsx(G,{size:18})}),e.id!==t.id&&_e.jsx("button",{onClick:()=>N(e.id,e.nome),disabled:b===e.id,className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-red-500 to-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Excluir usuário","aria-label":"Excluir usuário",children:b===e.id?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):_e.jsx(H,{size:18})})]})]})]},e.id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Profissional","Contato","CRM","Função","Status","Ações"]}),_e.jsx(qr,{children:C.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{className:"compact"===d?"py-3":"py-4",children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-xs",children:e.nome.charAt(0).toUpperCase()}),_e.jsx("div",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome})]})}),_e.jsx(Fr,{className:("compact"===d?"py-3":"py-4")+" text-sm text-slate-600 dark:text-gray-300",children:e.email}),_e.jsx(Fr,{className:("compact"===d?"py-3":"py-4")+" text-sm text-slate-600 dark:text-gray-300",children:e.crm?_e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-gray-800 px-2 py-1 rounded text-xs",children:e.crm}):_e.jsx("span",{className:"text-slate-400",children:"-"})}),_e.jsx(Fr,{className:"compact"===d?"py-3":"py-4",children:_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+("admin"===e.role||"superadmin"===e.role?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-100 text-slate-700 border-slate-200"),children:k(e.role)})}),_e.jsx(Fr,{className:"compact"===d?"py-3":"py-4",children:_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+(e.ativo?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-red-50 text-red-700 border-red-100"),children:e.ativo?"Ativo":"Inativo"})}),_e.jsx(Fr,{className:("compact"===d?"py-3":"py-4")+" text-right",children:_e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_e.jsx(Pr,{onClick:()=>y(e),icon:G,tooltip:"Editar",ariaLabel:"Editar usuário",variant:"primary"}),e.id!==t.id&&_e.jsx(Pr,{onClick:()=>N(e.id,e.nome),icon:H,tooltip:"Excluir",ariaLabel:"Excluir usuário",variant:"danger",disabled:b===e.id,loading:b===e.id})]})})]},e.id))})]})]}):_e.jsx(Er,{icon:M,title:"Nenhum usuário encontrado",description:p?"Tente buscar com outros termos.":"Comece adicionando novos usuários ao sistema.",actionLabel:p?null:"Adicionar usuário",onAction:p?null:()=>l(!0)})}),n&&_e.jsx(Yr,{usuario:o,onClose:()=>{l(!1),c(null),u({type:"success",message:"Dados atualizados após salvar usuário."}),v()}})]}):_e.jsx(Xr,{message:"Apenas administradores podem acessar esta página."})}const ei=async()=>Va("/empresas"),ti=async e=>Ga("/empresas",e),si=async e=>Ja(`/empresas/${e}`),ai=async()=>Va("/empresas/me"),ri=async e=>Ha("/empresas/me",e);function ii({empresa:t,onClose:s,onSave:a}){const[r,i]=e.useState({nome:"",tipoSistema:"casa-repouso",cnpj:"",email:"",telefone:"",endereco:"",plano:"basico",ativo:!0}),[n,l]=e.useState(!1),o=e=>e?"basic"===e?"basico":"pro"===e?"profissional":"enterprise"===e?"empresa":e:"basico";e.useEffect(()=>{t&&i({nome:t.nome||"",tipoSistema:t.tipoSistema||"casa-repouso",cnpj:t.cnpj||"",email:t.email||"",telefone:t.telefone||"",endereco:t.endereco||"",plano:o(t.plano),ativo:"boolean"==typeof t.ativo?t.ativo:!t.status||"ativo"===t.status})},[t]);const c=Boolean(t&&t.id);return _e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:_e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[_e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[_e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t?"Editar Empresa":"Nova Empresa"}),_e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-xl transition-colors",children:_e.jsx(F,{size:24})})]}),_e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{let e;if(c){const t={nome:r.nome,cnpj:r.cnpj,email:r.email,telefone:r.telefone,endereco:r.endereco};e=await ri(t),f.success(ir("update","Empresa",{gender:"f",suffix:"!"}))}else{const t={nome:r.nome,tipoSistema:r.tipoSistema,cnpj:r.cnpj,email:r.email,telefone:r.telefone,endereco:r.endereco,plano:o(r.plano),ativo:Boolean(r.ativo)};e=await ti(t),f.success(ir("create","Empresa",{gender:"f",suffix:"!"}))}a(e),s()}catch(t){f.error(or(t,nr("save","empresa")))}finally{l(!1)}},className:"p-6 space-y-4",children:[_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Empresa *"}),_e.jsx("input",{type:"text",required:!0,className:"input",value:r.nome,onChange:e=>i({...r,nome:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Sistema *"}),_e.jsxs("select",{className:"input",value:r.tipoSistema,onChange:e=>i({...r,tipoSistema:e.target.value}),required:!0,children:[_e.jsx("option",{value:"casa-repouso",children:"Casa de Repouso"}),_e.jsx("option",{value:"fisioterapia",children:"Fisioterapia"}),_e.jsx("option",{value:"petshop",children:"Petshop"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CNPJ *"}),_e.jsx("input",{type:"text",required:!0,className:"input",value:r.cnpj,onChange:e=>i({...r,cnpj:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-mail *"}),_e.jsx("input",{type:"email",required:!0,className:"input",value:r.email,onChange:e=>i({...r,email:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone"}),_e.jsx("input",{type:"tel",className:"input",value:r.telefone,onChange:e=>i({...r,telefone:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plano"}),_e.jsxs("select",{className:"input",value:r.plano,onChange:e=>i({...r,plano:e.target.value}),children:[_e.jsx("option",{value:"basico",children:"Básico"}),_e.jsx("option",{value:"profissional",children:"Profissional"}),_e.jsx("option",{value:"empresa",children:"Empresa"})]})]}),_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endereço"}),_e.jsx("input",{type:"text",className:"input",value:r.endereco,onChange:e=>i({...r,endereco:e.target.value})})]}),_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),_e.jsxs("select",{className:"input",value:r.ativo?"ativo":"inativo",onChange:e=>i({...r,ativo:"ativo"===e.target.value}),children:[_e.jsx("option",{value:"ativo",children:"Ativo"}),_e.jsx("option",{value:"inativo",children:"Inativo"})]})]})]}),_e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[_e.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary flex-1",disabled:n,children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",disabled:n,children:n?"Salvando...":"Salvar"})]})]})]})})}function ni(){const{user:t}=Za(),[s,a]=e.useState([]),[r,i]=e.useState(!0),[n,l]=e.useState("comfortable"),[o,c]=e.useState(!1),[d,m]=e.useState(null),u="superadmin"===(null==t?void 0:t.role);e.useEffect(()=>{u?p():f.error(lr("accessDenied"))},[u]);const p=async()=>{try{i(!0);const e=await ei(),t=Array.isArray(e)?e:e.empresas||[];a(t)}catch(e){f.error(nr("load","empresas"))}finally{i(!1)}},h=async(e,t)=>{const s=`Tem certeza que deseja excluir a empresa "${t}"?\n\nEsta ação não pode ser desfeita e todos os dados associados serão perdidos.`;if(window.confirm(s))try{m(e),await si(e),f.success(ir("delete","Empresa",{gender:"f"})),p()}catch(a){f.error(nr("delete","empresa"))}finally{m(null)}};return u?_e.jsxs("div",{className:"space-y-8",children:[_e.jsxs(br,{label:"Gestão",title:"Empresas",subtitle:"Gerencie as empresas cadastradas no sistema.",children:[_e.jsxs("button",{type:"button",onClick:p,className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar lista"]}),_e.jsx("div",{className:"hidden md:block"})]}),_e.jsx(Rr,{title:"Lista de Empresas",actions:_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[_e.jsx("span",{children:"Densidade:"}),_e.jsx("button",{type:"button",onClick:()=>l(e=>"comfortable"===e?"compact":"comfortable"),className:"px-3 py-1 rounded-full text-xs font-semibold transition-colors "+("comfortable"===n?"bg-white shadow-sm text-primary-700 ring-1 ring-slate-200":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:"comfortable"===n?"Confortável":"Compacta"})]}),children:r?_e.jsx("div",{className:"flex justify-center py-8",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:s.map(e=>{const t="boolean"==typeof e.ativo?e.ativo:"ativo"===e.status;return _e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"font-semibold text-slate-900 dark:text-gray-100",children:e.nome}),_e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CNPJ: ",e.cnpj||"-"]}),_e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:e.email||"-"})]}),_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+(t?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-red-50 text-red-700 border-red-100"),children:t?"Ativo":"Inativo"})]}),_e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-semibold bg-primary-50 text-primary-700 border border-primary-100 uppercase",children:e.plano||"basico"}),_e.jsx("button",{onClick:()=>h(e.id,e.nome),disabled:d===e.id,className:"p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-red-500 to-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Excluir Empresa","aria-label":"Excluir empresa",children:d===e.id?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):_e.jsx(H,{size:18})})]})]},e.id)})}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Nome","CNPJ","Email","Plano","Status","Ações"]}),_e.jsx(qr,{children:s.map(e=>{const t="boolean"==typeof e.ativo?e.ativo:"ativo"===e.status;return _e.jsxs(Lr,{children:[_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("div",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.nome})}),_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:e.cnpj||"-"})}),_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("span",{className:"text-slate-600 dark:text-gray-300",children:e.email||"-"})}),_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-semibold bg-primary-50 text-primary-700 border border-primary-100 uppercase",children:e.plano||"basico"})}),_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full font-medium border "+(t?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-red-50 text-red-700 border-red-100"),children:t?"Ativo":"Inativo"})}),_e.jsx(Fr,{className:"compact"===n?"py-3 text-sm":"py-4",children:_e.jsx("div",{className:"flex gap-2",children:_e.jsxs("button",{onClick:()=>h(e.id,e.nome),disabled:d===e.id,className:"group relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-red-500 to-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Excluir Empresa","aria-label":"Excluir empresa",children:[d===e.id?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):_e.jsx(H,{size:18}),_e.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:"Excluir"})]})})})]},e.id)})})]})]}):_e.jsx(Er,{icon:x,title:"Nenhuma empresa encontrada",description:"Comece cadastrando uma nova empresa.",actionLabel:"Nova Empresa",onAction:()=>c(!0)})}),o&&_e.jsx(ii,{onClose:()=>c(!1),onSave:p})]}):_e.jsx(Xr,{message:"Apenas Super Administradores podem acessar esta página.",messageClassName:"text-gray-600"})}function li(){var t,s;const{user:a}=Za(),[r,i]=e.useState("perfil"),[n,l]=e.useState(null),[o,c]=e.useState(!0),[d,m]=e.useState(!1),[x,u]=e.useState(!1),[h,b]=e.useState(!1),[g,j]=e.useState({nome:(null==a?void 0:a.nome)||"",email:(null==a?void 0:a.email)||"",telefone:(null==a?void 0:a.telefone)||"",especialidade:(null==a?void 0:a.especialidade)||"",crm:(null==a?void 0:a.crm)||"",crmUf:(null==a?void 0:a.crmUf)||""}),[v,y]=e.useState({nome:"",cnpj:"",endereco:"",telefone:""}),[N,w]=e.useState("admin"===(null==a?void 0:a.role));e.useEffect(()=>{j({nome:(null==a?void 0:a.nome)||"",email:(null==a?void 0:a.email)||"",telefone:(null==a?void 0:a.telefone)||"",especialidade:(null==a?void 0:a.especialidade)||"",crm:(null==a?void 0:a.crm)||"",crmUf:(null==a?void 0:a.crmUf)||""})},[a]);const C=e.useCallback(async()=>{c(!0);try{const e=await Qr();l(e)}catch(e){f.error("Não foi possível carregar o resumo do perfil")}finally{c(!1)}},[]),k=e.useCallback(async()=>{if("admin"===(null==a?void 0:a.role)){w(!0);try{const e=await ai();y({nome:(null==e?void 0:e.nome)||"",cnpj:(null==e?void 0:e.cnpj)||"",endereco:(null==e?void 0:e.endereco)||"",telefone:(null==e?void 0:e.telefone)||""})}catch(e){f.error("Não foi possível carregar os dados da empresa")}finally{w(!1)}}},[null==a?void 0:a.role]);e.useEffect(()=>{C()},[C]),e.useEffect(()=>{"admin"===(null==a?void 0:a.role)&&k()},[null==a?void 0:a.role,k]);const S=e.useCallback(e=>{Za.setState(t=>{const s={...t.user||{},...e};return localStorage.setItem("user",JSON.stringify(s)),{user:s}})},[]),E=[{id:"perfil",nome:"Perfil",icon:I},{id:"empresa",nome:"Empresa",icon:Y},{id:"seguranca",nome:"Segurança",icon:p},{id:"notificacoes",nome:"Notificações",icon:X}],A=(null==n?void 0:n.lastUpdate)?new Date(n.lastUpdate).toLocaleDateString("pt-BR"):"Hoje",P=(null==n?void 0:n.securityScore)?Math.round(100*n.securityScore):0;return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Central",title:"Configurações",subtitle:"Personalize o perfil, mantenha os dados da empresa atualizados e revise as preferências de segurança e comunicação em um só lugar."}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_e.jsxs("div",{className:"card bg-gradient-to-br from-primary-50 to-white",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-primary-600",children:"Perfil"}),_e.jsx("p",{className:"text-3xl font-semibold text-slate-900 mt-2",children:(null==a?void 0:a.nome)||"Usuário"}),_e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Última atualização: ",A]})]}),_e.jsxs("div",{className:"card",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Segurança"}),_e.jsx("p",{className:"text-3xl font-semibold text-slate-900 mt-2",children:o?"---":`${P}%`}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:o?"Carregando resumo de segurança...":(null==(t=null==n?void 0:n.pendingSecurityTasks)?void 0:t.length)?"Complete as ações recomendadas para atingir 100%.":"Nenhuma pendência crítica identificada."}),(null==(s=null==n?void 0:n.pendingSecurityTasks)?void 0:s.length)>0&&_e.jsx("ul",{className:"text-xs text-slate-500 mt-3 space-y-1 list-disc list-inside",children:n.pendingSecurityTasks.slice(0,2).map(e=>_e.jsx("li",{children:e},e))})]}),_e.jsxs("div",{className:"card",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Plano"}),_e.jsx("p",{className:"text-xl font-semibold text-slate-900 mt-2",children:(null==n?void 0:n.planLabel)||"Profissional"}),_e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:(null==n?void 0:n.planDescription)||"Suporte prioritário e integrações liberadas."})]})]}),_e.jsx("div",{className:"flex flex-wrap gap-2 bg-white/70 border border-slate-100 rounded-2xl p-2",children:E.map(e=>{const t=e.icon;return _e.jsxs("button",{onClick:()=>i(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm transition-all "+(r===e.id?"bg-gradient-to-r from-primary-50 to-primary-100 text-primary-700 shadow-inner":"text-slate-500 hover:text-slate-900"),children:[_e.jsx(t,{size:18}),_e.jsx("span",{className:"hidden sm:inline",children:e.nome})]},e.id)})}),"perfil"===r&&_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"border-b border-slate-100 pb-4 mb-6",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400 mb-1",children:"Perfil"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Dados Pessoais"})]}),_e.jsxs("form",{onSubmit:async e=>{var t,s;e.preventDefault(),m(!0);const a={nome:g.nome,email:g.email,telefone:g.telefone,especialidade:g.especialidade,crm:g.crm};try{const e=await Kr(a),t=(null==e?void 0:e.usuario)||a;S(t),f.success(ir("update","Perfil",{suffix:"!"})),C()}catch(r){const e=(null==(s=null==(t=null==r?void 0:r.response)?void 0:t.data)?void 0:s.error)||"Erro ao atualizar perfil";f.error(e)}finally{m(!1)}},className:"space-y-4",children:[_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Nome Completo"}),_e.jsx("input",{type:"text",className:"input",value:g.nome,onChange:e=>j({...g,nome:e.target.value}),required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"E-mail"}),_e.jsx("input",{type:"email",className:"input",value:g.email,onChange:e=>j({...g,email:e.target.value}),required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Telefone"}),_e.jsx("input",{type:"tel",className:"input",value:g.telefone,onChange:e=>j({...g,telefone:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Especialidade"}),_e.jsx("input",{type:"text",className:"input",value:g.especialidade,onChange:e=>j({...g,especialidade:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"CRM"}),_e.jsx("input",{type:"text",className:"input",value:g.crm,onChange:e=>j({...g,crm:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"UF do CRM"}),_e.jsx("input",{type:"text",className:"input",maxLength:"2",value:g.crmUf,onChange:e=>j({...g,crmUf:e.target.value.toUpperCase()})})]})]}),_e.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2 disabled:opacity-60",disabled:d,children:[_e.jsx(Z,{size:18}),d?"Salvando...":"Salvar Alterações"]})]})]}),"empresa"===r&&"admin"===(null==a?void 0:a.role)&&_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"border-b border-slate-100 pb-4 mb-6",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400 mb-1",children:"Organização"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Dados da Empresa"})]}),N&&_e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Carregando dados cadastrados..."}),_e.jsxs("form",{onSubmit:async e=>{var t,s;if(e.preventDefault(),"admin"===(null==a?void 0:a.role)){u(!0);try{await ri(v),f.success("Dados da empresa atualizados!"),k()}catch(r){const e=(null==(s=null==(t=null==r?void 0:r.response)?void 0:t.data)?void 0:s.error)||"Erro ao atualizar empresa";f.error(e)}finally{u(!1)}}},className:"space-y-4",children:[_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Nome da Empresa"}),_e.jsx("input",{type:"text",className:"input",value:v.nome,onChange:e=>y({...v,nome:e.target.value}),disabled:N,required:!0})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"CNPJ"}),_e.jsx("input",{type:"text",className:"input",value:v.cnpj,onChange:e=>y({...v,cnpj:e.target.value}),disabled:N,required:!0})]}),_e.jsxs("div",{className:"md:col-span-2",children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Endereço"}),_e.jsx("input",{type:"text",className:"input",value:v.endereco,onChange:e=>y({...v,endereco:e.target.value}),disabled:N})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Telefone"}),_e.jsx("input",{type:"tel",className:"input",value:v.telefone,onChange:e=>y({...v,telefone:e.target.value}),disabled:N})]})]}),_e.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2 disabled:opacity-60",disabled:x||N,children:[_e.jsx(Z,{size:18}),x?"Salvando...":"Salvar Alterações"]})]})]}),"seguranca"===r&&_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"border-b border-slate-100 pb-4 mb-6",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400 mb-1",children:"Segurança"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Alterar Senha"})]}),_e.jsxs("form",{onSubmit:async e=>{var t,s;if(e.preventDefault(),!(null==a?void 0:a.id))return void f.error("Usuário não identificado");const r=e.currentTarget,i=r.senhaAtual.value,n=r.novaSenha.value;if(n===r.confirmaSenha.value)try{b(!0),await Jr(a.id,i,n),f.success("Senha alterada com sucesso!"),r.reset()}catch(l){const e=(null==(s=null==(t=null==l?void 0:l.response)?void 0:t.data)?void 0:s.error)||"Erro ao alterar senha";f.error(e)}finally{b(!1)}else f.error(lr("passwordMismatch"))},className:"space-y-4 max-w-md",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Senha Atual"}),_e.jsx("input",{type:"password",name:"senhaAtual",required:!0,className:"input"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Nova Senha"}),_e.jsx("input",{type:"password",name:"novaSenha",required:!0,minLength:"6",className:"input"})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Confirmar Nova Senha"}),_e.jsx("input",{type:"password",name:"confirmaSenha",required:!0,minLength:"6",className:"input"})]}),_e.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2 disabled:opacity-60",disabled:h,children:[_e.jsx(p,{size:18}),h?"Atualizando...":"Alterar Senha"]})]})]}),"notificacoes"===r&&_e.jsxs("div",{className:"card",children:[_e.jsxs("div",{className:"border-b border-slate-100 pb-4 mb-6",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400 mb-1",children:"Alertas"}),_e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Preferências de Notificações"})]}),_e.jsxs("div",{className:"space-y-4",children:[_e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[_e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded text-primary-600"}),_e.jsx("span",{className:"text-gray-700",children:"Receber e-mails sobre novas prescrições"})]}),_e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[_e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded text-primary-600"}),_e.jsx("span",{className:"text-gray-700",children:"Notificar sobre novos pacientes"})]}),_e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[_e.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),_e.jsx("span",{className:"text-gray-700",children:"Lembretes de consultas"})]}),_e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[_e.jsx("input",{type:"checkbox",className:"rounded text-primary-600"}),_e.jsx("span",{className:"text-gray-700",children:"Atualizações do sistema"})]}),_e.jsxs("button",{className:"btn btn-primary flex items-center gap-2 mt-6",children:[_e.jsx(Z,{size:18}),"Salvar Preferências"]})]})]})]})}const oi=async e=>Va("/agendamentos",{params:e}),ci=async e=>Ga("/agendamentos",e),di=async(e,t)=>Ha(`/agendamentos/${e}`,t),mi=async e=>Ja(`/agendamentos/${e}`);function xi(){const[t,s]=e.useState([]),[a,r]=e.useState([]),[i,n]=e.useState(!0),[l,o]=e.useState(""),[c,d]=e.useState(!1),[m,x]=e.useState(null),[u,p]=e.useState(null),[h,f]=e.useState(null),[b,g]=e.useState(""),[j,v]=e.useState(null),[y,N]=e.useState(!1),[k,S]=e.useState({tipo:"Compromisso",titulo:"",data:"",horario:"",participante:"",pacienteId:"",local:"",descricao:""});e.useEffect(()=>{E(),A()},[]);const E=async()=>{try{n(!0);const e=await oi();s(Array.isArray(e)?e:[])}catch(e){ee.error("Erro ao carregar agendamentos"),s([])}finally{n(!1)}},A=async()=>{try{const e=await vr();r(Array.isArray(e)?e:[])}catch(e){r([])}},z=e=>{const t=e.dataHora?new Date(e.dataHora):new Date,s=t.toISOString().split("T")[0],r=t.toTimeString().split(" ")[0].substring(0,5),i=a.find(t=>t.id===e.pacienteId);S({tipo:e.tipo||"Compromisso",titulo:e.titulo||"",data:s,horario:r,participante:e.participante||(null==i?void 0:i.nome)||"",pacienteId:e.pacienteId||"",local:e.local||"",descricao:e.observacoes||""}),i&&(v(i),g(i.nome)),x(e.id||e._id),d(!0)},D=async(e,t)=>{if(window.confirm(`Deseja realmente excluir "${t}"?`))try{p(e),await mi(e),ee.success("Agendamento excluído com sucesso!"),E()}catch(s){ee.error("Erro ao excluir agendamento")}finally{p(null)}},T=()=>{S({tipo:"Compromisso",titulo:"",data:"",horario:"",participante:"",pacienteId:"",local:"",descricao:""}),x(null),g(""),v(null),N(!1)},O=(e="Compromisso")=>{T(),S(t=>({...t,tipo:e})),d(!0)},q=e=>{switch(e){case"Consulta":return _e.jsx(se,{size:18});case"Reunião":return _e.jsx(w,{size:18});case"Exame":return _e.jsx(C,{size:18});default:return _e.jsx(P,{size:18})}},L=e=>{if(!e)return"Data não informada";try{const t=new Date(e);return isNaN(t.getTime())?"Data inválida":t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return"Data inválida"}},B=e=>{if(!e)return"--:--";try{const t=new Date(e);return isNaN(t.getTime())?"--:--":t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch(t){return"--:--"}},M=t.filter(e=>{var t;return e.titulo.toLowerCase().includes(l.toLowerCase())||(null==(t=e.participante)?void 0:t.toLowerCase().includes(l.toLowerCase()))}),G={total:t.length,confirmados:t.filter(e=>"confirmado"===e.status).length,pendentes:t.filter(e=>"agendado"===e.status).length,hoje:t.filter(e=>{const t=new Date(e.dataHora),s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length},J=async(e,t,s)=>{if(t!==s)try{f(e),await di(e,{status:s}),ee.success("Status atualizado com sucesso!"),E()}catch(a){ee.error("Erro ao atualizar status")}finally{f(null)}};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Institucional",title:"Agenda",subtitle:"Gerencie consultas, reuniões e compromissos da instituição de forma centralizada.",children:_e.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-auto gap-3",children:[_e.jsxs("button",{onClick:()=>O("Reunião"),className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(w,{size:18})," Nova Reunião"]}),_e.jsxs("button",{onClick:()=>O("Compromisso"),className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-600/20",children:[_e.jsx($,{size:18})," Novo Compromisso"]})]})}),_e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[_e.jsx(gr,{icon:P,label:"Total",value:G.total,description:"Agendamentos futuros",color:"primary"}),_e.jsx(gr,{icon:V,label:"Confirmados",value:G.confirmados,description:"Confirmados",color:"emerald"}),_e.jsx(gr,{icon:_,label:"Pendentes",value:G.pendentes,description:"Aguardando confirmação",color:"orange"}),_e.jsx(gr,{icon:R,label:"Hoje",value:G.hoje,description:"Eventos para hoje",color:"purple"})]}),_e.jsx(Sr,{searchTerm:l,onSearchChange:o,placeholder:"Buscar por título ou participante..."}),_e.jsx(Rr,{title:"Agendamentos",children:i?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):M.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:M.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("Consulta"===e.tipo?"bg-blue-50 text-blue-600":"Reunião"===e.tipo?"bg-purple-50 text-purple-600":"Exame"===e.tipo?"bg-amber-50 text-amber-600":"bg-primary-50 text-primary-600"),children:q(e.tipo)}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-semibold text-slate-900 dark:text-gray-100",children:e.titulo}),_e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:e.tipo})]})]}),_e.jsxs("select",{value:e.status,onChange:t=>J(e.id||e._id,e.status,t.target.value),disabled:h===(e.id||e._id),className:"text-xs font-bold px-2 py-1 rounded-full border-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed "+("agendado"===e.status?"bg-primary-50 text-primary-700":"confirmado"===e.status?"bg-emerald-50 text-emerald-700":"cancelado"===e.status?"bg-red-50 text-red-700":"bg-slate-100 text-slate-700"),children:[_e.jsx("option",{value:"agendado",children:"Agendado"}),_e.jsx("option",{value:"confirmado",children:"Confirmado"}),_e.jsx("option",{value:"cancelado",children:"Cancelado"}),_e.jsx("option",{value:"concluido",children:"Concluído"})]})]}),_e.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[_e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-gray-300",children:[_e.jsx(R,{size:14}),_e.jsxs("span",{children:[L(e.dataHora)," às ",B(e.dataHora)]})]}),e.participante?_e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-gray-300",children:[_e.jsx(I,{size:14}),_e.jsx("span",{children:e.participante})]}):_e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 dark:text-gray-500",children:[_e.jsx(I,{size:14}),_e.jsx("span",{className:"italic",children:"Sem participante"})]}),e.local&&_e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-gray-300",children:[_e.jsx(U,{size:14}),_e.jsx("span",{children:e.local})]})]}),_e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3",children:[_e.jsx(Pr,{onClick:()=>z(e),icon:te,variant:"primary",tooltip:"Editar",title:"Editar agendamento",ariaLabel:"Editar agendamento"}),_e.jsx(Pr,{onClick:()=>D(e.id||e._id,e.titulo),icon:H,variant:"danger",tooltip:"Excluir",title:"Excluir agendamento",ariaLabel:"Excluir agendamento",disabled:u===(e.id||e._id),loading:u===(e.id||e._id)})]})]},e.id||e._id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Tipo","Título","Data/Hora","Participante","Local","Status","Ações"]}),_e.jsx(qr,{children:M.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-gray-200 font-medium",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("Consulta"===e.tipo?"bg-blue-50 text-blue-600":"Reunião"===e.tipo?"bg-purple-50 text-purple-600":"Exame"===e.tipo?"bg-amber-50 text-amber-600":"bg-primary-50 text-primary-600"),children:q(e.tipo)}),_e.jsx("span",{className:"text-sm",children:e.tipo})]})}),_e.jsx(Fr,{children:_e.jsx("span",{className:"font-semibold text-slate-900 dark:text-gray-100",children:e.titulo})}),_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex flex-col",children:[_e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-200",children:L(e.dataHora)}),_e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:B(e.dataHora)})]})}),_e.jsx(Fr,{children:e.participante?_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 dark:bg-gray-700 flex items-center justify-center text-slate-500 dark:text-gray-300 text-xs font-bold",children:e.participante.charAt(0).toUpperCase()}),_e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-300",children:e.participante})]}):_e.jsx("span",{className:"text-slate-400 dark:text-gray-500 text-sm italic",children:"Sem participante"})}),_e.jsx(Fr,{children:e.local?_e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-gray-300",children:[_e.jsx(U,{size:14,className:"text-slate-400"}),_e.jsx("span",{className:"text-sm",children:e.local})]}):_e.jsx("span",{className:"text-slate-400 dark:text-gray-500 text-sm",children:"-"})}),_e.jsx(Fr,{children:_e.jsxs("select",{value:e.status,onChange:t=>J(e.id||e._id,e.status,t.target.value),disabled:h===(e.id||e._id),className:"text-xs font-bold px-3 py-1 rounded-full border-none focus:ring-2 focus:ring-primary-500 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed "+("agendado"===e.status?"bg-primary-50 text-primary-700 ring-1 ring-primary-100":"confirmado"===e.status?"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100":"cancelado"===e.status?"bg-red-50 text-red-700 ring-1 ring-red-100":"bg-slate-100 text-slate-700 ring-1 ring-slate-200"),children:[_e.jsx("option",{value:"agendado",children:"Agendado"}),_e.jsx("option",{value:"confirmado",children:"Confirmado"}),_e.jsx("option",{value:"cancelado",children:"Cancelado"}),_e.jsx("option",{value:"concluido",children:"Concluído"})]})}),_e.jsx(Fr,{className:"text-right",children:_e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_e.jsx(Pr,{onClick:()=>z(e),icon:te,variant:"primary",tooltip:"Editar",title:"Editar agendamento",ariaLabel:"Editar agendamento"}),_e.jsx(Pr,{onClick:()=>D(e.id||e._id,e.titulo),icon:H,variant:"danger",tooltip:"Excluir",title:"Excluir agendamento",ariaLabel:"Excluir agendamento",disabled:u===(e.id||e._id),loading:u===(e.id||e._id)})]})})]},e.id||e._id))})]})]}):_e.jsx("div",{className:"p-8",children:_e.jsx(Er,{icon:P,title:"Nenhum agendamento encontrado",description:"Nenhum agendamento encontrado."})})}),c&&_e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[_e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-gray-700 flex justify-between items-start bg-slate-50/50 dark:bg-gray-700/50",children:[_e.jsxs("div",{children:[_e.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-gray-100",children:m?"Editar Agendamento":"Novo Agendamento"}),_e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:"Preencha os dados do compromisso."})]}),_e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-gray-300 p-1 hover:bg-slate-100 dark:hover:bg-gray-600 rounded-lg transition",children:_e.jsx(F,{size:24})})]}),_e.jsxs("form",{className:"overflow-y-auto p-6 space-y-5 custom-scrollbar",onSubmit:async e=>{e.preventDefault();try{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=(null==e?void 0:e.empresaId)||"",s=k.data&&k.horario?new Date(`${k.data}T${k.horario}:00`).toISOString():"";let a=k.pacienteId;if(a&&""!==a||!j||!j.id||(a=j.id),!a)return void ee.error("Selecione um paciente da lista!");if(!t)return void ee.error("Empresa não encontrada no usuário logado!");if(!k.titulo)return void ee.error("Título é obrigatório!");if(!s)return void ee.error("Data e horário obrigatórios!");const r={titulo:k.titulo,tipo:k.tipo,pacienteId:a,empresaId:t,local:k.local,observacoes:k.descricao,dataHora:s};m?(await di(m,r),ee.success("Agendamento atualizado com sucesso!")):(await ci(r),ee.success("Agendamento criado com sucesso!")),d(!1),T(),E()}catch(t){ee.error("Erro ao salvar agendamento")}},children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Tipo"}),_e.jsxs("select",{className:"input w-full",value:k.tipo,onChange:e=>S({...k,tipo:e.target.value}),children:[_e.jsx("option",{children:"Compromisso"}),_e.jsx("option",{children:"Reunião"}),_e.jsx("option",{children:"Consulta"}),_e.jsx("option",{children:"Exame"}),_e.jsx("option",{children:"Outro"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Título *"}),_e.jsx("input",{type:"text",required:!0,className:"input w-full",placeholder:"Título do compromisso",value:k.titulo,onChange:e=>S({...k,titulo:e.target.value})})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Data *"}),_e.jsx("input",{type:"date",required:!0,className:"input w-full",value:k.data,onChange:e=>S({...k,data:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Horário *"}),_e.jsx("input",{type:"time",required:!0,className:"input w-full",value:k.horario,onChange:e=>S({...k,horario:e.target.value})})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Paciente/Residente *"}),_e.jsxs("div",{className:"relative",children:[_e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 z-10",size:18}),_e.jsx("input",{type:"text",className:"input w-full pl-10 pr-10",placeholder:"Buscar residente cadastrado...",value:b,onChange:e=>{g(e.target.value),N(!0),""===e.target.value&&(v(null),S({...k,pacienteId:"",participante:""}))},onFocus:()=>N(!0),onBlur:()=>{setTimeout(()=>N(!1),200)},required:!0}),j&&_e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center",children:_e.jsx(V,{size:18,className:"text-green-500"})}),y&&b&&_e.jsx("div",{className:"absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-600 rounded-lg shadow-xl z-20 max-h-72 overflow-y-auto",children:0===a.length?_e.jsxs("div",{className:"px-4 py-6 text-center",children:[_e.jsx(_,{className:"mx-auto mb-2 text-slate-400",size:24}),_e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:"Nenhum residente cadastrado"})]}):_e.jsxs(_e.Fragment,{children:[a.filter(e=>{var t;return e.nome.toLowerCase().includes(b.toLowerCase())||(null==(t=e.cpf)?void 0:t.includes(b))}).map(e=>_e.jsx("div",{className:"px-4 py-3 cursor-pointer hover:bg-primary-50 dark:hover:bg-gray-700 transition-colors border-b border-slate-100 dark:border-gray-700 last:border-0 "+((null==j?void 0:j.id)===e.id?"bg-primary-100 dark:bg-gray-700":""),onClick:()=>{v(e),S({...k,pacienteId:e.id,participante:e.nome}),g(e.nome),N(!1)},children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-600 dark:text-primary-300 font-bold text-sm flex-shrink-0",children:e.nome.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase()}),_e.jsxs("div",{className:"flex-1 min-w-0",children:[_e.jsx("p",{className:"font-medium text-slate-700 dark:text-gray-200 truncate",children:e.nome}),_e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.cpf&&_e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["CPF: ",e.cpf]}),e.idade&&_e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["• ",e.idade," anos"]})]})]})]})},e.id)),0===a.filter(e=>{var t;return e.nome.toLowerCase().includes(b.toLowerCase())||(null==(t=e.cpf)?void 0:t.includes(b))}).length&&_e.jsxs("div",{className:"px-4 py-6 text-center",children:[_e.jsx(_,{className:"mx-auto mb-2 text-slate-400",size:24}),_e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-1",children:"Nenhum residente encontrado"}),_e.jsx("p",{className:"text-xs text-slate-400 dark:text-gray-500",children:"Tente buscar por nome ou CPF"})]})]})})]}),j&&_e.jsx("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:_e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_e.jsx(V,{size:16,className:"text-green-600 dark:text-green-400 flex-shrink-0"}),_e.jsxs("span",{className:"font-medium text-green-700 dark:text-green-300",children:["Residente selecionado: ",j.nome]})]})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Local"}),_e.jsxs("div",{className:"relative",children:[_e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),_e.jsx("input",{type:"text",className:"input w-full pl-10",placeholder:"Local do evento",value:k.local,onChange:e=>S({...k,local:e.target.value})})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-300 mb-1.5",children:"Descrição"}),_e.jsx("textarea",{className:"input w-full min-h-[100px] py-3",placeholder:"Detalhes adicionais...",value:k.descricao,onChange:e=>S({...k,descricao:e.target.value})})]}),_e.jsxs("div",{className:"pt-4 flex gap-3 border-t border-slate-100 dark:border-gray-700 mt-2",children:[_e.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn btn-secondary flex-1 py-2.5",children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"btn btn-primary flex-1 py-2.5 shadow-lg shadow-primary-500/20",children:m?"Salvar Alterações":"Agendar"})]})]})]})})]})}function ui(){const[t,s]=e.useState("todos"),[a,r]=e.useState(""),[i,n]=e.useState([]),[l,o]=e.useState(!0),[c,d]=e.useState(!1);e.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const e=new Date,t=new Date;t.setDate(e.getDate()+30);const[s,a]=await Promise.all([oi({dataInicio:e.toISOString(),dataFim:t.toISOString()}),_r({status:"ativa"})]),r=(Array.isArray(s)?s:[]).map(e=>{const t=e.dataHoraInicio?new Date(e.dataHoraInicio):new Date,s=!isNaN(t.getTime());return{id:e.id||e._id,type:"Consulta"===e.tipo?"consultas":"Exame"===e.tipo?"exames":"outros",originalType:e.tipo,title:e.titulo,subtitle:e.participante||"Sem participante",date:s?t:new Date,status:e.status,details:e.local,source:"agendamento"}}),i=a||{},l=(Array.isArray(i)?i:Array.isArray(i.prescricoes)?i.prescricoes:[]).map(e=>{var t,s,a,r,i;const n=e.dataEmissao||e.createdAt||(new Date).toISOString(),l=new Date(n),o=!isNaN(l.getTime());return{id:e.id||e._id,type:"medicacoes",originalType:"Medicação",title:`Prescrição: ${(null==(s=null==(t=e.medicamentos)?void 0:t[0])?void 0:s.nome)||"Medicamentos diversos"}`,subtitle:e.pacienteNome||(null==(a=e.pacienteId)?void 0:a.nome)||"Paciente não identificado",date:o?l:new Date,status:e.status,details:`${(null==(r=e.medicamentos)?void 0:r.length)||0} ${1===(null==(i=e.medicamentos)?void 0:i.length)?"medicamento":"medicamentos"}`,source:"prescricao"}}),c=[...r,...l].sort((e,t)=>e.date-t.date);n(c)}catch(e){f.error(nr("load","cronograma"))}finally{o(!1)}},x=i.filter(e=>{const s="todos"===t||e.type===t||"consultas"===t&&"outros"===e.type,r=e.title.toLowerCase().includes(a.toLowerCase())||e.subtitle.toLowerCase().includes(a.toLowerCase());return s&&r}),u=[{id:"todos",label:"Todos",icon:P},{id:"medicacoes",label:"Medicações",icon:Q},{id:"consultas",label:"Consultas",icon:se},{id:"exames",label:"Exames",icon:C}],p={total:i.length,consultas:i.filter(e=>"consultas"===e.type).length,exames:i.filter(e=>"exames"===e.type).length,medicacoes:i.filter(e=>"medicacoes"===e.type).length};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Rotina",title:"Cronograma",subtitle:"Acompanhe a linha do tempo de medicações, consultas e exames dos residentes.",children:_e.jsxs("button",{onClick:()=>d(!c),className:"btn btn-secondary flex items-center justify-center gap-2 "+(c?"bg-slate-100":""),children:[_e.jsx(ae,{size:18}),_e.jsx("span",{className:"hidden sm:inline",children:"Legendas"})]})}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:P,label:"Total",value:p.total,description:"Eventos agendados",color:"primary"}),_e.jsx(gr,{icon:se,label:"Consultas",value:p.consultas,description:"Consultas médicas",color:"blue"}),_e.jsx(gr,{icon:Q,label:"Medicações",value:p.medicacoes,description:"Prescrições ativas",color:"purple"}),_e.jsx(gr,{icon:C,label:"Exames",value:p.exames,description:"Exames marcados",color:"orange"})]}),_e.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 items-center justify-between",children:[_e.jsx("div",{className:"flex p-1 bg-slate-100 rounded-xl w-full md:w-auto overflow-x-auto",children:u.map(e=>{const a=e.icon,r=t===e.id;return _e.jsxs("button",{onClick:()=>s(e.id),className:`\n                  flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap\n                  ${r?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}\n                `,children:[_e.jsx(a,{size:16}),e.label]},e.id)})}),_e.jsxs("div",{className:"relative w-full md:w-96",children:[_e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),_e.jsx("input",{type:"text",placeholder:"Buscar por título ou participante...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",value:a,onChange:e=>r(e.target.value)})]})]}),c&&_e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 p-4 bg-slate-50 rounded-2xl border border-slate-100 animate-in slide-in-from-top-2",children:[_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),_e.jsx("span",{className:"text-xs text-slate-600",children:"Agendado"})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),_e.jsx("span",{className:"text-xs text-slate-600",children:"Próximo (3 dias)"})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),_e.jsx("span",{className:"text-xs text-slate-600",children:"Amanhã"})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),_e.jsx("span",{className:"text-xs text-slate-600",children:"Hoje/Atrasado"})]}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),_e.jsx("span",{className:"text-xs text-slate-600",children:"Realizado"})]})]}),_e.jsx("div",{className:"space-y-4",children:l?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===x.length?_e.jsxs("div",{className:"card text-center py-16",children:[_e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:_e.jsx(P,{size:32,className:"text-slate-300"})}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Nenhum item encontrado"}),_e.jsx("p",{className:"text-slate-500 max-w-xs mx-auto mt-1",children:"Não há agendamentos ou prescrições para os filtros selecionados."})]}):_e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:x.map(e=>{const t=((e,t,s)=>{if("concluido"===t||"realizado"===t)return{label:"Realizado",color:"bg-emerald-100 text-emerald-700 border-emerald-200",dot:"bg-emerald-500"};if("medicacoes"===s)return{label:"Em Uso",color:"bg-primary-100 text-primary-700 border-primary-200",dot:"bg-primary-500"};const a=new Date;a.setHours(0,0,0,0);const r=new Date(e);r.setHours(0,0,0,0);const i=r-a,n=Math.ceil(i/864e5);return n<0?{label:"Atrasado",color:"bg-red-100 text-red-700 border-red-200",dot:"bg-red-500"}:0===n?{label:"Hoje",color:"bg-red-100 text-red-700 border-red-200",dot:"bg-red-500"}:1===n?{label:"Amanhã",color:"bg-amber-100 text-amber-800 border-amber-200",dot:"bg-amber-500"}:n<=3?{label:"Próximo",color:"bg-blue-100 text-blue-700 border-blue-200",dot:"bg-blue-500"}:{label:"Agendado",color:"bg-slate-100 text-slate-700 border-slate-200",dot:"bg-slate-400"}})(e.date,e.status,e.type),s=e.date&&!isNaN(e.date.getTime());return _e.jsxs("div",{className:"group bg-white p-4 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col",children:[_e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-100",children:[_e.jsx("span",{className:"text-xl font-bold text-slate-800 leading-none",children:s?e.date.getDate():"NaN"}),_e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:s?e.date.toLocaleDateString("pt-BR",{month:"short"}):""})]}),_e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold border ${t.color}`,children:[_e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.dot}`}),t.label]})]}),_e.jsx("div",{className:"mb-2",children:_e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider "+("medicacoes"===e.type?"bg-purple-50 text-purple-700":"consultas"===e.type?"bg-blue-50 text-blue-700":"bg-slate-100 text-slate-600"),children:["medicacoes"===e.type?_e.jsx(Q,{size:10}):"consultas"===e.type?_e.jsx(se,{size:10}):_e.jsx(C,{size:10}),e.originalType]})}),_e.jsx("h4",{className:"text-base font-bold text-slate-900 mb-3 line-clamp-2 group-hover:text-primary-700 transition-colors min-h-[3rem]",children:e.title}),_e.jsxs("div",{className:"space-y-2 mt-auto",children:[_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[_e.jsx(I,{size:14,className:"text-slate-400 shrink-0"}),_e.jsx("span",{className:"truncate",children:e.subtitle})]}),_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[_e.jsx(R,{size:14,className:"text-slate-400 shrink-0"}),_e.jsx("span",{children:s?e.date.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"Invalid Date"})]}),e.details&&_e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[_e.jsx(U,{size:14,className:"text-slate-400 shrink-0"}),_e.jsx("span",{className:"truncate",children:e.details})]})]})]},`${e.source}-${e.id}`)})})})]})}const pi=async()=>Va("/estoque/medicamentos"),hi=async e=>Ga("/estoque/medicamentos",e),fi=async e=>Ga("/estoque/medicamentos/movimentacao",e),bi=async()=>Va("/estoque/alimentos"),gi=async e=>Ga("/estoque/alimentos",e),ji=async e=>Ga("/estoque/alimentos/movimentacao",e),vi=async()=>Va("/estoque/stats"),yi=async(e="")=>Va(e?`/estoque/movimentacoes?tipo=${e}`:"/estoque/movimentacoes");function Ni(e,t=";"){return Array.isArray(e)&&0!==e.length?e.map(e=>function(e,t=";"){if(null==e)return"";const s=String(e);return s.includes('"')||s.includes("\n")||s.includes("\r")||s.includes(t)?`"${s.replaceAll('"','""')}"`:s}(e,t)).join(t):""}function wi({filename:e,lines:t,delimiter:s=";",includeBom:a=!0}={}){if(!e)throw new Error("Nome do arquivo é obrigatório");const r=function(e,t=";"){return Array.isArray(e)?e.map(e=>Ni(e,t)).join("\n"):""}(t,s),i=new Blob([a?"\ufeff":"",r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(i),l=document.createElement("a");l.setAttribute("href",n),l.setAttribute("download",e),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}function Ci(e){return null==e?"":String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function ki({title:e,bodyHtml:t,styles:s="",printDelayMs:a=250}={}){const r=window.open("","_blank");if(!r)throw new Error("Não foi possível abrir a janela de impressão (popup bloqueado?)");const i=`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>${Ci(e||"Relatório - Prescrimed")}</title>\n        <meta charset="utf-8" />\n        ${s?`<style>${s}</style>`:""}\n      </head>\n      <body>\n        ${t||""}\n      </body>\n    </html>\n  `;return r.document.open(),r.document.write(i),r.document.close(),setTimeout(()=>{r.print()},a),r}function Si(){const[t,s]=e.useState("medicamentos"),[a,r]=e.useState(null),[i,n]=e.useState([]),[l,o]=e.useState(null),[c,d]=e.useState([]),[m,x]=e.useState(!1),[u,p]=e.useState(!1),[h,b]=e.useState(""),[g,j]=e.useState({}),[v,y]=e.useState({quantidade:"",motivo:"",observacao:""});e.useEffect(()=>{N(),w()},[t]);const N=async()=>{p(!0);try{const e="medicamentos"===t?await pi():await bi(),s=Array.isArray(e)?e:e.items||e.medicamentos||e.alimentos||[];n(s)}catch(e){f.error(nr("load","itens"))}finally{p(!1)}},w=async()=>{try{const e=await vi();o(e)}catch(e){}},C=async e=>{e.preventDefault();try{"medicamentos"===t?await hi(g):await gi(g),f.success("Cadastrado com sucesso!"),S(),N()}catch(s){f.error(nr("create","item"))}},k=async e=>{e.preventDefault();try{const e={...v,tipo:a,["medicamentos"===t?"medicamentoId":"alimentoId"]:v.itemId};"medicamentos"===t?await fi(e):await ji(e),f.success("Movimentação registrada!"),S(),N()}catch(s){f.error(or(s,nr("save","movimentação")))}},S=()=>{r(null),j({}),y({quantidade:"",motivo:"",observacao:""})},E=i.filter(e=>e.nome.toLowerCase().includes(h.toLowerCase())),A={total:i.length,baixoEstoque:i.filter(e=>e.quantidade<=(e.quantidadeMinima||0)).length,vencendo:i.filter(e=>{if(!e.validade)return!1;const t=new Date(e.validade)-new Date,s=Math.ceil(t/864e5);return s>0&&s<=30}).length,categorias:new Set(i.map(e=>e.categoria||"Geral")).size};return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Logística",title:"Controle de Estoque",subtitle:"Gerencie o inventário de medicamentos e alimentos, registre entradas e saídas.",children:_e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsxs("button",{onClick:()=>{try{const e="medicamentos"===t?"Medicamentos":"Alimentos",s=new Date,a="\n        body { font-family: Arial, sans-serif; padding: 20px; }\n        h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n        .stats { display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap; }\n        .stat-card { border: 1px solid #e5e7eb; padding: 15px; border-radius: 8px; flex: 1; min-width: 180px; }\n        .stat-label { color: #6b7280; font-size: 12px; text-transform: uppercase; }\n        .stat-value { font-size: 24px; font-weight: bold; margin: 8px 0; }\n        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n        th { background: #f9fafb; font-weight: 600; color: #374151; }\n        .baixo-estoque { color: #dc2626; font-weight: 600; }\n        .ok { color: #059669; }\n        @media print { body { padding: 0; } }\n      ",r=E.map(e=>{const t=e.quantidade<=(e.quantidadeMinima||0),s=e.validade?new Date(e.validade).toLocaleDateString("pt-BR"):"-";return`\n            <tr>\n              <td>${Ci(e.nome)}</td>\n              <td>${Ci(e.categoria||"Geral")}</td>\n              <td class="${t?"baixo-estoque":"ok"}">${Ci(e.quantidade)} ${Ci(e.unidade||"")}</td>\n              <td>${Ci(e.quantidadeMinima||"-")}</td>\n              <td>${Ci(s)}</td>\n              <td>${t?'<span class="baixo-estoque">⚠️ Baixo</span>':'<span class="ok">✓ OK</span>'}</td>\n            </tr>\n          `}).join("");ki({title:`Relatório de Estoque - ${e} - Prescrimed`,styles:a,bodyHtml:`\n        <h1>Relatório de Estoque - ${Ci(e)}</h1>\n        <p>Gerado em: ${Ci(s.toLocaleDateString("pt-BR"))} às ${Ci(s.toLocaleTimeString("pt-BR"))}</p>\n\n        <div class="stats">\n          <div class="stat-card">\n            <div class="stat-label">Total de Itens</div>\n            <div class="stat-value">${Ci(A.total)}</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Baixo Estoque</div>\n            <div class="stat-value" style="color: #dc2626">${Ci(A.baixoEstoque)}</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Vencendo (30 dias)</div>\n            <div class="stat-value" style="color: #d97706">${Ci(A.vencendo)}</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Categorias</div>\n            <div class="stat-value">${Ci(A.categorias)}</div>\n          </div>\n        </div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th>Nome</th>\n              <th>Categoria</th>\n              <th>Quantidade</th>\n              <th>Qtd. Mínima</th>\n              <th>Validade</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${r}\n          </tbody>\n        </table>\n      `}),f.success("Abrindo visualização para impressão/PDF")}catch(e){f.error("Erro ao gerar PDF")}},disabled:0===E.length,className:"group relative px-3 py-2.5 bg-white border-2 border-red-500 text-red-600 hover:bg-red-500 hover:text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Exportar para PDF","aria-label":"Exportar relatório em PDF",children:[_e.jsx(re,{size:18}),_e.jsx("span",{className:"hidden lg:inline font-medium text-sm",children:"PDF"}),_e.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Exportar PDF"})]}),_e.jsxs("button",{onClick:()=>{try{const e="medicamentos"===t?"Medicamentos":"Alimentos",s=["Nome","Categoria","Quantidade","Unidade","Qtd. Mínima","Validade","Lote","Fabricante"],a=E.map(e=>[e.nome,e.categoria||"Geral",e.quantidade,e.unidade||"",e.quantidadeMinima||"",e.validade?new Date(e.validade).toLocaleDateString("pt-BR"):"",e.lote||"",e.fabricante||""]),r=[[`RELATÓRIO DE ESTOQUE - ${e.toUpperCase()}`],["Gerado em:",(new Date).toLocaleString("pt-BR")],[],["RESUMO"],["Total de Itens",A.total],["Baixo Estoque",A.baixoEstoque],["Vencendo (30 dias)",A.vencendo],["Categorias Diferentes",A.categorias],[],["ITENS DO ESTOQUE"],s,...a];wi({filename:`estoque_${t}_${(new Date).toISOString().split("T")[0]}.csv`,lines:r}),f.success("Arquivo Excel exportado com sucesso")}catch(e){f.error("Erro ao exportar para Excel")}},disabled:0===E.length,className:"group relative px-3 py-2.5 bg-white border-2 border-emerald-500 text-emerald-600 hover:bg-emerald-500 hover:text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Exportar para Excel","aria-label":"Exportar relatório em Excel",children:[_e.jsx(ie,{size:18}),_e.jsx("span",{className:"hidden lg:inline font-medium text-sm",children:"Excel"}),_e.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Exportar Excel"})]})]}),_e.jsx("div",{className:"hidden md:block w-px h-8 bg-slate-200"}),_e.jsxs("button",{onClick:async()=>{try{const e=await yi();d(e.movimentacoes||[]),x(!0)}catch(e){f.error(nr("load","histórico"))}},className:"btn bg-slate-50 text-slate-700 hover:bg-slate-100 border-slate-200 flex items-center gap-2 px-3 py-2.5 rounded-lg font-semibold transition-all text-sm",children:[_e.jsx(ne,{size:18})," ",_e.jsx("span",{className:"hidden sm:inline",children:"Histórico"})]}),_e.jsxs("button",{onClick:()=>r("entrada"),className:"btn bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border-emerald-200 flex items-center gap-2 px-3 py-2.5 rounded-lg font-semibold transition-all text-sm",children:[_e.jsx(le,{size:18})," ",_e.jsx("span",{className:"hidden sm:inline",children:"Entrada"})]}),_e.jsxs("button",{onClick:()=>r("saida"),className:"btn bg-red-50 text-red-700 hover:bg-red-100 border-red-200 flex items-center gap-2 px-3 py-2.5 rounded-lg font-semibold transition-all text-sm",children:[_e.jsx(oe,{size:18})," ",_e.jsx("span",{className:"hidden sm:inline",children:"Saída"})]}),_e.jsxs("button",{onClick:()=>r("cadastrar"),className:"btn bg-primary-600 text-white hover:bg-primary-700 shadow-lg shadow-primary-600/20 flex items-center gap-2 px-3 py-2.5 rounded-lg font-semibold transition-all text-sm",children:[_e.jsx($,{size:18})," ",_e.jsx("span",{className:"hidden sm:inline",children:"Novo"})]})]})}),l&&_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:D,label:"Total de Itens",value:l.totalItens||0,description:`${l.totalMedicamentos??0} med. + ${l.totalAlimentos??0} alim.`,color:"primary"}),_e.jsx(gr,{icon:L,label:"Baixo Estoque",value:l.baixoEstoque||0,description:"Itens precisando reposição",color:"red"}),_e.jsx(gr,{icon:P,label:"Vencendo",value:l.vencendo||0,description:"Nos próximos 30 dias",color:"amber"}),_e.jsx(gr,{icon:ne,label:"Movimentações",value:l.movimentacoesRecentes||0,description:"Últimos 30 dias",color:"emerald"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:D,label:"Total",value:A.total,description:"Itens cadastrados",color:"primary"}),_e.jsx(gr,{icon:L,label:"Baixo Estoque",value:A.baixoEstoque,description:"Itens precisando reposição",color:"red"}),_e.jsx(gr,{icon:P,label:"Vencendo",value:A.vencendo,description:"Nos próximos 30 dias",color:"orange"}),_e.jsx(gr,{icon:ne,label:"Categorias",value:A.categorias,description:"Tipos de itens",color:"purple"})]}),_e.jsx(Sr,{searchTerm:h,onSearchChange:b,placeholder:`Buscar ${t}...`,children:_e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl w-full md:w-auto",children:[_e.jsxs("button",{onClick:()=>s("medicamentos"),className:"flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all "+("medicamentos"===t?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[_e.jsx(Q,{size:16})," Medicamentos"]}),_e.jsxs("button",{onClick:()=>s("alimentos"),className:"flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all "+("alimentos"===t?"bg-white text-green-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[_e.jsx(ce,{size:16})," Alimentos"]})]})}),_e.jsx(Rr,{title:"Estoque de "+("medicamentos"===t?"Medicamentos":"Alimentos"),children:u?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):E.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:E.map(e=>{const s=e.quantidade<=e.quantidadeMinima;return _e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("medicamentos"===t?"bg-primary-50 text-primary-600":"bg-green-50 text-green-600"),children:"medicamentos"===t?_e.jsx(Q,{size:18}):_e.jsx(ce,{size:18})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-bold text-slate-800 dark:text-gray-100",children:e.nome}),_e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-500 dark:text-gray-400",children:[e.lote&&_e.jsxs("span",{children:["Lote: ",e.lote]}),e.categoria&&_e.jsxs("span",{children:["Cat: ",e.categoria]})]})]})]}),s?_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-50 text-red-700 text-xs font-bold border border-red-100",children:[_e.jsx(L,{size:12})," Baixo"]}):_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-700 text-xs font-bold border border-emerald-100",children:[_e.jsx(V,{size:12})," OK"]})]}),_e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2 text-sm",children:[_e.jsxs("div",{children:[_e.jsx("span",{className:"text-slate-500 dark:text-gray-400 text-xs block",children:"Qtd."}),_e.jsx("span",{className:"font-bold "+(s?"text-red-600":"text-slate-700 dark:text-gray-200"),children:e.quantidade})]}),_e.jsxs("div",{children:[_e.jsx("span",{className:"text-slate-500 dark:text-gray-400 text-xs block",children:"Unidade"}),_e.jsx("span",{className:"text-slate-600 dark:text-gray-300 font-medium",children:e.unidade})]}),_e.jsxs("div",{children:[_e.jsx("span",{className:"text-slate-500 dark:text-gray-400 text-xs block",children:"Validade"}),_e.jsx("span",{className:"text-slate-600 dark:text-gray-300 font-medium",children:e.validade?new Date(e.validade).toLocaleDateString("pt-BR"):"-"})]})]}),_e.jsx("div",{className:"mt-3 flex justify-end",children:_e.jsx("button",{className:"text-slate-400 hover:text-primary-600 font-medium text-sm transition",children:"Detalhes"})})]},e._id)})}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Item","Quantidade","Unidade","Validade","Status","Ações"]}),_e.jsx(qr,{children:E.map(e=>{const s=e.quantidade<=e.quantidadeMinima;return _e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("medicamentos"===t?"bg-primary-50 text-primary-600":"bg-green-50 text-green-600"),children:"medicamentos"===t?_e.jsx(Q,{size:18}):_e.jsx(ce,{size:18})}),_e.jsxs("div",{children:[_e.jsx("span",{className:"font-bold text-slate-800 dark:text-gray-100 block",children:e.nome}),e.lote&&_e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["Lote: ",e.lote]}),e.categoria&&_e.jsxs("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:["Cat: ",e.categoria]})]})]})}),_e.jsx(Fr,{children:_e.jsx("span",{className:"font-bold text-lg "+(s?"text-red-600":"text-slate-700 dark:text-gray-200"),children:e.quantidade})}),_e.jsx(Fr,{children:_e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400 bg-slate-100 dark:bg-gray-800 px-2 py-1 rounded-md font-medium",children:e.unidade})}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:e.validade?new Date(e.validade).toLocaleDateString("pt-BR"):"-"}),_e.jsx(Fr,{children:s?_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-50 text-red-700 text-xs font-bold border border-red-100",children:[_e.jsx(L,{size:12})," Baixo Estoque"]}):_e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 text-xs font-bold border border-emerald-100",children:[_e.jsx(V,{size:12})," Normal"]})}),_e.jsx(Fr,{className:"text-right",children:_e.jsx("button",{className:"text-slate-400 hover:text-primary-600 font-medium text-sm transition",children:"Detalhes"})})]},e._id)})})]})]}):_e.jsx("div",{className:"p-8",children:_e.jsx(Er,{icon:D,title:"Nenhum item encontrado",description:"Nenhum item encontrado no estoque."})})}),(()=>{if(!a)return null;const e="medicamentos"===t,s="entrada"===a||"saida"===a;return _e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:_e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[_e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-[51]",children:[_e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:["cadastrar"===a&&_e.jsx($,{className:"text-primary-600"}),"entrada"===a&&_e.jsx(le,{className:"text-emerald-600"}),"saida"===a&&_e.jsx(oe,{className:"text-red-600"}),"cadastrar"===a?"Novo "+(e?"Medicamento":"Alimento"):"entrada"===a?"Registrar Entrada":"Registrar Saída"]}),_e.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:_e.jsx(F,{size:20,className:"text-slate-400"})})]}),_e.jsx("div",{className:"p-6",children:s?_e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Selecione o Item"}),_e.jsxs("select",{required:!0,className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",onChange:e=>y({...v,itemId:e.target.value}),value:v.itemId||"",children:[_e.jsx("option",{value:"",children:"Selecione..."}),i.map(e=>_e.jsxs("option",{value:e._id,children:[e.nome," (Atual: ",e.quantidade," ",e.unidade,")"]},e._id))]})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quantidade"}),_e.jsx("input",{required:!0,type:"number",min:"1",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",value:v.quantidade,onChange:e=>y({...v,quantidade:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Motivo"}),_e.jsxs("select",{required:!0,className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>y({...v,motivo:e.target.value}),value:v.motivo||"",children:[_e.jsx("option",{value:"",children:"Selecione..."}),"entrada"===a?_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"Compra",children:"Compra"}),_e.jsx("option",{value:"Doação",children:"Doação"}),_e.jsx("option",{value:"Ajuste",children:"Ajuste de Estoque"})]}):_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"Uso",children:"Uso/Consumo"}),_e.jsx("option",{value:"Vencimento",children:"Vencimento/Descarte"}),_e.jsx("option",{value:"Ajuste",children:"Ajuste de Estoque"})]})]})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observação (Opcional)"}),_e.jsx("textarea",{className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",rows:"3",value:v.observacao,onChange:e=>y({...v,observacao:e.target.value})})]}),_e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[_e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",children:"Cancelar"}),_e.jsxs("button",{type:"submit",className:"px-6 py-2 rounded-lg font-bold text-white shadow-lg transition-all transform hover:-translate-y-0.5 "+("entrada"===a?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-600/20":"bg-red-600 hover:bg-red-700 shadow-red-600/20"),children:["Confirmar ","entrada"===a?"Entrada":"Saída"]})]})]}):_e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome do Item"}),_e.jsx("input",{required:!0,type:"text",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,nome:e.target.value})})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Unidade"}),_e.jsxs("select",{required:!0,className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,unidade:e.target.value}),defaultValue:"",children:[_e.jsx("option",{value:"",disabled:!0,children:"Selecione"}),e?_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"comprimido",children:"Comprimido"}),_e.jsx("option",{value:"caixa",children:"Caixa"}),_e.jsx("option",{value:"frasco",children:"Frasco"}),_e.jsx("option",{value:"ml",children:"ml"}),_e.jsx("option",{value:"ampola",children:"Ampola"})]}):_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"kg",children:"Kg"}),_e.jsx("option",{value:"litro",children:"Litro"}),_e.jsx("option",{value:"unidade",children:"Unidade"}),_e.jsx("option",{value:"pacote",children:"Pacote"}),_e.jsx("option",{value:"lata",children:"Lata"})]})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Qtd. Inicial"}),_e.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,quantidade:e.target.value})})]})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Qtd. Mínima (Alerta)"}),_e.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,quantidadeMinima:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Validade"}),_e.jsx("input",{type:"date",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,validade:e.target.value})})]})]}),e?_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Lote"}),_e.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,lote:e.target.value})})]}):_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Categoria"}),_e.jsxs("select",{className:"w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",onChange:e=>j({...g,categoria:e.target.value}),children:[_e.jsx("option",{value:"Geral",children:"Geral"}),_e.jsx("option",{value:"Perecível",children:"Perecível"}),_e.jsx("option",{value:"Não Perecível",children:"Não Perecível"}),_e.jsx("option",{value:"Bebida",children:"Bebida"})]})]}),_e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[_e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg font-bold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all transform hover:-translate-y-0.5",children:"Salvar Cadastro"})]})]})})]})})})(),m&&_e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:_e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[_e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[_e.jsx(ne,{className:"text-primary-600"}),"Histórico de Movimentações"]}),_e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Últimas 50 movimentações registradas"})]}),_e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:_e.jsx(F,{size:20,className:"text-slate-400"})})]}),_e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:c.length>0?_e.jsx("div",{className:"overflow-x-auto",children:_e.jsxs("table",{className:"w-full",children:[_e.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:_e.jsxs("tr",{children:[_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Data"}),_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Tipo"}),_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Item"}),_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Qtd"}),_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Motivo"}),_e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Usuário"})]})}),_e.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map(e=>_e.jsxs("tr",{className:"hover:bg-slate-50/50 transition",children:[_e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 whitespace-nowrap",children:new Date(e.data).toLocaleString("pt-BR")}),_e.jsx("td",{className:"px-4 py-3",children:_e.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold "+("entrada"===e.tipo?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"),children:"entrada"===e.tipo?_e.jsxs(_e.Fragment,{children:[_e.jsx(le,{size:12})," Entrada"]}):_e.jsxs(_e.Fragment,{children:[_e.jsx(oe,{size:12})," Saída"]})})}),_e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:[e.itemNome,_e.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",e.itemTipo,")"]})]}),_e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-slate-700",children:["entrada"===e.tipo?"+":"-",e.quantidade]}),_e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:e.motivo}),_e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:e.usuarioNome})]},e._id))})]})}):_e.jsxs("div",{className:"text-center py-12",children:[_e.jsx(ne,{size:48,className:"mx-auto text-slate-300 mb-3"}),_e.jsx("p",{className:"text-slate-500",children:"Nenhuma movimentação encontrada"})]})})]})})]})}const Ei=async e=>Va("/enfermagem",{params:e}),Ai=async e=>Ga("/enfermagem",e),Pi=async(e,t)=>Ha(`/enfermagem/${e}`,t),Ri=async e=>Ja(`/enfermagem/${e}`),zi=async()=>Va("/enfermagem/stats/dashboard");function Di(){const[t,s]=e.useState([]),[a,r]=e.useState([]),[i,n]=e.useState(!0),[l,o]=e.useState(""),[c,d]=e.useState(!1),[m,x]=e.useState(null),[u,p]=e.useState(null),[h,b]=e.useState([]),[g,j]=e.useState([]),[v,y]=e.useState({registrosHoje:0,pacientesComRegistro:0,riscoQueda:0,alertasCriticos:0}),[N,k]=e.useState({pacienteId:"",tipo:"evolucao",titulo:"",descricao:"",estadoGeral:"bom",riscoQueda:"",riscoLesao:"",alerta:!1,prioridade:"baixa",observacoes:"",pa:"",fc:"",fr:"",temp:"",sato2:"",glicemia:""}),[S,A]=e.useState({});e.useEffect(()=>{P(),R(),z(),D()},[]);const P=async()=>{try{n(!0);const e=await Ei();s(e)}catch(e){f.error(or(e,nr("load","registros")))}finally{n(!1)}},R=async()=>{try{const e=await vr(),t=Array.isArray(e)?e:e.pacientes||[];r(t)}catch(e){}},z=async()=>{try{const e=await zi();y(e)}catch(e){}},D=async()=>{try{const e=await pi(),t=await bi();b([...e||[],...t||[]])}catch(e){}},O=e=>{var t,s,a,r,i,n;x(e.id),k({pacienteId:e.pacienteId||"",tipo:e.tipo||"evolucao",titulo:e.titulo||"",descricao:e.descricao||"",estadoGeral:e.estadoGeral||"bom",riscoQueda:e.riscoQueda||"",riscoLesao:e.riscoLesao||"",alerta:e.alerta||!1,prioridade:e.prioridade||"baixa",observacoes:e.observacoes||"",pa:(null==(t=e.sinaisVitais)?void 0:t.pa)||"",fc:(null==(s=e.sinaisVitais)?void 0:s.fc)||"",fr:(null==(a=e.sinaisVitais)?void 0:a.fr)||"",temp:(null==(r=e.sinaisVitais)?void 0:r.temp)||"",sato2:(null==(i=e.sinaisVitais)?void 0:i.sato2)||"",glicemia:(null==(n=e.sinaisVitais)?void 0:n.glicemia)||""}),d(!0)},q=async(e,t)=>{if(confirm(`Deseja realmente excluir o registro "${t}"?`))try{p(e),await Ri(e),f.success(ir("delete","Registro")),P(),z()}catch(s){f.error(or(s,nr("delete","registro")))}finally{p(null)}},U=()=>{k({pacienteId:"",tipo:"evolucao",titulo:"",descricao:"",estadoGeral:"bom",riscoQueda:"",riscoLesao:"",alerta:!1,prioridade:"baixa",observacoes:"",pa:"",fc:"",fr:"",temp:"",sato2:"",glicemia:""}),A({}),x(null),j([])},B=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},M=e=>({evolucao:"Evolução",sinais_vitais:"Sinais Vitais",administracao_medicamento:"Medicamento",curativo:"Curativo",intercorrencia:"Intercorrência",admissao:"Admissão",alta:"Alta",transferencia:"Transferência",outro:"Outro"}[e]||e),V=e=>{const t={bom:"bg-emerald-50 text-emerald-700 border-emerald-100",regular:"bg-yellow-50 text-yellow-700 border-yellow-100",grave:"bg-orange-50 text-orange-700 border-orange-100",critico:"bg-red-50 text-red-700 border-red-100"};return t[e]||t.bom},G=e=>{const t={baixa:"bg-slate-100 text-slate-700",media:"bg-blue-50 text-blue-700",alta:"bg-orange-50 text-orange-700",urgente:"bg-red-50 text-red-700"};return t[e]||t.baixa},J=t.filter(e=>{var t,s,a,r;const i=l.toLowerCase();return(null==(t=e.titulo)?void 0:t.toLowerCase().includes(i))||(null==(a=null==(s=e.paciente)?void 0:s.nome)?void 0:a.toLowerCase().includes(i))||(null==(r=e.descricao)?void 0:r.toLowerCase().includes(i))});return _e.jsxs("div",{className:"flex flex-col gap-8",children:[_e.jsxs("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md pb-2 pt-4",children:[_e.jsx(br,{label:"Prontuário",title:"Registros de Enfermagem",subtitle:"Anotações diárias, evolução clínica e acompanhamento de cuidados.",children:_e.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-auto gap-3",children:[_e.jsxs("button",{type:"button",onClick:P,className:"btn btn-secondary flex items-center justify-center gap-2",children:[_e.jsx(E,{size:18})," Atualizar"]}),_e.jsxs("button",{type:"button",onClick:()=>{U(),d(!0)},className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-600/20",children:[_e.jsx($,{size:18})," Novo Registro"]})]})}),_e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mt-4",children:[_e.jsx(gr,{icon:C,label:"Hoje",value:v.registrosHoje,description:"Registros realizados",color:"primary"}),_e.jsx(gr,{icon:w,label:"Cobertura",value:v.pacientesComRegistro,description:"Pacientes evoluídos",color:"emerald"}),_e.jsx(gr,{icon:de,label:"Risco",value:v.riscoQueda,description:"Alto risco de queda",color:"orange"}),_e.jsx(gr,{icon:L,label:"Crítico",value:v.alertasCriticos,description:"Alertas pendentes",color:"red"})]}),_e.jsx("div",{className:"mt-4",children:_e.jsx(Sr,{searchTerm:l,onSearchChange:o,placeholder:"Buscar por título, residente ou descrição..."})})]}),_e.jsx(Rr,{title:"Registros de Enfermagem",children:i?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):J.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:J.map(e=>{var t;return _e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex-1",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[_e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${G(e.prioridade)}`,children:M(e.tipo)}),e.alerta&&_e.jsx(L,{size:14,className:"text-red-500"})]}),_e.jsx("p",{className:"font-semibold text-slate-900 dark:text-gray-100",children:e.titulo}),_e.jsxs("p",{className:"text-sm text-slate-600 dark:text-gray-300 mt-1",children:[_e.jsx(I,{size:14,className:"inline mr-1"}),(null==(t=e.paciente)?void 0:t.nome)||"Paciente não identificado"]}),_e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400 mt-1",children:B(e.createdAt)})]}),_e.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${V(e.estadoGeral)}`,children:e.estadoGeral})]}),_e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-300 mt-3 line-clamp-2",children:e.descricao}),_e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3",children:[_e.jsx(Pr,{onClick:()=>O(e),icon:te,variant:"primary",tooltip:"Editar",title:"Editar registro",ariaLabel:"Editar registro"}),_e.jsx(Pr,{onClick:()=>q(e.id,e.titulo),icon:H,variant:"danger",tooltip:"Excluir",title:"Excluir registro",ariaLabel:"Excluir registro",disabled:u===e.id,loading:u===e.id})]})]},e.id)})}),_e.jsx("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-2 gap-4 p-2 md:p-4",children:J.map(e=>{var t,s,a;return _e.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4 shadow-sm hover:shadow-md transition-shadow",children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${G(e.prioridade)}`,children:M(e.tipo)}),e.alerta&&_e.jsx(L,{size:16,className:"text-red-500",title:"Alerta ativo"})]}),_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:B(e.createdAt)}),_e.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${V(e.estadoGeral)}`,children:e.estadoGeral})]})]}),_e.jsxs("div",{className:"mt-3",children:[_e.jsx("p",{className:"font-semibold text-slate-900 dark:text-gray-100",children:e.titulo}),_e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[_e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-50 flex items-center justify-center text-primary-600 font-bold text-sm",children:(null==(s=null==(t=e.paciente)?void 0:t.nome)?void 0:s.charAt(0))||"?"}),_e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:(null==(a=e.paciente)?void 0:a.nome)||"Paciente não identificado"})]}),_e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-300 mt-2 line-clamp-3",children:e.descricao})]}),_e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[_e.jsx(Pr,{onClick:()=>O(e),icon:te,variant:"primary",tooltip:"Editar",title:"Editar registro",ariaLabel:"Editar registro"}),_e.jsx(Pr,{onClick:()=>q(e.id,e.titulo),icon:H,variant:"danger",tooltip:"Excluir",title:"Excluir registro",ariaLabel:"Excluir registro",disabled:u===e.id,loading:u===e.id})]})]},e.id)})})]}):_e.jsxs("div",{className:"p-12 flex flex-col items-center gap-6",children:[_e.jsx(Er,{icon:C,title:"Nenhum registro encontrado",description:"Comece criando um novo registro de enfermagem."}),_e.jsxs("button",{className:"btn btn-primary flex items-center gap-2 shadow-lg shadow-primary-600/20",onClick:()=>{U(),d(!0)},children:[_e.jsx($,{size:18})," Novo Registro"]})]})}),c&&_e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:_e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[_e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 dark:border-gray-700 flex justify-between items-start bg-gradient-to-r from-primary-50 to-primary-100/50 dark:from-gray-700 dark:to-gray-700/50 shrink-0",children:[_e.jsxs("div",{children:[_e.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-gray-100",children:m?"Editar Registro":"Novo Registro de Enfermagem"}),_e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-300 mt-1",children:"Preencha os dados do registro clínico."})]}),_e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-gray-200 p-1 hover:bg-slate-100 dark:hover:bg-gray-700 rounded-lg transition",children:_e.jsx(F,{size:24})})]}),_e.jsx("div",{className:"overflow-y-auto p-6 custom-scrollbar",children:_e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return N.pacienteId||(e.pacienteId="Selecione um residente"),N.titulo.trim()||(e.titulo="Título é obrigatório"),N.descricao.trim()||(e.descricao="Descrição é obrigatória"),A(e),0===Object.keys(e).length})())try{let e=null;(N.pa||N.fc||N.fr||N.temp||N.sato2||N.glicemia)&&(e={pa:N.pa||null,fc:N.fc||null,fr:N.fr||null,temp:N.temp||null,sato2:N.sato2||null,glicemia:N.glicemia||null});const t={pacienteId:N.pacienteId,tipo:N.tipo,titulo:N.titulo.trim(),descricao:N.descricao.trim(),estadoGeral:N.estadoGeral,riscoQueda:N.riscoQueda||null,riscoLesao:N.riscoLesao||null,alerta:N.alerta,prioridade:N.prioridade,observacoes:N.observacoes.trim()||null,sinaisVitais:e};m?(await Pi(m,t),f.success(ir("update","Registro"))):(await Ai(t),f.success(ir("create","Registro"))),d(!1),U(),P(),z()}catch(t){f.error(or(t,nr("save","registro")))}},className:"space-y-6",children:[_e.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700/50 rounded-xl p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx(C,{className:"text-primary-600",size:20}),_e.jsx("h4",{className:"font-bold text-slate-800 dark:text-gray-100",children:"Informações Básicas"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-200 mb-1.5",children:"Residente *"}),0===a.length?_e.jsxs("div",{className:"flex flex-col gap-2",children:[_e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg p-3 text-sm flex items-center gap-2",children:[_e.jsx(_,{size:16,className:"text-yellow-500"}),"Nenhum residente cadastrado. Cadastre um residente para registrar uma evolução."]}),_e.jsx("button",{type:"button",className:"btn btn-primary w-fit",onClick:()=>window.location.hash="#/pacientes",children:"Cadastrar Residente"})]}):_e.jsxs(_e.Fragment,{children:[_e.jsxs("select",{className:"input w-full "+(S.pacienteId?"border-red-300":""),value:N.pacienteId,onChange:e=>k({...N,pacienteId:e.target.value}),children:[_e.jsx("option",{value:"",children:"Selecione um residente"}),a.map(e=>_e.jsx("option",{value:e.id,children:e.nome},e.id))]}),S.pacienteId&&_e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",S.pacienteId]})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-200 mb-1.5",children:"Tipo de Registro"}),_e.jsxs("select",{className:"input w-full",value:N.tipo,onChange:e=>k({...N,tipo:e.target.value}),children:[_e.jsx("option",{value:"evolucao",children:"Evolução"}),_e.jsx("option",{value:"sinais_vitais",children:"Sinais Vitais"}),_e.jsx("option",{value:"administracao_medicamento",children:"Administração de Medicamento"}),_e.jsx("option",{value:"curativo",children:"Curativo"}),_e.jsx("option",{value:"intercorrencia",children:"Intercorrência"}),_e.jsx("option",{value:"admissao",children:"Admissão"}),_e.jsx("option",{value:"alta",children:"Alta"}),_e.jsx("option",{value:"transferencia",children:"Transferência"}),_e.jsx("option",{value:"outro",children:"Outro"})]})]})]}),_e.jsxs("div",{className:"mt-4",children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-200 mb-1.5",children:"Título *"}),_e.jsx("input",{type:"text",className:"input w-full "+(S.titulo?"border-red-300":""),placeholder:"Ex: Evolução diária, Verificação de PA...",value:N.titulo,onChange:e=>k({...N,titulo:e.target.value})}),S.titulo&&_e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",S.titulo]})]}),_e.jsxs("div",{className:"mt-4",children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-200 mb-1.5",children:"Descrição *"}),_e.jsx("textarea",{className:"input w-full min-h-[100px] "+(S.descricao?"border-red-300":""),placeholder:"Descreva a evolução clínica, sinais e sintomas, procedimentos realizados...",value:N.descricao,onChange:e=>k({...N,descricao:e.target.value})}),S.descricao&&_e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[_e.jsx(_,{size:12})," ",S.descricao]})]})]}),_e.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700/50 rounded-xl p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx(T,{className:"text-blue-600",size:20}),_e.jsx("h4",{className:"font-bold text-slate-800 dark:text-gray-100",children:"Sinais Vitais"}),_e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:"(Opcional)"})]}),_e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(me,{size:14})," PA (mmHg)"]}),_e.jsx("input",{type:"text",className:"input w-full",placeholder:"120/80",value:N.pa,onChange:e=>k({...N,pa:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(T,{size:14})," FC (bpm)"]}),_e.jsx("input",{type:"number",className:"input w-full",placeholder:"72",value:N.fc,onChange:e=>k({...N,fc:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(xe,{size:14})," FR (irpm)"]}),_e.jsx("input",{type:"number",className:"input w-full",placeholder:"16",value:N.fr,onChange:e=>k({...N,fr:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(ue,{size:14})," Temp (°C)"]}),_e.jsx("input",{type:"number",step:"0.1",className:"input w-full",placeholder:"36.5",value:N.temp,onChange:e=>k({...N,temp:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(T,{size:14})," SatO2 (%)"]}),_e.jsx("input",{type:"number",className:"input w-full",placeholder:"98",value:N.sato2,onChange:e=>k({...N,sato2:e.target.value})})]}),_e.jsxs("div",{children:[_e.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:[_e.jsx(pe,{size:14})," Glicemia (mg/dL)"]}),_e.jsx("input",{type:"number",className:"input w-full",placeholder:"90",value:N.glicemia,onChange:e=>k({...N,glicemia:e.target.value})})]})]})]}),_e.jsxs("div",{className:"bg-orange-50 dark:bg-gray-700/50 rounded-xl p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx(de,{className:"text-orange-600",size:20}),_e.jsx("h4",{className:"font-bold text-slate-800 dark:text-gray-100",children:"Avaliação e Riscos"})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:"Estado Geral"}),_e.jsxs("select",{className:"input w-full",value:N.estadoGeral,onChange:e=>k({...N,estadoGeral:e.target.value}),children:[_e.jsx("option",{value:"bom",children:"Bom"}),_e.jsx("option",{value:"regular",children:"Regular"}),_e.jsx("option",{value:"grave",children:"Grave"}),_e.jsx("option",{value:"critico",children:"Crítico"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:"Prioridade"}),_e.jsxs("select",{className:"input w-full",value:N.prioridade,onChange:e=>k({...N,prioridade:e.target.value}),children:[_e.jsx("option",{value:"baixa",children:"Baixa"}),_e.jsx("option",{value:"media",children:"Média"}),_e.jsx("option",{value:"alta",children:"Alta"}),_e.jsx("option",{value:"urgente",children:"Urgente"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:"Risco de Queda"}),_e.jsxs("select",{className:"input w-full",value:N.riscoQueda,onChange:e=>k({...N,riscoQueda:e.target.value}),children:[_e.jsx("option",{value:"",children:"Não avaliado"}),_e.jsx("option",{value:"baixo",children:"Baixo"}),_e.jsx("option",{value:"medio",children:"Médio"}),_e.jsx("option",{value:"alto",children:"Alto"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-200 mb-1.5",children:"Risco de Lesão"}),_e.jsxs("select",{className:"input w-full",value:N.riscoLesao,onChange:e=>k({...N,riscoLesao:e.target.value}),children:[_e.jsx("option",{value:"",children:"Não avaliado"}),_e.jsx("option",{value:"baixo",children:"Baixo"}),_e.jsx("option",{value:"medio",children:"Médio"}),_e.jsx("option",{value:"alto",children:"Alto"})]})]}),_e.jsx("div",{className:"md:col-span-2",children:_e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[_e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-primary-600 rounded focus:ring-2 focus:ring-primary-500",checked:N.alerta,onChange:e=>k({...N,alerta:e.target.checked})}),_e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-200 flex items-center gap-2",children:[_e.jsx(L,{size:16,className:"text-red-500"}),"Marcar como alerta (requer atenção especial)"]})]})})]})]}),_e.jsxs("div",{className:"bg-green-50 dark:bg-gray-700/50 rounded-xl p-5",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx(C,{className:"text-green-600",size:20}),_e.jsx("h4",{className:"font-bold text-slate-800 dark:text-gray-100",children:"Itens do Estoque Utilizados"}),_e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:"(Opcional)"})]}),_e.jsxs("div",{className:"space-y-4",children:[_e.jsxs("select",{className:"input w-full",onChange:e=>{const t=e.target.value,s=h.find(e=>e.id===t);s&&!g.some(e=>e.id===t)&&j([...g,{id:s.id,nome:s.nome,quantidade:1}]),e.target.value=""},value:"",children:[_e.jsx("option",{value:"",children:"Adicionar item do estoque..."}),h.map(e=>_e.jsx("option",{value:e.id,children:e.nome},e.id))]}),_e.jsx("div",{className:"flex flex-col gap-2",children:0===g.length?_e.jsx("span",{className:"text-xs text-slate-400",children:"Nenhum item selecionado"}):g.map((e,t)=>_e.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 p-3 rounded-lg",children:[_e.jsx("span",{className:"font-medium flex-1",children:e.nome}),_e.jsx("input",{type:"number",min:1,className:"input w-20",value:e.quantidade,onChange:e=>{const s=parseInt(e.target.value)||1;j(g.map((e,a)=>a===t?{...e,quantidade:s}:e))}}),_e.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>j(g.filter((e,s)=>s!==t)),children:_e.jsx(H,{size:14})})]},e.id))})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-gray-200 mb-1.5",children:"Observações Adicionais"}),_e.jsx("textarea",{className:"input w-full min-h-[80px]",placeholder:"Informações complementares, condutas tomadas...",value:N.observacoes,onChange:e=>k({...N,observacoes:e.target.value})})]}),_e.jsxs("div",{className:"pt-4 flex gap-3 border-t border-slate-200 dark:border-gray-700",children:[_e.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn btn-secondary flex-1 py-2.5",children:"Cancelar"}),_e.jsx("button",{type:"submit",className:"btn btn-primary flex-1 py-2.5 shadow-lg shadow-primary-500/20",disabled:0===a.length,children:m?"Salvar Alterações":"Criar Registro"})]})]})})]})})]})}const Ti=async(e={})=>{const t=$a({tipo:e.tipo,status:e.status,dataInicio:e.dataInicio,dataFim:e.dataFim});return Va(`/financeiro${t}`)},Oi=async()=>{const e=await Va("/financeiro/stats");return(null==e?void 0:e.data)||e},qi=async e=>Ga("/financeiro",e),Li=async(e,t)=>Ha(`/financeiro/${e}`,t),Fi=async e=>Ja(`/financeiro/${e}`);function Ii({transacao:t,onClose:s}){const[a,r]=e.useState({descricao:"",valor:"",tipo:"receita",categoria:"",data:(new Date).toISOString().split("T")[0],status:"pendente",observacoes:""}),[i,n]=e.useState(!1);e.useEffect(()=>{t&&r({...t,data:new Date(t.data).toISOString().split("T")[0]})},[t]);return _e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:_e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[_e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[_e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:t?"Editar Transação":"Nova Transação"}),_e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 transition",children:_e.jsx(F,{size:20})})]}),_e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{t?(await Li(t._id,a),f.success(ir("update","Transação",{gender:"f"}))):(await qi(a),f.success(ir("create","Transação",{gender:"f"}))),s()}catch(r){f.error(nr("save","transação"))}finally{n(!1)}},className:"p-6 space-y-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrição"}),_e.jsx("input",{type:"text",required:!0,value:a.descricao,onChange:e=>r({...a,descricao:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",placeholder:"Ex: Consulta Particular"})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valor (R$)"}),_e.jsxs("div",{className:"relative",children:[_e.jsx(O,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),_e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.valor,onChange:e=>r({...a,valor:e.target.value}),className:"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",placeholder:"0,00"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data"}),_e.jsx("input",{type:"date",required:!0,value:a.data,onChange:e=>r({...a,data:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition"})]})]}),_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo"}),_e.jsxs("select",{value:a.tipo,onChange:e=>r({...a,tipo:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",children:[_e.jsx("option",{value:"receita",children:"Receita"}),_e.jsx("option",{value:"despesa",children:"Despesa"})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),_e.jsxs("select",{value:a.status,onChange:e=>r({...a,status:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",children:[_e.jsx("option",{value:"pendente",children:"Pendente"}),_e.jsx("option",{value:"pago",children:"Pago"})]})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Categoria"}),_e.jsxs("select",{value:a.categoria,onChange:e=>r({...a,categoria:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition",children:[_e.jsx("option",{value:"",children:"Selecione..."}),"receita"===a.tipo?_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"Consulta",children:"Consulta"}),_e.jsx("option",{value:"Procedimento",children:"Procedimento"}),_e.jsx("option",{value:"Convênio",children:"Convênio"}),_e.jsx("option",{value:"Outros",children:"Outros"})]}):_e.jsxs(_e.Fragment,{children:[_e.jsx("option",{value:"Aluguel",children:"Aluguel"}),_e.jsx("option",{value:"Salários",children:"Salários"}),_e.jsx("option",{value:"Insumos",children:"Insumos"}),_e.jsx("option",{value:"Manutenção",children:"Manutenção"}),_e.jsx("option",{value:"Impostos",children:"Impostos"}),_e.jsx("option",{value:"Outros",children:"Outros"})]})]})]}),_e.jsxs("div",{children:[_e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observações"}),_e.jsx("textarea",{rows:"3",value:a.observacoes,onChange:e=>r({...a,observacoes:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition resize-none"})]}),_e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[_e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-xl transition",children:"Cancelar"}),_e.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-xl transition flex items-center gap-2 disabled:opacity-50",children:[_e.jsx(Z,{size:18}),i?"Salvando...":"Salvar"]})]})]})]})})}const _i=e=>{const t=Number(e),s=isNaN(t)?0:t;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)};function Ui(){const[t,s]=e.useState([]),[a,r]=e.useState({receitas:0,despesas:0,saldo:0,receitasPendentes:0,despesasPendentes:0}),[i,n]=e.useState(!0),[l,o]=e.useState(!1),[c,d]=e.useState(null),[m,x]=e.useState(null),[u,p]=e.useState({tipo:"",status:"",search:""});e.useEffect(()=>{h()},[]);const h=async()=>{try{n(!0);const[e,t]=await Promise.all([Ti(),Oi()]);s(Array.isArray(e)?e:[]),r({receitas:Number(null==t?void 0:t.receitas)||0,despesas:Number(null==t?void 0:t.despesas)||0,saldo:Number(null==t?void 0:t.saldo)||0,receitasPendentes:Number(null==t?void 0:t.receitasPendentes)||0,despesasPendentes:Number(null==t?void 0:t.despesasPendentes)||0})}catch(e){f.error(nr("load","dados financeiros"))}finally{n(!1)}},b=e=>{d(e),o(!0)},g=async(e,t)=>{const s=`Tem certeza que deseja excluir a transação "${t}"?\n\nEsta ação não pode ser desfeita.`;if(window.confirm(s))try{x(e),await Fi(e),f.success("Transação excluída com sucesso"),h()}catch(a){f.error(nr("delete","transação"))}finally{x(null)}},j=t.filter(e=>{const t=e.descricao.toLowerCase().includes(u.search.toLowerCase())||e.categoria.toLowerCase().includes(u.search.toLowerCase()),s=!u.tipo||e.tipo===u.tipo,a=!u.status||e.status===u.status;return t&&s&&a});return _e.jsxs("div",{className:"space-y-8",children:[_e.jsx(br,{label:"Administrativo",title:"Financeiro",subtitle:"Gestão completa de receitas, despesas e fluxo de caixa.",children:_e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsxs("button",{onClick:()=>{try{const e=new Date,t="\n        body { font-family: Arial, sans-serif; padding: 20px; }\n        h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n        .stats { display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap; }\n        .stat-card { border: 1px solid #e5e7eb; padding: 15px; border-radius: 8px; flex: 1; min-width: 200px; }\n        .stat-label { color: #6b7280; font-size: 12px; text-transform: uppercase; }\n        .stat-value { font-size: 24px; font-weight: bold; margin: 8px 0; }\n        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n        th { background: #f9fafb; font-weight: 600; color: #374151; }\n        .receita { color: #059669; }\n        .despesa { color: #dc2626; }\n        .pago { color: #059669; background: #d1fae5; padding: 4px 8px; border-radius: 4px; }\n        .pendente { color: #d97706; background: #fef3c7; padding: 4px 8px; border-radius: 4px; }\n        @media print { body { padding: 0; } }\n      ",s=j.map(e=>{const t="receita"===e.tipo?"receita":"despesa",s="pago"===e.status?"pago":"pendente";return`\n            <tr>\n              <td>${Ci(new Date(e.data).toLocaleDateString("pt-BR"))}</td>\n              <td>${Ci(e.descricao)}</td>\n              <td>${Ci(e.categoria)}</td>\n              <td class="${t}">${"receita"===t?"Receita":"Despesa"}</td>\n              <td class="${t}">${"despesa"===t?"-":"+"}${Ci(_i(e.valor))}</td>\n              <td><span class="${s}">${"pago"===s?"Pago":"Pendente"}</span></td>\n            </tr>\n          `}).join("");ki({title:"Relatório Financeiro - Prescrimed",styles:t,bodyHtml:`\n        <h1>Relatório Financeiro</h1>\n        <p>Gerado em: ${Ci(e.toLocaleDateString("pt-BR"))} às ${Ci(e.toLocaleTimeString("pt-BR"))}</p>\n        \n        <div class="stats">\n          <div class="stat-card">\n            <div class="stat-label">Saldo Atual</div>\n            <div class="stat-value">${Ci(_i(a.saldo))}</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Receitas</div>\n            <div class="stat-value" style="color: #059669">${Ci(_i(a.receitas))}</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Despesas</div>\n            <div class="stat-value" style="color: #dc2626">${Ci(_i(a.despesas))}</div>\n          </div>\n        </div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th>Data</th>\n              <th>Descrição</th>\n              <th>Categoria</th>\n              <th>Tipo</th>\n              <th>Valor</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${s}\n          </tbody>\n        </table>\n      `}),f.success("Abrindo visualização para impressão/PDF")}catch(e){f.error("Erro ao gerar PDF")}},disabled:0===j.length,className:"group relative px-4 py-2.5 bg-white border-2 border-red-500 text-red-600 hover:bg-red-500 hover:text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Exportar para PDF","aria-label":"Exportar relatório em PDF",children:[_e.jsx(re,{size:18}),_e.jsx("span",{className:"hidden sm:inline font-medium",children:"PDF"}),_e.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Exportar PDF"})]}),_e.jsxs("button",{onClick:()=>{try{const e=["Data","Descrição","Categoria","Tipo","Valor","Status"],t=j.map(e=>[new Date(e.data).toLocaleDateString("pt-BR"),e.descricao,e.categoria,"receita"===e.tipo?"Receita":"Despesa",`${"despesa"===e.tipo?"-":""}${e.valor}`,"pago"===e.status?"Pago":"Pendente"]),s=[["RELATÓRIO FINANCEIRO"],["Gerado em:",(new Date).toLocaleString("pt-BR")],[],["RESUMO"],["Saldo Atual",a.saldo],["Receitas",a.receitas],["Despesas",a.despesas],["Receitas Pendentes",a.receitasPendentes],["Despesas Pendentes",a.despesasPendentes],[],["TRANSAÇÕES"],e,...t];wi({filename:`financeiro_${(new Date).toISOString().split("T")[0]}.csv`,lines:s}),f.success("Arquivo Excel exportado com sucesso")}catch(e){f.error("Erro ao exportar para Excel")}},disabled:0===j.length,className:"group relative px-4 py-2.5 bg-white border-2 border-emerald-500 text-emerald-600 hover:bg-emerald-500 hover:text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Exportar para Excel","aria-label":"Exportar relatório em Excel",children:[_e.jsx(ie,{size:18}),_e.jsx("span",{className:"hidden sm:inline font-medium",children:"Excel"}),_e.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 text-xs font-medium text-white bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Exportar Excel"})]})]}),_e.jsx("div",{className:"hidden md:block w-px h-8 bg-slate-200"}),_e.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20",children:[_e.jsx($,{size:20})," ",_e.jsx("span",{className:"hidden sm:inline",children:"Nova Transação"}),_e.jsx("span",{className:"sm:hidden",children:"Nova"})]})]})}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[_e.jsx(gr,{icon:O,label:"Saldo Atual",value:_i(a.saldo),description:"Balanço geral do mês",color:a.saldo>=0?"primary":"red"}),_e.jsx(gr,{icon:S,label:"Receitas",value:_i(a.receitas),description:_e.jsxs("span",{className:"flex items-center gap-1",children:[_e.jsxs("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:["+",_i(a.receitasPendentes)]}),_e.jsx("span",{className:"text-xs text-slate-400",children:"a receber"})]}),color:"emerald"}),_e.jsx(gr,{icon:he,label:"Despesas",value:_i(a.despesas),description:_e.jsxs("span",{className:"flex items-center gap-1",children:[_e.jsxs("span",{className:"text-xs font-medium text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full",children:["+",_i(a.despesasPendentes)]}),_e.jsx("span",{className:"text-xs text-slate-400",children:"a pagar"})]}),color:"red"}),_e.jsx(gr,{icon:R,label:"Previsão",value:_i(a.saldo+a.receitasPendentes-a.despesasPendentes),description:"Saldo projetado",color:"purple"})]}),_e.jsx(Sr,{searchTerm:u.search,onSearchChange:e=>p({...u,search:e}),placeholder:"Buscar transações...",children:_e.jsxs("div",{className:"flex gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[_e.jsxs("select",{value:u.tipo,onChange:e=>p({...u,tipo:e.target.value}),className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-600 focus:outline-none focus:border-primary-500",children:[_e.jsx("option",{value:"",children:"Todos os tipos"}),_e.jsx("option",{value:"receita",children:"Receitas"}),_e.jsx("option",{value:"despesa",children:"Despesas"})]}),_e.jsxs("select",{value:u.status,onChange:e=>p({...u,status:e.target.value}),className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-600 focus:outline-none focus:border-primary-500",children:[_e.jsx("option",{value:"",children:"Todos os status"}),_e.jsx("option",{value:"pago",children:"Pago"}),_e.jsx("option",{value:"pendente",children:"Pendente"})]})]})}),_e.jsx(Rr,{title:"Transações",actions:_e.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary flex items-center gap-2",children:[_e.jsx($,{size:18})," Nova"]}),children:i?_e.jsx("div",{className:"flex justify-center py-12",children:_e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):j.length>0?_e.jsxs(_e.Fragment,{children:[_e.jsx(zr,{children:j.map(e=>_e.jsxs(Dr,{children:[_e.jsxs("div",{className:"flex items-start justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("receita"===e.tipo?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"),children:"receita"===e.tipo?_e.jsx(fe,{size:18}):_e.jsx(be,{size:18})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.descricao}),_e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 dark:bg-gray-800 text-slate-600 dark:text-gray-300",children:e.categoria}),_e.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-600 dark:text-gray-300",children:[_e.jsx(P,{size:12})," ",new Date(e.data).toLocaleDateString("pt-BR")]})]})]})]}),_e.jsxs("div",{className:"text-sm font-semibold "+("receita"===e.tipo?"text-emerald-600":"text-red-600"),children:["despesa"===e.tipo?"-":"+",_i(e.valor)]})]}),_e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[_e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium "+("pago"===e.status?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-amber-50 text-amber-700 border border-amber-100"),children:"pago"===e.status?_e.jsxs(_e.Fragment,{children:[_e.jsx(V,{size:12})," Pago"]}):_e.jsxs(_e.Fragment,{children:[_e.jsx(R,{size:12})," Pendente"]})}),_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx("button",{onClick:()=>b(e),className:"p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md","aria-label":"Editar transação",children:_e.jsx(G,{size:18})}),_e.jsx("button",{onClick:()=>g(e._id,e.descricao),disabled:m===e._id,className:"p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-red-500 to-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Excluir transação",children:m===e._id?_e.jsx("div",{className:"animate-spin rounded-full h-[18px] w-[18px] border-2 border-white border-t-transparent"}):_e.jsx(H,{size:18})})]})]})]},e._id))}),_e.jsxs(Tr,{children:[_e.jsx(Or,{columns:["Descrição","Categoria","Data","Valor","Status","Ações"]}),_e.jsx(qr,{children:j.map(e=>_e.jsxs(Lr,{children:[_e.jsx(Fr,{children:_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("div",{className:"p-2 rounded-lg "+("receita"===e.tipo?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"),children:"receita"===e.tipo?_e.jsx(fe,{size:18}):_e.jsx(be,{size:18})}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-medium text-slate-900 dark:text-gray-100",children:e.descricao}),e.pacienteId&&_e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-300",children:e.pacienteId.nome})]})]})}),_e.jsx(Fr,{children:_e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 dark:bg-gray-800 text-slate-600 dark:text-gray-300",children:e.categoria})}),_e.jsx(Fr,{className:"text-sm text-slate-600 dark:text-gray-300",children:_e.jsxs("div",{className:"flex items-center gap-2",children:[_e.jsx(P,{size:14,className:"text-slate-400"}),new Date(e.data).toLocaleDateString("pt-BR")]})}),_e.jsxs(Fr,{className:"font-semibold "+("receita"===e.tipo?"text-emerald-600":"text-red-600"),children:["despesa"===e.tipo?"-":"+",_i(e.valor)]}),_e.jsx(Fr,{children:_e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium "+("pago"===e.status?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-amber-50 text-amber-700 border border-amber-100"),children:"pago"===e.status?_e.jsxs(_e.Fragment,{children:[_e.jsx(V,{size:12})," Pago"]}):_e.jsxs(_e.Fragment,{children:[_e.jsx(R,{size:12})," Pendente"]})})}),_e.jsx(Fr,{className:"text-right",children:_e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[_e.jsx(Pr,{onClick:()=>b(e),icon:G,tooltip:"Editar",ariaLabel:"Editar transação",variant:"primary"}),_e.jsx(Pr,{onClick:()=>g(e._id,e.descricao),icon:H,tooltip:"Excluir",ariaLabel:"Excluir transação",variant:"danger",disabled:m===e._id,loading:m===e._id})]})})]},e._id))})]})]}):_e.jsx("div",{className:"p-8",children:_e.jsx(Er,{icon:O,title:"Nenhuma transação encontrada",description:"Comece adicionando uma nova receita ou despesa.",action:_e.jsx("button",{onClick:()=>o(!0),className:"btn btn-primary mt-4",children:"Nova Transação"})})})}),l&&_e.jsx(Ii,{transacao:c,onClose:()=>{o(!1),d(null),h()}})]})}function Bi(){const[t,s]=e.useState(""),[a,r]=e.useState(null),i=[{id:"dashboard",icon:v,title:"Dashboard",color:"bg-blue-500",description:"Visão geral do sistema com métricas e gráficos",sections:[{title:"Visualizar Métricas",content:"Acompanhe em tempo real os indicadores principais: Pacientes Ativos, Prescrições Ativas, Agendamentos do Dia e Receita Mensal.",steps:["Acesse o Dashboard","Visualize os cards com métricas","Clique em cada card para detalhes"]},{title:"Analisar Gráficos",content:"Gráficos interativos mostram evolução de pacientes, comparativo financeiro e taxa de ocupação.",steps:["Passe o mouse sobre os gráficos","Veja detalhes por período","Use filtros para personalizar"]},{title:"Ações Rápidas",content:"Botões de acesso rápido para criar prescrições, agendamentos e evoluções diretamente do Dashboard.",steps:["Localize os botões de ação","Clique para criar novo item","Preencha e salve"]}],permissions:"Todos os usuários"},{id:"agenda",icon:P,title:"Agenda",color:"bg-purple-500",description:"Gerenciamento de agendamentos e compromissos",sections:[{title:"Criar Agendamento",content:"Agende consultas, visitas, procedimentos e reuniões com facilidade.",steps:['Clique em "+ Novo Agendamento"',"Selecione o paciente","Escolha tipo, data, hora e profissional","Adicione observações",'Clique em "Salvar"']},{title:"Visualizar Agenda",content:"Escolha entre visualização por dia, semana ou mês para melhor organização.",steps:["Selecione a visualização desejada","Navegue entre datas","Clique em agendamento para detalhes"]},{title:"Gerenciar Agendamentos",content:"Edite, confirme ou cancele agendamentos conforme necessário.",steps:["Clique no agendamento","Escolha ação: Editar, Confirmar ou Cancelar","Confirme a operação"]}],permissions:"Admin, Médico, Enfermeiro"},{id:"cronograma",icon:R,title:"Cronograma",color:"bg-indigo-500",description:"Planejamento de tarefas e rotinas",sections:[{title:"Criar Tarefa",content:"Organize tarefas com prioridades, responsáveis e prazos definidos.",steps:['Clique em "+ Nova Tarefa"',"Defina título, descrição e prioridade","Atribua responsável e prazo","Configure recorrência se necessário","Salve a tarefa"]},{title:"Acompanhar Status",content:"Visualize tarefas pendentes, em progresso, concluídas ou atrasadas.",steps:["Veja quadro de tarefas","Filtre por status","Marque como concluída quando finalizar"]},{title:"Configurar Rotinas",content:"Crie tarefas recorrentes para medicação, higienização, alimentação e atividades.",steps:["Crie tarefa com recorrência","Defina frequência (diária, semanal, mensal)","Sistema criará automaticamente"]}],permissions:"Admin, Enfermeiro, Médico"},{id:"prescricoes",icon:Q,title:"Prescrições",color:"bg-green-500",description:"Gestão de prescrições médicas e veterinárias",sections:[{title:"Criar Prescrição",content:"Prescreva medicamentos com dosagem, via, frequência e duração detalhadas.",steps:['Clique em "+ Nova Prescrição"',"Selecione o paciente","Adicione medicamentos e dosagens","Defina via, frequência e duração","Adicione observações especiais","Salve a prescrição"]},{title:"Administrar Medicamento",content:"Registre cada administração de medicamento com horário e observações.",steps:["Abra prescrição ativa",'Clique em "Registrar Administração"',"Confirme horário e dosagem","Salve o registro"]},{title:"Renovar Prescrição",content:"Renove prescrições finalizadas com ajustes de datas e dosagens.",steps:["Abra prescrição finalizada",'Clique em "Renovar"',"Ajuste conforme necessário","Salve nova prescrição"]}],permissions:"Médico, Admin (criar) | Enfermeiro (administrar)"},{id:"censo",icon:C,title:"Censo M.P.",color:"bg-amber-500",description:"Censo de medicamentos prescritos",sections:[{title:"Gerar Censo",content:"Relatório consolidado de todos os medicamentos em uso no período selecionado.",steps:["Selecione o período desejado",'Clique em "Gerar Censo"',"Analise os dados apresentados"]},{title:"Exportar Relatório",content:"Exporte censo em PDF, Excel ou CSV para impressão ou análise externa.",steps:['Clique em "Exportar"',"Escolha o formato","Salve ou imprima o arquivo"]},{title:"Mapa de Medicação",content:"Imprima mapa organizado por paciente, horário ou medicamento para a equipe.",steps:['Clique em "Imprimir Mapa"',"Escolha organização","Imprima para distribuição"]}],permissions:"Médico, Enfermeiro, Farmacêutico, Admin"},{id:"pacientes",icon:w,title:"Pacientes",color:"bg-rose-500",description:"Cadastro completo de residentes ou pets",sections:[{title:"Cadastrar Paciente",content:"Registre dados pessoais, responsável, histórico médico e documentos.",steps:['Clique em "+ Novo Paciente"',"Preencha dados pessoais e contato","Cadastre responsável (obrigatório)","Adicione dados médicos e alergias","Defina status (Ativo, Inativo, Alta)","Salve o cadastro"]},{title:"Visualizar Prontuário",content:"Acesse prontuário completo com prescrições, evoluções, agendamentos e documentos.",steps:["Clique no paciente","Navegue pelas abas","Visualize histórico completo"]},{title:"Anexar Documentos",content:"Anexe exames, laudos, receitas e contratos ao prontuário do paciente.",steps:["Abra aba Documentos",'Clique em "+ Anexar"',"Selecione tipo e arquivo","Faça upload"]}],permissions:"Enfermeiro, Médico, Admin (criar) | Todos (visualizar)"},{id:"estoque",icon:D,title:"Estoque",color:"bg-orange-500",description:"Controle de medicamentos e materiais",sections:[{title:"Cadastrar Produto",content:"Registre medicamentos, alimentos, materiais e produtos com estoque mínimo.",steps:['Clique em "+ Novo Produto"',"Preencha nome, categoria e código","Defina unidade e estoque mínimo","Adicione localização e validade","Informe fornecedor e valor","Salve o produto"]},{title:"Movimentar Estoque",content:"Registre entradas e saídas com lote, validade e motivo.",steps:["Clique no produto","Escolha Entrada ou Saída","Preencha dados da movimentação","Salve o registro"]},{title:"Gerenciar Alertas",content:"Sistema alerta automaticamente sobre estoque baixo e produtos vencendo.",steps:["Visualize alertas no topo","Clique para ver detalhes","Tome ações necessárias"]}],permissions:"Farmacêutico, Admin (gerenciar) | Enfermeiro (saídas)"},{id:"evolucao",icon:S,title:"Evolução",color:"bg-teal-500",description:"Acompanhamento clínico e evolução",sections:[{title:"Registrar Evolução",content:"Documente sinais vitais, observações clínicas e condutas realizadas.",steps:["Selecione o paciente",'Clique em "+ Nova Evolução"',"Registre sinais vitais","Descreva observações clínicas","Documente condutas realizadas","Salve a evolução"]},{title:"Consultar Histórico",content:"Visualize evolução do paciente ao longo do tempo com gráficos.",steps:["Abra paciente","Visualize todas evoluções","Use filtros por período","Analise gráficos"]},{title:"Imprimir Evolução",content:"Gere relatório em PDF de evolução específica ou período completo.",steps:["Selecione evolução",'Clique em "Imprimir"',"Escolha formato","Salve ou imprima"]}],permissions:"Médico, Enfermeiro (criar) | Todos (visualizar)"},{id:"financeiro",icon:O,title:"Financeiro",color:"bg-emerald-500",description:"Gestão de receitas e despesas",sections:[{title:"Registrar Receitas",content:"Lance mensalidades, serviços e produtos recebidos com forma de pagamento.",steps:['Clique em "+ Nova Receita"',"Preencha descrição e valor","Selecione categoria e paciente","Defina data e forma de pagamento","Anexe comprovante (opcional)","Salve o lançamento"]},{title:"Registrar Despesas",content:"Controle pagamentos a fornecedores, salários, aluguel e outras despesas.",steps:['Clique em "+ Nova Despesa"',"Informe descrição e valor","Selecione categoria e fornecedor","Defina data e status de pagamento","Salve o lançamento"]},{title:"Analisar Relatórios",content:"Visualize fluxo de caixa, DRE e relatórios por categoria ou período.",steps:['Clique em "Relatórios"',"Escolha tipo de relatório","Analise gráficos e tabelas","Exporte se necessário"]}],permissions:"Admin (total) | Auxiliar Administrativo (registrar)"},{id:"usuarios",icon:I,title:"Usuários",color:"bg-violet-500",description:"Gerenciamento de usuários e permissões",sections:[{title:"Criar Usuário",content:"Cadastre novos usuários com role, permissões e status definidos.",steps:['Clique em "+ Novo Usuário"',"Preencha dados pessoais","Defina e-mail e senha","Escolha role (Admin, Médico, etc.)","Selecione permissões de módulos","Defina status e salve"]},{title:"Gerenciar Permissões",content:"Controle acesso aos módulos do sistema por usuário ou role.",steps:["Abra usuário","Vá para Permissões","Marque/desmarque módulos","Salve alterações"]},{title:"Resetar Senha",content:"Redefina senha de usuários que esqueceram ou por segurança.",steps:["Clique no usuário",'Clique em "Resetar Senha"',"Digite nova senha","Confirme operação"]}],permissions:"Admin (própria empresa) | Superadmin (todos)"},{id:"empresas",icon:x,title:"Empresas",color:"bg-cyan-500",description:"Gerenciamento de empresas (Superadmin)",sections:[{title:"Criar Empresa",content:"Cadastre novas empresas com plano, módulos e administrador.",steps:['Clique em "+ Nova Empresa"',"Preencha dados cadastrais","Escolha tipo (Casa Repouso ou Petshop)","Defina plano e módulos","Crie administrador","Salve a empresa"]},{title:"Gerenciar Planos",content:"Faça upgrade/downgrade de planos e configure limites de usuários.",steps:["Abra empresa","Vá para Plano","Altere configurações","Salve mudanças"]},{title:"Relatório Consolidado",content:"Visualize métricas de todas as empresas cadastradas no sistema.",steps:['Clique em "Relatório Geral"',"Analise estatísticas","Exporte se necessário"]}],permissions:"Apenas Superadmin"},{id:"configuracoes",icon:q,title:"Configurações",color:"bg-slate-500",description:"Personalização e preferências",sections:[{title:"Editar Perfil",content:"Atualize foto, nome, e-mail, telefone e outros dados pessoais.",steps:["Acesse Configurações","Vá para Meu Perfil","Edite campos desejados","Salve alterações"]},{title:"Alterar Senha",content:"Troque sua senha regularmente para manter segurança.",steps:["Vá para Segurança","Digite senha atual","Digite nova senha duas vezes","Confirme alteração"]},{title:"Configurar Preferências",content:"Personalize tema, idioma, fuso horário e notificações.",steps:["Acesse Preferências","Ajuste configurações desejadas","Ative/desative notificações","Salve mudanças"]}],permissions:"Todos (próprio perfil) | Admin (empresa)"}].filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())),n=[{icon:_,text:"Use senhas fortes com mínimo 8 caracteres",color:"text-red-600"},{icon:je,text:"Faça backup regular dos dados importantes",color:"text-green-600"},{icon:_,text:"Mantenha informações atualizadas no sistema",color:"text-blue-600"},{icon:je,text:"Configure notificações para não perder prazos",color:"text-purple-600"}];return _e.jsxs("div",{className:"space-y-6",children:[_e.jsx(br,{title:"Manual do Sistema",subtitle:"Guia completo de como utilizar cada módulo"}),_e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:_e.jsxs("div",{className:"relative",children:[_e.jsx(M,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),_e.jsx("input",{type:"text",placeholder:"Buscar por módulo ou funcionalidade...",value:t,onChange:e=>s(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),_e.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-purple-50 p-6 rounded-xl border border-primary-100",children:[_e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_e.jsx(ge,{className:"text-primary-600",size:24}),_e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dicas Rápidas"})]}),_e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((e,t)=>_e.jsxs("div",{className:"flex items-start gap-3 bg-white p-4 rounded-lg",children:[_e.jsx(e.icon,{className:e.color,size:20}),_e.jsx("p",{className:"text-sm text-slate-700",children:e.text})]},t))})]}),a?_e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[_e.jsxs("div",{className:`${a.color} p-6 text-white`,children:[_e.jsxs("button",{onClick:()=>r(null),className:"mb-4 flex items-center gap-2 text-white/80 hover:text-white transition-colors",children:[_e.jsx(ve,{size:20,className:"rotate-180"}),_e.jsx("span",{children:"Voltar para módulos"})]}),_e.jsxs("div",{className:"flex items-center gap-4",children:[_e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:_e.jsx(a.icon,{size:32})}),_e.jsxs("div",{children:[_e.jsx("h2",{className:"text-3xl font-bold mb-1",children:a.title}),_e.jsx("p",{className:"text-white/90",children:a.description})]})]})]}),_e.jsxs("div",{className:"p-6 space-y-6",children:[_e.jsx("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:_e.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[_e.jsx(I,{size:18}),_e.jsx("span",{className:"font-medium",children:"Permissões necessárias:"}),_e.jsx("span",{className:"text-slate-600",children:a.permissions})]})}),a.sections.map((e,t)=>_e.jsxs("div",{className:"border-l-4 border-primary-500 pl-6 py-2",children:[_e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[_e.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-primary-100 text-primary-600 rounded-full text-sm font-bold",children:t+1}),e.title]}),_e.jsx("p",{className:"text-slate-700 mb-4 leading-relaxed",children:e.content}),e.steps&&_e.jsxs("div",{className:"space-y-2",children:[_e.jsx("p",{className:"text-sm font-medium text-slate-600 mb-2",children:"Passo a passo:"}),e.steps.map((e,t)=>_e.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[_e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-600 text-white rounded-full text-xs font-bold flex-shrink-0 mt-0.5",children:t+1}),_e.jsx("p",{className:"text-sm text-slate-700",children:e})]},t))]})]},t)),_e.jsxs("div",{className:"flex flex-wrap gap-4 pt-4 border-t border-slate-200",children:[_e.jsxs("button",{onClick:()=>window.open("/docs/MANUAL_COMPLETO_SISTEMA.md","_blank"),className:"flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-colors",children:[_e.jsx(A,{size:20}),_e.jsx("span",{children:"Baixar Manual Completo"})]}),_e.jsxs("button",{onClick:()=>window.open("mailto:suporte@prescrimed.com","_blank"),className:"flex items-center gap-2 px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold rounded-xl transition-colors",children:[_e.jsx(ye,{size:20}),_e.jsx("span",{children:"Contatar Suporte"})]})]})]})]}):_e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>{const t=e.icon;return _e.jsxs("button",{onClick:()=>r(e),className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-lg transition-all duration-200 text-left group",children:[_e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_e.jsx("div",{className:`w-14 h-14 ${e.color} rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform`,children:_e.jsx(t,{className:"text-white",size:28})}),_e.jsx(ve,{className:"text-slate-400 group-hover:text-primary-600 transition-colors",size:24})]}),_e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:e.title}),_e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:e.description}),_e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[_e.jsx(I,{size:14}),_e.jsx("span",{children:e.permissions})]})]},e.id)})}),_e.jsx("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white p-8 rounded-xl",children:_e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[_e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Precisa de Ajuda?"}),_e.jsx("p",{className:"text-slate-300 mb-6",children:"Nossa equipe de suporte está pronta para ajudar você com qualquer dúvida ou problema."}),_e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[_e.jsx("a",{href:"mailto:suporte@prescrimed.com",className:"flex items-center gap-2 px-6 py-3 bg-white text-slate-900 font-semibold rounded-xl hover:bg-slate-100 transition-colors",children:"📧 suporte@prescrimed.com"}),_e.jsx("a",{href:"https://wa.me/5571999999999",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white font-semibold rounded-xl hover:bg-green-700 transition-colors",children:"📱 WhatsApp"})]}),_e.jsx("p",{className:"text-sm text-slate-400 mt-4",children:"Horário de atendimento: Segunda a Sexta, 8h às 18h"})]})})]})}function Mi({onClose:e}){const{user:t,logout:s,hasPermission:a}=Za(),r=[{path:"/dashboard",label:"Dashboard",icon:Ne,permission:null},{path:"/agenda",label:"Agenda",icon:P,permission:"agenda"},{path:"/cronograma",label:"Cronograma",icon:we,permission:"cronograma"},{path:"/prescricoes",label:"Prescrições",icon:C,permission:"prescricoes"},{path:"/censo-mp",label:"Censo M.P",icon:Ce,permission:"prescricoes"},{path:"/residentes",label:"Pacientes",icon:w,permission:"pacientes"},{path:"/estoque",label:"Estoque",icon:D,permission:"estoque"},{path:"/evolucao",label:"Evolução",icon:T,permission:"evolucao"},{path:"/financeiro",label:"Financeiro",icon:O,permission:"financeiro"},{path:"/usuarios",label:"Usuários",icon:ke,roles:["admin","superadmin"]},{path:"/empresas",label:"Empresas",icon:x,roles:["superadmin"]},{path:"/configuracoes",label:"Configurações",icon:q,permission:"configuracoes"},{path:"/manual",label:"Manual",icon:ge,permission:null}];return _e.jsxs("aside",{className:"h-full w-72 bg-primary-900 text-white flex flex-col border-r border-white/5 shadow-2xl",children:[_e.jsxs("div",{className:"h-20 px-6 border-b border-white/10 flex items-center justify-between",children:[_e.jsxs("div",{children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-primary-200",children:"Prescrimed"}),_e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Painel"})]}),_e.jsx("button",{className:"lg:hidden p-2 rounded-xl bg-white/10 hover:bg-white/20 transition",onClick:()=>null==e?void 0:e(),children:_e.jsx(F,{size:18})})]}),_e.jsxs("div",{className:"px-6 py-5 border-b border-white/10",children:[_e.jsx("p",{className:"text-sm text-primary-100",children:"Bem-vindo"}),_e.jsx("p",{className:"text-lg font-semibold",children:null==t?void 0:t.nome}),_e.jsx("p",{className:"text-sm text-primary-200/60",children:null==t?void 0:t.email}),("admin"===(null==t?void 0:t.role)||"superadmin"===(null==t?void 0:t.role))&&_e.jsx("span",{className:"inline-flex items-center gap-2 mt-3 px-3 py-1 rounded-full bg-white/10 text-xs font-semibold text-primary-300",children:"superadmin"===(null==t?void 0:t.role)?"Super Admin":"Administrador"})]}),_e.jsxs("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:[_e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-primary-300/50 mb-4",children:"Navegação"}),_e.jsx("ul",{className:"space-y-2",children:r.map(s=>"superadmin"===(null==t?void 0:t.role)?_e.jsx("li",{children:_e.jsxs(n,{to:s.path,onClick:()=>null==e?void 0:e(),className:({isActive:e})=>"flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 "+(e?"bg-white text-primary-900 shadow-xl":"text-primary-100 hover:bg-white/10"),children:[_e.jsx(s.icon,{size:20}),_e.jsx("span",{children:s.label})]})},s.path):s.roles&&!s.roles.includes(null==t?void 0:t.role)||s.permission&&!a(s.permission)?null:_e.jsx("li",{children:_e.jsxs(n,{to:s.path,onClick:()=>null==e?void 0:e(),className:({isActive:e})=>"flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 "+(e?"bg-white text-primary-900 shadow-xl":"text-primary-100 hover:bg-white/10"),children:[_e.jsx(s.icon,{size:20}),_e.jsx("span",{children:s.label})]})},s.path))})]}),_e.jsx("div",{className:"px-4 py-6 border-t border-white/10",children:_e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-2xl bg-white/10 hover:bg-white/20 transition text-red-100",children:[_e.jsx(Se,{size:18}),_e.jsx("span",{children:"Sair"})]})})]})}function $i({onToggleSidebar:e}){var t;const{user:s}=Za(),a=r();return _e.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:_e.jsxs("div",{className:"h-20 px-4 lg:px-8 flex items-center justify-between gap-4",children:[_e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[_e.jsx("button",{className:"lg:hidden p-2 rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition",onClick:e,children:_e.jsx(Ee,{size:20})}),_e.jsx("div",{className:"hidden sm:block flex-1",children:_e.jsxs("div",{className:"relative",children:[_e.jsx(M,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),_e.jsx("input",{type:"text",placeholder:"Pesquisar pacientes, prescrições ou usuários",className:"w-full pl-12 pr-4 py-3 rounded-2xl border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-primary-400 text-sm text-slate-700"})]})})]}),_e.jsxs("div",{className:"flex items-center gap-3",children:[_e.jsx("button",{onClick:()=>a("/censo-mp"),className:"hidden sm:inline-flex items-center px-4 py-2 rounded-2xl bg-primary-50 text-primary-600 text-sm font-semibold hover:bg-primary-100 transition",children:"Nova Prescrição"}),_e.jsxs("button",{className:"relative p-3 rounded-2xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition",children:[_e.jsx(X,{size:20}),_e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-400 rounded-full"})]}),_e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-slate-100 rounded-2xl",children:[_e.jsxs("div",{className:"hidden sm:flex flex-col text-xs text-slate-500 leading-tight",children:[_e.jsx("span",{children:"Conectado"}),_e.jsx("span",{className:"text-slate-800 font-semibold text-sm",children:null==s?void 0:s.nome})]}),_e.jsx("div",{className:"w-11 h-11 rounded-2xl bg-gradient-to-br from-primary-600 to-primary-700 flex items-center justify-center text-white text-lg font-semibold",children:null==(t=null==s?void 0:s.nome)?void 0:t.charAt(0).toUpperCase()})]})]})]})})}function Vi(){const[t,s]=e.useState(!1);return _e.jsxs("div",{className:"min-h-screen bg-slate-100 flex",children:[_e.jsx("div",{className:`\n          fixed inset-y-0 left-0 z-40 w-72 \n          transform transition-transform duration-300 \n          lg:static lg:translate-x-0 \n          ${t?"translate-x-0":"-translate-x-full"}\n        `,children:_e.jsx(Mi,{onClose:()=>s(!1)})}),t&&_e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-30 lg:hidden",onClick:()=>s(!1)}),_e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[_e.jsx($i,{onToggleSidebar:()=>s(e=>!e)}),_e.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-8",children:_e.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:_e.jsx(l,{})})})]})]})}const Gi=({children:e,requiredPermission:t})=>{const{isAuthenticated:s,hasPermission:a}=Za();return s?t&&!a(t)?_e.jsx(o,{to:"/dashboard",replace:!0}):e:_e.jsx(o,{to:"/login",replace:!0})};function Hi(){const[t,s]=e.useState("online"),[a,r]=e.useState(!1),[i,n]=e.useState(null),[l,o]=e.useState(null);if(e.useEffect(()=>{const e=async e=>{let t=null;try{t=await e.clone().json()}catch(i){t=null}if(e.ok&&!t)return s("offline"),o(null),void r(!0);if(503===e.status)return s("degraded"),o("connecting"),void r(!0);if(!e.ok)return s("offline"),o(null),void r(!0);const a=null==t?void 0:t.database;if(a&&"connected"!==a)return s("degraded"),o(a),void r(!0);s("online"),o(a||"connected"),r(!1)},t=async()=>{try{const a=_a();let i=!1;try{if(a){i=new URL(a).origin===window.location.origin}else i=!0}catch(t){i=!1}if(i){const t=await fetch("/health",{method:"GET",signal:AbortSignal.timeout(5e3)});return await e(t),void n(new Date)}if(!a){if(window.location.hostname.includes("railway.app")){const t=await fetch("/health",{method:"GET",signal:AbortSignal.timeout(5e3)});return await e(t),void n(new Date)}return s("online"),o(null),r(!1),void n(new Date)}if(a.includes("localhost")&&(window.location.hostname.includes("railway.app")||window.location.hostname.includes("github.io")))return s("offline"),o(null),r(!0),void n(new Date);const l=`${a}/health`,c=await fetch(l,{method:"GET",mode:"cors",signal:AbortSignal.timeout(5e3)});await e(c)}catch(a){s("offline"),o(null),r(!0)}n(new Date)};t();const a=setInterval(t,3e4);return()=>clearInterval(a)},[]),!a)return null;const c="offline"===t,d="degraded"===t,m=c?"Backend Offline":"Backend Online (Banco Inicializando)",x=c?"Não foi possível conectar ao servidor. Verifique se o backend está rodando.":"O servidor respondeu, mas o banco de dados ainda não está conectado. Aguarde alguns instantes e tente novamente.",u=_a()?_a()+"/health":null,p=c?"bg-red-600":"bg-amber-500",h=c?"bg-red-700":"bg-amber-600";return _e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 animate-slide-down",children:[_e.jsx("div",{className:`${p} text-white px-4 py-3 shadow-lg`,children:_e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[_e.jsxs("div",{className:"flex items-center gap-3",children:[c?_e.jsx(Ae,{className:"w-5 h-5 animate-pulse"}):_e.jsx(_,{className:"w-5 h-5"}),_e.jsxs("div",{children:[_e.jsx("p",{className:"font-semibold",children:m}),_e.jsx("p",{className:"text-sm opacity-90",children:x}),d&&l?_e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:["Status do banco: ",_e.jsx("span",{className:"font-semibold",children:l})]}):null]})]}),_e.jsxs("div",{className:"flex items-center gap-4",children:[u?_e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-sm underline hover:no-underline",children:"Testar Conexão"}):null,_e.jsx("button",{onClick:()=>r(!1),className:"text-white hover:bg-black/15 rounded p-1 transition-colors","aria-label":"Fechar alerta",children:"✕"})]})]})}),_e.jsx("div",{className:`${h} px-4 py-2`,children:_e.jsx("div",{className:"max-w-7xl mx-auto",children:_e.jsxs("p",{className:"text-sm text-white/90",children:[_e.jsx("strong",{children:"Como resolver:"})," ",c?_e.jsxs(_e.Fragment,{children:["Verifique se a API está rodando no Railway e se as variáveis ",_e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"VITE_BACKEND_ROOT"})," ou ",_e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"VITE_API_URL"})," estão configuradas corretamente no frontend."]}):_e.jsxs(_e.Fragment,{children:["No Railway, confirme se o Postgres foi criado e se ",_e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"DATABASE_URL"})," está presente. Enquanto isso, o sistema pode ficar parcialmente indisponível."]})]})})})]})}function Ji(){return _e.jsxs(_e.Fragment,{children:[_e.jsx(Hi,{}),_e.jsx(c,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:_e.jsxs(d,{children:[_e.jsx(m,{path:"/login",element:_e.jsx(cr,{})})," ",_e.jsx(m,{path:"/register",element:_e.jsx(dr,{})})," ",_e.jsxs(m,{path:"/",element:_e.jsxs(Gi,{children:[" ",_e.jsx(Vi,{})," "]}),children:[_e.jsx(m,{index:!0,element:_e.jsx(o,{to:"dashboard",replace:!0})}),_e.jsx(m,{path:"dashboard",element:_e.jsx(jr,{})}),_e.jsx(m,{path:"agenda",element:_e.jsx(Gi,{children:_e.jsx(xi,{})})}),_e.jsx(m,{path:"cronograma",element:_e.jsx(Gi,{children:_e.jsx(ui,{})})}),_e.jsx(m,{path:"censo-mp",element:_e.jsx(Gi,{requiredPermission:"prescricoes",children:_e.jsx($r,{})})}),_e.jsx(m,{path:"prescricoes",element:_e.jsx(Gi,{requiredPermission:"prescricoes",children:_e.jsx(Mr,{})})}),_e.jsx(m,{path:"estoque",element:_e.jsx(Gi,{children:_e.jsx(Si,{})})}),_e.jsx(m,{path:"evolucao",element:_e.jsx(Gi,{children:_e.jsx(Di,{})})}),_e.jsx(m,{path:"financeiro",element:_e.jsx(Gi,{children:_e.jsx(Ui,{})})}),_e.jsx(m,{path:"residentes",element:_e.jsx(Gi,{requiredPermission:"pacientes",children:_e.jsx(Ir,{})})}),_e.jsx(m,{path:"pacientes",element:_e.jsx(o,{to:"/residentes",replace:!0})}),_e.jsx(m,{path:"usuarios",element:_e.jsx(Gi,{requiredPermission:"usuarios",children:_e.jsx(Zr,{})})}),_e.jsx(m,{path:"empresas",element:_e.jsx(Gi,{children:_e.jsx(ni,{})})}),_e.jsx(m,{path:"configuracoes",element:_e.jsx(Gi,{requiredPermission:"configuracoes",children:_e.jsx(li,{})})}),_e.jsx(m,{path:"manual",element:_e.jsx(Gi,{children:_e.jsx(Bi,{})})})]}),_e.jsx(m,{path:"*",element:_e.jsx(o,{to:"/login",replace:!0})})]})}),_e.jsx(Pe,{position:"top-right"})]})}class Wi extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){var e;return this.state.hasError?_e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:_e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[_e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Algo deu errado"}),_e.jsx("p",{className:"text-slate-600 mb-6",children:"Ocorreu um erro inesperado na aplicação. Tente recarregar a página."}),_e.jsx("pre",{className:"text-xs text-left bg-slate-100 p-4 rounded-lg overflow-auto mb-6 text-red-600",children:null==(e=this.state.error)?void 0:e.toString()}),_e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-primary-700 transition",children:"Recarregar Página"}),_e.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"block w-full mt-3 text-sm text-slate-500 hover:text-slate-700",children:"Limpar dados e recarregar"})]})}):this.props.children}}Ue.createRoot(document.getElementById("root")).render(_e.jsx(a.StrictMode,{children:_e.jsx(Wi,{children:_e.jsx(Ji,{})})}));
